(()=>{var e={2694:(e,t,r)=>{"use strict";var n=r(6925);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,o,s){if(s!==n){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return r.PropTypes=r,r}},5556:(e,t,r)=>{e.exports=r(2694)()},6925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},21020:(e,t,r)=>{"use strict";var n=r(51609),a=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,r){var n,l={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,n)&&!i.hasOwnProperty(n)&&(l[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===l[n]&&(l[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:u,props:l,_owner:s.current}}},22799:(e,t)=>{"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen");Symbol.for("react.module.reference")},44363:(e,t,r)=>{"use strict";r(22799)},51609:e=>{"use strict";e.exports=window.React},74848:(e,t,r)=>{"use strict";e.exports=r(21020)}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.data,t=window.gbp.stylesBuilder,n=(0,e.createReduxStore)("gbp-block-styles-current-style",{reducer:t.currentStyleReducer,actions:t.currentStyleActions,selectors:t.currentStyleSelectors}),a=(0,e.createReduxStore)("gbp-block-styles-at-rule",{reducer:t.atRuleReducer,actions:t.atRuleActions,selectors:t.atRuleSelectors}),o=(0,e.createReduxStore)("gbp-block-styles-nested-rule",{reducer:t.nestedRuleReducer,actions:t.nestedRuleActions,selectors:t.nestedRuleSelectors}),s=(0,e.createReduxStore)("gbp-menu-toggle-state",{reducer:function(e=!1,t){return"SET_DATA"===t.type?t.payload:e},actions:{setMenuToggleState:e=>({type:"SET_DATA",payload:e})},selectors:{menuToggleState:e=>e}});(0,e.register)(n),(0,e.register)(a),(0,e.register)(o),(0,e.register)(s);var i=r(51609),l=r.n(i);const c=window.wp.hooks,u=window.wp.compose,d=window.wp.blockEditor,h=window.wp.i18n,p=window.wp.components,g=window.wp.element,m=window.wp.primitives,b=(0,g.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(m.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),f=(0,g.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(m.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),y={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let v;const _=new Uint8Array(16);function w(){if(!v&&(v="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!v))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return v(_)}const E=[];for(let e=0;e<256;++e)E.push((e+256).toString(16).slice(1));const k=function(e,t,r){if(y.randomUUID&&!t&&!e)return y.randomUUID();const n=(e=e||{}).random||(e.rng||w)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return E[e[t+0]]+E[e[t+1]]+E[e[t+2]]+E[e[t+3]]+"-"+E[e[t+4]]+E[e[t+5]]+"-"+E[e[t+6]]+E[e[t+7]]+"-"+E[e[t+8]]+E[e[t+9]]+"-"+E[e[t+10]]+E[e[t+11]]+E[e[t+12]]+E[e[t+13]]+E[e[t+14]]+E[e[t+15]]}(n)},C=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","readonly","required","reversed","selected"],x=(wp.element.createElement,e=>e.replace(/[^a-zA-Z0-9-_\.]/g,"")),S=e=>{const t=e.trim(),r=t.match(/^([a-zA-Z][a-zA-Z0-9-_\.]*)\s*=\s*["']([^"']*)["']$/);if(r)return{name:r[1],value:r[2]};const n=t.match(/^([a-zA-Z][a-zA-Z0-9-_\.]*)\s*=\s*(.+)$/);if(n)return{name:n[1],value:n[2]};const a=t.match(/^([a-zA-Z][a-zA-Z0-9-_\.]*)$/);return a&&C.includes(a[1])?{name:a[1],value:""}:null};function I({items:e={},onAdd:t,onRemove:r,onChange:n,label:a=(0,h.__)("HTML Attributes","generateblocks-pro")}){const[o,s]=(0,g.useState)(""),[l,c]=(0,g.useState)(""),[u,d]=(0,g.useState)(""),[m,y]=(0,g.useState)(null),[v,_]=(0,g.useState)(null),w=async()=>{try{if(!navigator.clipboard||!navigator.clipboard.readText)return;const t=(e=>{const t=e.trim(),r=t.match(/^([a-zA-Z][a-zA-Z0-9-_\.]*)\s*=\s*["']([^"']*)["']$/);if(r)return{name:r[1],value:r[2]};const n=t.match(/^([a-zA-Z][a-zA-Z0-9-_\.]*)\s*=\s*([^\s]+)$/);if(n)return{name:n[1],value:n[2]};const a=t.match(/^([a-zA-Z][a-zA-Z0-9-_\.]*)$/);return a&&C.includes(a[1])?{name:a[1],value:""}:null})(await navigator.clipboard.readText());if(t&&"class"!==t.name){const r=x(t.name),n=e[r];void 0===n||n!==t.value?_({...t,isReplacement:void 0!==n}):_(null)}else _(null)}catch(e){_(null)}};return(0,i.createElement)(p.BaseControl,{label:a,id:k()},(0,i.createElement)("div",{className:"gb-html-attributes"},v&&(0,i.createElement)("div",{className:"gb-html-attributes__clipboard-suggestion"},(0,i.createElement)("span",{className:"gb-html-attributes__clipboard-label"},v.isReplacement?(0,h.__)("Replace from clipboard:","generateblocks"):(0,h.__)("Add from clipboard:","generateblocks")),(0,i.createElement)("span",{className:"gb-html-attributes__clipboard-text"},(0,i.createElement)("code",null,v.name,v.value&&`="${v.value}"`),(0,i.createElement)(p.Button,{onClick:()=>{if(!v)return;const{name:r,value:n}=v,a=x(r);t({...e,[a]:n}),_(null),d("")},icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256"},(0,i.createElement)("rect",{width:"256",height:"256",fill:"none"}),(0,i.createElement)("line",{x1:"96",y1:"152",x2:"160",y2:"152",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),(0,i.createElement)("line",{x1:"96",y1:"120",x2:"160",y2:"120",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),(0,i.createElement)("path",{d:"M160,40h40a8,8,0,0,1,8,8V216a8,8,0,0,1-8,8H56a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H96",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),(0,i.createElement)("path",{d:"M88,72V64a40,40,0,0,1,80,0v8Z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"})),size:"small",iconSize:"16",variant:"secondary",text:v.isReplacement?(0,h.__)("Replace","generateblocks"):(0,h.__)("Add","generateblocks")}))),Object.entries(e).map((([t,a],o)=>(0,i.createElement)("div",{className:"gb-html-attributes__item",key:o},(0,i.createElement)(p.TextControl,{type:"text",value:m&&m.oldKey===t?m.key:t,onChange:e=>((e,t,r)=>{const n=S(e);y(n?{oldKey:t,key:n.name,value:n.value}:{oldKey:t,key:e,value:r})})(e,t,a),title:t,onFocus:w}),(0,i.createElement)(p.TextControl,{type:"text",value:m&&m.oldKey===t?m.value:a,onChange:e=>((e,t,r)=>{const n=S(e);y(n?{oldKey:t,key:n.name,value:n.value}:{oldKey:t,key:r,value:e})})(e,t,t),title:a,onFocus:w}),m&&m.oldKey===t?(0,i.createElement)(p.Button,{onClick:()=>(t=>{const r=m.key.startsWith("data-");if(!m.value&&!C.includes(m.key)&&!r&&"alt"!==m.key)return void d("Attribute value is required.");if("class"===m.key)return void d("Class attribute is not allowed.");if(!m.key)return void d("Attribute name is required.");const a={...e};delete a[t],a[x(m.key)]=m.value,n(a),y(null),d("")})(t),icon:b,size:"small",iconSize:"20",variant:"primary"}):(0,i.createElement)(p.Button,{onClick:()=>(t=>{const n={...e};delete n[t],r(n)})(t),icon:f,size:"small",iconSize:"20",isDestructive:!0})))),(0,i.createElement)("div",{className:"gb-html-attributes__item"},(0,i.createElement)(p.TextControl,{type:"text",value:o,onChange:e=>{const t=S(e);t?(s(t.name),c(t.value)):s(e)},placeholder:(0,h.__)("Name","generateblocks-pro"),onFocus:w}),(0,i.createElement)(p.TextControl,{type:"text",value:l,onChange:e=>{const t=S(e);t?(s(t.name),c(t.value)):c(e)},placeholder:(0,h.__)("Value","generateblocks-pro"),onFocus:w}),(0,i.createElement)(p.Button,{onClick:()=>{const r=o.startsWith("data-");l||C.includes(o)||r||"alt"===o?"class"!==o?o?(t({...e,[x(o)]:l}),s(""),c(""),d("")):d("Attribute name is required."):d("Class attribute is not allowed."):d("Attribute value is required.")},icon:b,size:"small",iconSize:"20",disabled:!o,variant:"primary",style:{display:o||Object.keys(e).length?"":"none",opacity:!o&&Object.keys(e).length?0:1}})),u&&(0,i.createElement)("div",{className:"error-message"},u)))}const O=window.wp.htmlEntities;var N=r(74848),R=i.createContext(void 0),T=e=>{const t=i.useContext(R);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},P=({client:e,children:t})=>(i.useEffect((()=>(e.mount(),()=>{e.unmount()})),[e]),(0,N.jsx)(R.Provider,{value:e,children:t}));const M=(0,g.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(m.Path,{d:"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z"})),D=(0,g.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(m.Path,{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"}));function A({currentView:e,views:t={},className:r="",minHeight:n=400,viewOrder:a=[]}){const[o,s]=(0,g.useState)(e),[l,c]=(0,g.useState)(!1),[u,d]=(0,g.useState)(!1),[h,p]=(0,g.useState)("forward");(0,g.useEffect)((()=>{u||d(!0)}),[]),(0,g.useEffect)((()=>{if(u&&o!==e){const t=a.indexOf(e),r=a.indexOf(o);p(-1!==t&&-1!==r?t>r?"forward":"backward":"forward"),c(!0);const n=setTimeout((()=>{c(!1),s(e)}),260);return()=>clearTimeout(n)}}),[e,o,u,a]);const m=["gb-navigator",r,l?"gb-navigator--transitioning":"",l?`gb-navigator--${h}`:""].filter(Boolean).join(" ");return(0,i.createElement)("div",{className:m,style:{minHeight:`${n}px`}},Object.entries(t).map((([t,r])=>{const n=t===e,a=["gb-navigator-view",`gb-navigator-view--${t}`,n?"gb-navigator-view--active":"gb-navigator-view--inactive"].join(" ");return(0,i.createElement)("div",{key:t,className:a,"aria-hidden":!n},(n||l)&&r)})))}function B({trigger:e,itemId:t=null,itemType:r="item",dashboardView:n,editorView:a,onItemSelect:o=null,getNewTabUrl:s,modalProps:l={},labels:c={},className:u="",confirmMessages:d}){const m={backButton:(0,h.__)("Back to Dashboard","generateblocks-pro"),createNew:(0,h.__)("Create New Item","generateblocks-pro"),edit:(0,h.__)("Edit Item","generateblocks-pro"),dashboard:(0,h.__)("Dashboard","generateblocks-pro"),openInNewTab:(0,h.__)("Open in new tab","generateblocks-pro"),close:(0,h.__)("Close","generateblocks-pro"),unsavedChanges:(0,h.__)("Unsaved changes","generateblocks-pro"),...c},{isOpen:b,setIsOpen:f,currentView:y,contentHeight:v,selectedItemId:_,selectedItemTitle:w,selectedItemData:E,hasUnsavedChanges:k,setHasUnsavedChanges:C,headerRef:x,modalRef:S,handleItemSelect:I,handleBackToDashboard:O,handleBackToDashboardAfterSave:N,handleOpenInNewTab:R,handleClose:T}=function({itemId:e=null,onItemSelect:t=null,getNewTabUrl:r,confirmMessages:n={unsavedBack:(0,h.__)("You have unsaved changes. Are you sure you want to go back?","generateblocks-pro"),unsavedClose:(0,h.__)("You have unsaved changes. Are you sure you want to close?","generateblocks-pro")}}){const[a,o]=(0,g.useState)(!1),[s,i]=(0,g.useState)(e?"editor":"dashboard"),[l,c]=(0,g.useState)(0),[u,d]=(0,g.useState)(e),[p,m]=(0,g.useState)(""),[b,f]=(0,g.useState)(null),[y,v]=(0,g.useState)(!1),_=(0,g.useRef)(null),w=(0,g.useRef)(null),E=(0,g.useRef)(!1);(0,g.useEffect)((()=>{E.current||(d(e),i(e?"editor":"dashboard")),E.current=!1}),[e]);const k=(0,g.useCallback)(((e,r,n)=>{d(e),m(r||""),f(n||null),i("editor"),t&&t(e,r,n)}),[t]),C=(0,g.useCallback)((()=>{y&&!window.confirm(n.unsavedBack)||(E.current=!0,i("dashboard"),d(null),m(""),f(null),v(!1))}),[y,n.unsavedBack]),x=(0,g.useCallback)((()=>{E.current=!0,i("dashboard"),d(null),m(""),f(null),v(!1)}),[]),S=(0,g.useCallback)((()=>{if("editor"===s&&u&&r){const e=r(u,b);e&&window.open(e,"_blank")}}),[s,u,b,r]),I=(0,g.useCallback)((()=>{"editor"===s&&y&&!window.confirm(n.unsavedClose)||(o(!1),setTimeout((()=>{i(e?"editor":"dashboard"),d(e),m(""),v(!1)}),300))}),[s,y,n.unsavedClose,e]);return(0,g.useEffect)((()=>{const e=()=>{if(!w.current||!_.current||!a)return;const e=w.current.querySelector(".components-modal__content"),t=_.current;if(e&&t){const r=e.clientHeight,n=t.offsetHeight;c(r-n)}};if(a){e();const t=new ResizeObserver(e);return w.current&&t.observe(w.current),_.current&&t.observe(_.current),window.addEventListener("resize",e),()=>{t.disconnect(),window.removeEventListener("resize",e)}}}),[a]),(0,g.useEffect)((()=>{const e=e=>{"Escape"===e.key&&a&&(e.preventDefault(),I())};return a&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[a,I]),{isOpen:a,setIsOpen:o,currentView:s,setCurrentView:i,contentHeight:l,selectedItemId:u,selectedItemTitle:p,selectedItemData:b,hasUnsavedChanges:y,setHasUnsavedChanges:v,headerRef:_,modalRef:w,handleItemSelect:k,handleBackToDashboard:C,handleBackToDashboardAfterSave:x,handleOpenInNewTab:S,handleClose:I}}({itemId:t,onItemSelect:o,getNewTabUrl:s,confirmMessages:d}),P={dashboard:n&&(0,g.cloneElement)(n,{isModalMode:!0,isIframeMode:!0,onItemSelect:e=>{"object"==typeof e&&e.id&&I(e.id,e.title?.rendered||e.title||"")},onCreateItem:()=>I("new",m.createNew),onConditionSelect:e=>{I(e.id,e.title?.rendered||"",e)},onCreateCondition:()=>I("new",m.createNew),onModalSelect:(e,t)=>{I(e,t)},onCreateOverlay:(e,t)=>I(e||"new",m.createNew,{overlayType:t})}),editor:a&&_&&(0,g.cloneElement)(a,{embedded:!0,onUnsavedChanges:C,conditionId:"new"===_?null:_,isNew:"new"===_,onNavigateBack:O,onSave:N,overlayId:_,overlayTitle:w,overlayType:E?.overlayType,onClose:O})},B={title:"",className:`gb-dashboard-trigger-modal ${u}`,isFullScreen:!0,isDismissible:!1,shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,showHeader:!1,...l};return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{onClick:()=>f(!0),role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),f(!0))}},e),b&&(0,i.createElement)(p.Modal,{...B,onRequestClose:()=>{},ref:S},(0,i.createElement)("div",{className:"gb-dashboard-custom-header",ref:x,"data-item-type":r},(0,i.createElement)("div",{className:"gb-dashboard-header-left"},"editor"===y&&(0,i.createElement)(p.Button,{icon:"arrow-left-alt2",size:"compact",variant:"tertiary",onClick:O,label:m.backButton}),(0,i.createElement)("h2",{className:"gb-dashboard-custom-title"},(()=>{if("editor"===y){const e="new"===_?m.createNew:m.edit;return w&&"new"!==_?`${e}: ${w}`:e}return m.dashboard})())),(0,i.createElement)("div",{className:"gb-dashboard-header-actions"},k&&"editor"===y&&(0,i.createElement)("span",{className:"gb-dashboard-unsaved-indicator"},m.unsavedChanges),"editor"===y&&s&&(0,i.createElement)(p.Button,{icon:M,size:"compact",variant:"tertiary",onClick:R,label:m.openInNewTab}),(0,i.createElement)(p.Button,{icon:D,size:"compact",variant:"tertiary",onClick:T,label:m.close}))),(0,i.createElement)("div",{className:"gb-dashboard-content-wrapper",style:{height:v>0?`${v}px`:"auto",minHeight:v>0?`${v}px`:"auto"}},(0,i.createElement)(A,{currentView:y,views:P,className:"gb-dashboard-navigator",minHeight:0,viewOrder:["dashboard","editor"]}))))}const F=(0,g.createElement)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,g.createElement)(m.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}));var $=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},q="undefined"==typeof window||"Deno"in globalThis;function L(){}function V(e){return"number"==typeof e&&e>=0&&e!==1/0}function z(e,t){return Math.max(e+(t||0)-Date.now(),0)}function U(e,t){return"function"==typeof e?e(t):e}function K(e,t){return"function"==typeof e?e(t):e}function j(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:o,queryKey:s,stale:i}=e;if(s)if(n){if(t.queryHash!==Q(s,t.options))return!1}else if(!G(t.queryKey,s))return!1;if("all"!==r){const e=t.isActive();if("active"===r&&!e)return!1;if("inactive"===r&&e)return!1}return!("boolean"==typeof i&&t.isStale()!==i||a&&a!==t.state.fetchStatus||o&&!o(t))}function H(e,t){const{exact:r,status:n,predicate:a,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(W(t.options.mutationKey)!==W(o))return!1}else if(!G(t.options.mutationKey,o))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function Q(e,t){return(t?.queryKeyHashFn||W)(e)}function W(e){return JSON.stringify(e,((e,t)=>X(t)?Object.keys(t).sort().reduce(((e,r)=>(e[r]=t[r],e)),{}):t))}function G(e,t){return e===t||typeof e==typeof t&&!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every((r=>G(e[r],t[r])))}function Z(e,t){if(e===t)return e;const r=J(e)&&J(t);if(r||X(e)&&X(t)){const n=r?e:Object.keys(e),a=n.length,o=r?t:Object.keys(t),s=o.length,i=r?[]:{};let l=0;for(let a=0;a<s;a++){const s=r?a:o[a];(!r&&n.includes(s)||r)&&void 0===e[s]&&void 0===t[s]?(i[s]=void 0,l++):(i[s]=Z(e[s],t[s]),i[s]===e[s]&&void 0!==e[s]&&l++)}return a===s&&l===a?e:i}return t}function Y(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function J(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function X(e){if(!ee(e))return!1;const t=e.constructor;if(void 0===t)return!0;const r=t.prototype;return!!ee(r)&&!!r.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype}function ee(e){return"[object Object]"===Object.prototype.toString.call(e)}function te(e,t,r){return"function"==typeof r.structuralSharing?r.structuralSharing(e,t):!1!==r.structuralSharing?Z(e,t):t}function re(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function ne(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var ae=Symbol();function oe(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==ae?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function se(e,t){return"function"==typeof e?e(...t):!!e}var ie=new class extends ${#e;#t;#r;constructor(){super(),this.#r=e=>{if(!q&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e((e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach((t=>{t(e)}))}isFocused(){return"boolean"==typeof this.#e?this.#e:"hidden"!==globalThis.document?.visibilityState}},le=e=>setTimeout(e,0),ce=function(){let e=[],t=0,r=e=>{e()},n=e=>{e()},a=le;const o=n=>{t?e.push(n):a((()=>{r(n)}))};return{batch:o=>{let s;t++;try{s=o()}finally{t--,t||(()=>{const t=e;e=[],t.length&&a((()=>{n((()=>{t.forEach((e=>{r(e)}))}))}))})()}return s},batchCalls:e=>(...t)=>{o((()=>{e(...t)}))},schedule:o,setNotifyFunction:e=>{r=e},setBatchNotifyFunction:e=>{n=e},setScheduler:e=>{a=e}}}(),ue=new class extends ${#n=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!q&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#n!==e&&(this.#n=e,this.listeners.forEach((t=>{t(e)})))}isOnline(){return this.#n}};function de(){let e,t;const r=new Promise(((r,n)=>{e=r,t=n}));function n(e){Object.assign(r,e),delete r.resolve,delete r.reject}return r.status="pending",r.catch((()=>{})),r.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},r.reject=e=>{n({status:"rejected",reason:e}),t(e)},r}function he(e){return Math.min(1e3*2**e,3e4)}function pe(e){return"online"!==(e??"online")||ue.isOnline()}var ge=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function me(e){return e instanceof ge}function be(e){let t,r=!1,n=0,a=!1;const o=de(),s=()=>ie.isFocused()&&("always"===e.networkMode||ue.isOnline())&&e.canRun(),i=()=>pe(e.networkMode)&&e.canRun(),l=r=>{a||(a=!0,e.onSuccess?.(r),t?.(),o.resolve(r))},c=r=>{a||(a=!0,e.onError?.(r),t?.(),o.reject(r))},u=()=>new Promise((r=>{t=e=>{(a||s())&&r(e)},e.onPause?.()})).then((()=>{t=void 0,a||e.onContinue?.()})),d=()=>{if(a)return;let t;const o=0===n?e.initialPromise:void 0;try{t=o??e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(l).catch((t=>{if(a)return;const o=e.retry??(q?0:3),i=e.retryDelay??he,l="function"==typeof i?i(n,t):i,h=!0===o||"number"==typeof o&&n<o||"function"==typeof o&&o(n,t);var p;!r&&h?(n++,e.onFail?.(n,t),(p=l,new Promise((e=>{setTimeout(e,p)}))).then((()=>s()?void 0:u())).then((()=>{r?c(t):d()}))):c(t)}))};return{promise:o,cancel:t=>{a||(c(new ge(t)),e.abort?.())},continue:()=>(t?.(),o),cancelRetry:()=>{r=!0},continueRetry:()=>{r=!1},canStart:i,start:()=>(i()?d():u().then(d),o)}}var fe=class{#a;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),V(this.gcTime)&&(this.#a=setTimeout((()=>{this.optionalRemove()}),this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(q?1/0:3e5))}clearGcTimeout(){this.#a&&(clearTimeout(this.#a),this.#a=void 0)}},ye=class extends fe{#o;#s;#i;#l;#c;#u;#d;constructor(e){super(),this.#d=!1,this.#u=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#l=e.client,this.#i=this.#l.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#o=function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,r=void 0!==t,n=r?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}(this.options),this.state=e.state??this.#o,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#c?.promise}setOptions(e){this.options={...this.#u,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#i.remove(this)}setData(e,t){const r=te(this.state.data,e,this.options);return this.#h({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#h({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#c?.promise;return this.#c?.cancel(e),t?t.then(L).catch(L):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#o)}isActive(){return this.observers.some((e=>!1!==K(e.options.enabled,this)))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ae||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some((e=>e.getCurrentResult().isStale)):void 0===this.state.data)}isStaleByTime(e=0){return this.state.isInvalidated||void 0===this.state.data||!z(this.state.dataUpdatedAt,e)}onFocus(){const e=this.observers.find((e=>e.shouldFetchOnWindowFocus()));e?.refetch({cancelRefetch:!1}),this.#c?.continue()}onOnline(){const e=this.observers.find((e=>e.shouldFetchOnReconnect()));e?.refetch({cancelRefetch:!1}),this.#c?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#i.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter((t=>t!==e)),this.observers.length||(this.#c&&(this.#d?this.#c.cancel({revert:!0}):this.#c.cancelRetry()),this.scheduleGc()),this.#i.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#h({type:"invalidate"})}fetch(e,t){if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#c)return this.#c.continueRetry(),this.#c.promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find((e=>e.options.queryFn));e&&this.setOptions(e.options)}const r=new AbortController,n=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#d=!0,r.signal)})},a={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#l,state:this.state,fetchFn:()=>{const e=oe(this.options,t),r={client:this.#l,queryKey:this.queryKey,meta:this.meta};return n(r),this.#d=!1,this.options.persister?this.options.persister(e,r,this):e(r)}};n(a),this.options.behavior?.onFetch(a,this),this.#s=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===a.fetchOptions?.meta||this.#h({type:"fetch",meta:a.fetchOptions?.meta});const o=e=>{me(e)&&e.silent||this.#h({type:"error",error:e}),me(e)||(this.#i.config.onError?.(e,this),this.#i.config.onSettled?.(this.state.data,e,this)),this.scheduleGc()};return this.#c=be({initialPromise:t?.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:e=>{if(void 0!==e){try{this.setData(e)}catch(e){return void o(e)}this.#i.config.onSuccess?.(e,this),this.#i.config.onSettled?.(e,this.state.error,this),this.scheduleGc()}else o(new Error(`${this.queryHash} data is undefined`))},onError:o,onFail:(e,t)=>{this.#h({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#h({type:"pause"})},onContinue:()=>{this.#h({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}),this.#c.start()}#h(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...ve(t.data,this.options),fetchMeta:e.meta??null};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return me(r)&&r.revert&&this.#s?{...this.#s,fetchStatus:"idle"}:{...t,error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),ce.batch((()=>{this.observers.forEach((e=>{e.onQueryUpdate()})),this.#i.notify({query:this,type:"updated",action:e})}))}};function ve(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:pe(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}var _e=class extends ${constructor(e,t){super(),this.options=t,this.#l=e,this.#p=null,this.#g=de(),this.options.experimental_prefetchInRender||this.#g.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#l;#m=void 0;#b=void 0;#f=void 0;#y;#v;#g;#p;#_;#w;#E;#k;#C;#x;#S=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#m.addObserver(this),we(this.#m,this.options)?this.#I():this.updateResult(),this.#O())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ee(this.#m,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ee(this.#m,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#N(),this.#R(),this.#m.removeObserver(this)}setOptions(e){const t=this.options,r=this.#m;if(this.options=this.#l.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof K(this.options.enabled,this.#m))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#T(),this.#m.setOptions(this.options),t._defaulted&&!Y(this.options,t)&&this.#l.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#m,observer:this});const n=this.hasListeners();n&&ke(this.#m,r,this.options,t)&&this.#I(),this.updateResult(),!n||this.#m===r&&K(this.options.enabled,this.#m)===K(t.enabled,this.#m)&&U(this.options.staleTime,this.#m)===U(t.staleTime,this.#m)||this.#P();const a=this.#M();!n||this.#m===r&&K(this.options.enabled,this.#m)===K(t.enabled,this.#m)&&a===this.#x||this.#D(a)}getOptimisticResult(e){const t=this.#l.getQueryCache().build(this.#l,e),r=this.createResult(t,e);return n=r,!Y(this.getCurrentResult(),n)&&(this.#f=r,this.#v=this.options,this.#y=this.#m.state),r;var n}getCurrentResult(){return this.#f}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),Reflect.get(e,r))})}trackProp(e){this.#S.add(e)}getCurrentQuery(){return this.#m}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#l.defaultQueryOptions(e),r=this.#l.getQueryCache().build(this.#l,t);return r.fetch().then((()=>this.createResult(r,t)))}fetch(e){return this.#I({...e,cancelRefetch:e.cancelRefetch??!0}).then((()=>(this.updateResult(),this.#f)))}#I(e){this.#T();let t=this.#m.fetch(this.options,e);return e?.throwOnError||(t=t.catch(L)),t}#P(){this.#N();const e=U(this.options.staleTime,this.#m);if(q||this.#f.isStale||!V(e))return;const t=z(this.#f.dataUpdatedAt,e)+1;this.#k=setTimeout((()=>{this.#f.isStale||this.updateResult()}),t)}#M(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#m):this.options.refetchInterval)??!1}#D(e){this.#R(),this.#x=e,!q&&!1!==K(this.options.enabled,this.#m)&&V(this.#x)&&0!==this.#x&&(this.#C=setInterval((()=>{(this.options.refetchIntervalInBackground||ie.isFocused())&&this.#I()}),this.#x))}#O(){this.#P(),this.#D(this.#M())}#N(){this.#k&&(clearTimeout(this.#k),this.#k=void 0)}#R(){this.#C&&(clearInterval(this.#C),this.#C=void 0)}createResult(e,t){const r=this.#m,n=this.options,a=this.#f,o=this.#y,s=this.#v,i=e!==r?e.state:this.#b,{state:l}=e;let c,u={...l},d=!1;if(t._optimisticResults){const a=this.hasListeners(),o=!a&&we(e,t),s=a&&ke(e,r,t,n);(o||s)&&(u={...u,...ve(l.data,e.options)}),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:h,errorUpdatedAt:p,status:g}=u;c=u.data;let m=!1;if(void 0!==t.placeholderData&&void 0===c&&"pending"===g){let e;a?.isPlaceholderData&&t.placeholderData===s?.placeholderData?(e=a.data,m=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#E?.state.data,this.#E):t.placeholderData,void 0!==e&&(g="success",c=te(a?.data,e,t),d=!0)}if(t.select&&void 0!==c&&!m)if(a&&c===o?.data&&t.select===this.#_)c=this.#w;else try{this.#_=t.select,c=t.select(c),c=te(a?.data,c,t),this.#w=c,this.#p=null}catch(e){this.#p=e}this.#p&&(h=this.#p,c=this.#w,p=Date.now(),g="error");const b="fetching"===u.fetchStatus,f="pending"===g,y="error"===g,v=f&&b,_=void 0!==c,w={status:g,fetchStatus:u.fetchStatus,isPending:f,isSuccess:"success"===g,isError:y,isInitialLoading:v,isLoading:v,data:c,dataUpdatedAt:u.dataUpdatedAt,error:h,errorUpdatedAt:p,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>i.dataUpdateCount||u.errorUpdateCount>i.errorUpdateCount,isFetching:b,isRefetching:b&&!f,isLoadingError:y&&!_,isPaused:"paused"===u.fetchStatus,isPlaceholderData:d,isRefetchError:y&&_,isStale:Ce(e,t),refetch:this.refetch,promise:this.#g};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===w.status?e.reject(w.error):void 0!==w.data&&e.resolve(w.data)},n=()=>{const e=this.#g=w.promise=de();t(e)},a=this.#g;switch(a.status){case"pending":e.queryHash===r.queryHash&&t(a);break;case"fulfilled":"error"!==w.status&&w.data===a.value||n();break;case"rejected":"error"===w.status&&w.error===a.reason||n()}}return w}updateResult(){const e=this.#f,t=this.createResult(this.#m,this.options);this.#y=this.#m.state,this.#v=this.options,void 0!==this.#y.data&&(this.#E=this.#m),Y(t,e)||(this.#f=t,this.#A({listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#S.size)return!0;const n=new Set(r??this.#S);return this.options.throwOnError&&n.add("error"),Object.keys(this.#f).some((t=>{const r=t;return this.#f[r]!==e[r]&&n.has(r)}))})()}))}#T(){const e=this.#l.getQueryCache().build(this.#l,this.options);if(e===this.#m)return;const t=this.#m;this.#m=e,this.#b=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#O()}#A(e){ce.batch((()=>{e.listeners&&this.listeners.forEach((e=>{e(this.#f)})),this.#l.getQueryCache().notify({query:this.#m,type:"observerResultsUpdated"})}))}};function we(e,t){return function(e,t){return!1!==K(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&Ee(e,t,t.refetchOnMount)}function Ee(e,t,r){if(!1!==K(t.enabled,e)){const n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&Ce(e,t)}return!1}function ke(e,t,r,n){return(e!==t||!1===K(n.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&Ce(e,r)}function Ce(e,t){return!1!==K(t.enabled,e)&&e.isStaleByTime(U(t.staleTime,e))}var xe=i.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),Se=i.createContext(!1),Ie=(Se.Provider,(e,t,r)=>t.fetchOptimistic(e).catch((()=>{r.clearReset()})));function Oe(e,t){return function(e,t,r){const n=T(r),a=i.useContext(Se),o=i.useContext(xe),s=n.defaultQueryOptions(e);n.getDefaultOptions().queries?._experimental_beforeQuery?.(s),s._optimisticResults=a?"isRestoring":"optimistic",(e=>{const t=e.staleTime;e.suspense&&(e.staleTime="function"==typeof t?(...e)=>Math.max(t(...e),1e3):Math.max(t??1e3,1e3),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3)))})(s),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(s,o),(e=>{i.useEffect((()=>{e.clearReset()}),[e])})(o);const l=!n.getQueryCache().get(s.queryHash),[c]=i.useState((()=>new t(n,s))),u=c.getOptimisticResult(s),d=!a&&!1!==e.subscribed;if(i.useSyncExternalStore(i.useCallback((e=>{const t=d?c.subscribe(ce.batchCalls(e)):L;return c.updateResult(),t}),[c,d]),(()=>c.getCurrentResult()),(()=>c.getCurrentResult())),i.useEffect((()=>{c.setOptions(s)}),[s,c]),((e,t)=>e?.suspense&&t.isPending)(s,u))throw Ie(s,c,o);if((({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&void 0===e.data||se(r,[e.error,n])))({result:u,errorResetBoundary:o,throwOnError:s.throwOnError,query:n.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw u.error;if(n.getDefaultOptions().queries?._experimental_afterQuery?.(s,u),s.experimental_prefetchInRender&&!q&&((e,t)=>e.isLoading&&e.isFetching&&!t)(u,a)){const e=l?Ie(s,c,o):n.getQueryCache().get(s.queryHash)?.promise;e?.catch(L).finally((()=>{c.updateResult()}))}return s.notifyOnChangeProps?u:c.trackResult(u)}(e,_e,t)}var Ne=class extends fe{#B;#F;#c;constructor(e){super(),this.mutationId=e.mutationId,this.#F=e.mutationCache,this.#B=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#B.includes(e)||(this.#B.push(e),this.clearGcTimeout(),this.#F.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#B=this.#B.filter((t=>t!==e)),this.scheduleGc(),this.#F.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#B.length||("pending"===this.state.status?this.scheduleGc():this.#F.remove(this))}continue(){return this.#c?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#h({type:"continue"})};this.#c=be({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{this.#h({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#h({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#F.canRun(this)});const r="pending"===this.state.status,n=!this.#c.canStart();try{if(r)t();else{this.#h({type:"pending",variables:e,isPaused:n}),await(this.#F.config.onMutate?.(e,this));const t=await(this.options.onMutate?.(e));t!==this.state.context&&this.#h({type:"pending",context:t,variables:e,isPaused:n})}const a=await this.#c.start();return await(this.#F.config.onSuccess?.(a,e,this.state.context,this)),await(this.options.onSuccess?.(a,e,this.state.context)),await(this.#F.config.onSettled?.(a,null,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(a,null,e,this.state.context)),this.#h({type:"success",data:a}),a}catch(t){try{throw await(this.#F.config.onError?.(t,e,this.state.context,this)),await(this.options.onError?.(t,e,this.state.context)),await(this.#F.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(void 0,t,e,this.state.context)),t}finally{this.#h({type:"error",error:t})}}finally{this.#F.runNext(this)}}#h(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),ce.batch((()=>{this.#B.forEach((t=>{t.onMutationUpdate(e)})),this.#F.notify({mutation:this,type:"updated",action:e})}))}},Re=class extends ${#l;#f=void 0;#$;#q;constructor(e,t){super(),this.#l=e,this.setOptions(t),this.bindMethods(),this.#L()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#l.defaultMutationOptions(e),Y(this.options,t)||this.#l.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#$,observer:this}),t?.mutationKey&&this.options.mutationKey&&W(t.mutationKey)!==W(this.options.mutationKey)?this.reset():"pending"===this.#$?.state.status&&this.#$.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#$?.removeObserver(this)}onMutationUpdate(e){this.#L(),this.#A(e)}getCurrentResult(){return this.#f}reset(){this.#$?.removeObserver(this),this.#$=void 0,this.#L(),this.#A()}mutate(e,t){return this.#q=t,this.#$?.removeObserver(this),this.#$=this.#l.getMutationCache().build(this.#l,this.options),this.#$.addObserver(this),this.#$.execute(e)}#L(){const e=this.#$?.state??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};this.#f={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#A(e){ce.batch((()=>{if(this.#q&&this.hasListeners()){const t=this.#f.variables,r=this.#f.context;"success"===e?.type?(this.#q.onSuccess?.(e.data,t,r),this.#q.onSettled?.(e.data,null,t,r)):"error"===e?.type&&(this.#q.onError?.(e.error,t,r),this.#q.onSettled?.(void 0,e.error,t,r))}this.listeners.forEach((e=>{e(this.#f)}))}))}};function Te(e,t){const r=T(t),[n]=i.useState((()=>new Re(r,e)));i.useEffect((()=>{n.setOptions(e)}),[n,e]);const a=i.useSyncExternalStore(i.useCallback((e=>n.subscribe(ce.batchCalls(e))),[n]),(()=>n.getCurrentResult()),(()=>n.getCurrentResult())),o=i.useCallback(((e,t)=>{n.mutate(e,t).catch(L)}),[n]);if(a.error&&se(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}const Pe=window.wp.apiFetch;var Me=r.n(Pe),De=class extends ${constructor(e={}){super(),this.config=e,this.#V=new Map}#V;build(e,t,r){const n=t.queryKey,a=t.queryHash??Q(n,t);let o=this.get(a);return o||(o=new ye({client:e,queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(o)),o}add(e){this.#V.has(e.queryHash)||(this.#V.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#V.get(e.queryHash);t&&(e.destroy(),t===e&&this.#V.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ce.batch((()=>{this.getAll().forEach((e=>{this.remove(e)}))}))}get(e){return this.#V.get(e)}getAll(){return[...this.#V.values()]}find(e){const t={exact:!0,...e};return this.getAll().find((e=>j(t,e)))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter((t=>j(e,t))):t}notify(e){ce.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}onFocus(){ce.batch((()=>{this.getAll().forEach((e=>{e.onFocus()}))}))}onOnline(){ce.batch((()=>{this.getAll().forEach((e=>{e.onOnline()}))}))}},Ae=class extends ${constructor(e={}){super(),this.config=e,this.#z=new Set,this.#U=new Map,this.#K=0}#z;#U;#K;build(e,t,r){const n=new Ne({mutationCache:this,mutationId:++this.#K,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#z.add(e);const t=Be(e);if("string"==typeof t){const r=this.#U.get(t);r?r.push(e):this.#U.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#z.delete(e)){const t=Be(e);if("string"==typeof t){const r=this.#U.get(t);if(r)if(r.length>1){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}else r[0]===e&&this.#U.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Be(e);if("string"==typeof t){const r=this.#U.get(t),n=r?.find((e=>"pending"===e.state.status));return!n||n===e}return!0}runNext(e){const t=Be(e);if("string"==typeof t){const r=this.#U.get(t)?.find((t=>t!==e&&t.state.isPaused));return r?.continue()??Promise.resolve()}return Promise.resolve()}clear(){ce.batch((()=>{this.#z.forEach((e=>{this.notify({type:"removed",mutation:e})})),this.#z.clear(),this.#U.clear()}))}getAll(){return Array.from(this.#z)}find(e){const t={exact:!0,...e};return this.getAll().find((e=>H(t,e)))}findAll(e={}){return this.getAll().filter((t=>H(e,t)))}notify(e){ce.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}resumePausedMutations(){const e=this.getAll().filter((e=>e.state.isPaused));return ce.batch((()=>Promise.all(e.map((e=>e.continue().catch(L))))))}};function Be(e){return e.options.scope?.id}function Fe(e){return{onFetch:(t,r)=>{const n=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],s=t.state.data?.pageParams||[];let i={pages:[],pageParams:[]},l=0;const c=async()=>{let r=!1;const c=oe(t.options,t.fetchOptions),u=async(e,n,a)=>{if(r)return Promise.reject();if(null==n&&e.pages.length)return Promise.resolve(e);const o={client:t.client,queryKey:t.queryKey,pageParam:n,direction:a?"backward":"forward",meta:t.options.meta};var s;s=o,Object.defineProperty(s,"signal",{enumerable:!0,get:()=>(t.signal.aborted?r=!0:t.signal.addEventListener("abort",(()=>{r=!0})),t.signal)});const i=await c(o),{maxPages:l}=t.options,u=a?ne:re;return{pages:u(e.pages,i,l),pageParams:u(e.pageParams,n,l)}};if(a&&o.length){const e="backward"===a,t={pages:o,pageParams:s},r=(e?qe:$e)(n,t);i=await u(t,r,e)}else{const t=e??o.length;do{const e=0===l?s[0]??n.initialPageParam:$e(n,i);if(l>0&&null==e)break;i=await u(i,e),l++}while(l<t)}return i};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=c}}}function $e(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function qe(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var Le=class{#j;#F;#u;#H;#Q;#W;#G;#Z;constructor(e={}){this.#j=e.queryCache||new De,this.#F=e.mutationCache||new Ae,this.#u=e.defaultOptions||{},this.#H=new Map,this.#Q=new Map,this.#W=0}mount(){this.#W++,1===this.#W&&(this.#G=ie.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#j.onFocus())})),this.#Z=ue.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#j.onOnline())})))}unmount(){this.#W--,0===this.#W&&(this.#G?.(),this.#G=void 0,this.#Z?.(),this.#Z=void 0)}isFetching(e){return this.#j.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#F.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#j.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#j.build(this,t),n=r.state.data;return void 0===n?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(U(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#j.findAll(e).map((({queryKey:e,state:t})=>[e,t.data]))}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=this.#j.get(n.queryHash),o=a?.state.data,s=function(e,t){return"function"==typeof e?e(t):e}(t,o);if(void 0!==s)return this.#j.build(this,n).setData(s,{...r,manual:!0})}setQueriesData(e,t,r){return ce.batch((()=>this.#j.findAll(e).map((({queryKey:e})=>[e,this.setQueryData(e,t,r)]))))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#j.get(t.queryHash)?.state}removeQueries(e){const t=this.#j;ce.batch((()=>{t.findAll(e).forEach((e=>{t.remove(e)}))}))}resetQueries(e,t){const r=this.#j;return ce.batch((()=>(r.findAll(e).forEach((e=>{e.reset()})),this.refetchQueries({type:"active",...e},t))))}cancelQueries(e,t={}){const r={revert:!0,...t},n=ce.batch((()=>this.#j.findAll(e).map((e=>e.cancel(r)))));return Promise.all(n).then(L).catch(L)}invalidateQueries(e,t={}){return ce.batch((()=>(this.#j.findAll(e).forEach((e=>{e.invalidate()})),"none"===e?.refetchType?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=ce.batch((()=>this.#j.findAll(e).filter((e=>!e.isDisabled())).map((e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(L)),"paused"===e.state.fetchStatus?Promise.resolve():t}))));return Promise.all(n).then(L)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const r=this.#j.build(this,t);return r.isStaleByTime(U(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(L).catch(L)}fetchInfiniteQuery(e){return e.behavior=Fe(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(L).catch(L)}ensureInfiniteQueryData(e){return e.behavior=Fe(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ue.isOnline()?this.#F.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#j}getMutationCache(){return this.#F}getDefaultOptions(){return this.#u}setDefaultOptions(e){this.#u=e}setQueryDefaults(e,t){this.#H.set(W(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#H.values()],r={};return t.forEach((t=>{G(e,t.queryKey)&&Object.assign(r,t.defaultOptions)})),r}setMutationDefaults(e,t){this.#Q.set(W(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#Q.values()],r={};return t.forEach((t=>{G(e,t.mutationKey)&&Object.assign(r,t.defaultOptions)})),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#u.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Q(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ae&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#u.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#j.clear(),this.#F.clear()}};let Ve=null;function ze(){return Ve||(Ve=new Le({defaultOptions:{queries:{staleTime:3e5,cacheTime:6e5,retry:1,refetchOnWindowFocus:!0}}})),Ve}function Ue(){const e=ze();if(e.invalidateQueries({queryKey:["conditions"]}),e.invalidateQueries({queryKey:["condition"]}),window.dispatchEvent(new CustomEvent("gb-invalidate-conditions")),window.parent&&window.parent!==window)try{window.parent.postMessage({type:"gb_invalidate_conditions"},"*")}catch(e){}}function Ke({status:e="publish",perPage:t=200,page:r=1,category:n=""}={}){return Oe({queryKey:["overlays",{status:e,perPage:t,page:r,category:n}],queryFn:async()=>{const a=new URLSearchParams({per_page:t,page:r,_fields:"id,title,trigger_info,status,date,modified,admin_edit_url,gblocks_overlay_cat,overlay_type,display_condition,display_condition_invert",orderby:"date",order:"desc"});"any"===e?a.append("status","publish,draft,pending,private,future"):a.append("status",e),n&&a.append("gblocks_overlay_cat",n);const o=await Me()({path:`/wp/v2/gblocks_overlay?${a.toString()}`,parse:!1});return{overlays:await o.json(),totalPages:parseInt(o.headers.get("X-WP-TotalPages")||"1",10),totalItems:parseInt(o.headers.get("X-WP-Total")||"0",10)}},staleTime:12e4,cacheTime:3e5})}"undefined"!=typeof window&&(window.addEventListener("gb-invalidate-conditions",(()=>{ze().invalidateQueries({queryKey:["conditions"]})})),window.addEventListener("message",(e=>{"gb_invalidate_conditions"===e.data?.type&&ze().invalidateQueries({queryKey:["conditions"]})})),window.addEventListener("gb-overlay-saved-global",(e=>{const t=ze();t.invalidateQueries({queryKey:["overlays"]}),e.detail?.overlayId&&t.invalidateQueries({queryKey:["overlay",e.detail.overlayId]})})));const je=(0,g.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(m.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})),He=(0,g.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(m.Path,{d:"M14.5 13.8c-1.1 0-2.1.7-2.4 1.8H4V17h8.1c.3 1 1.3 1.8 2.4 1.8s2.1-.7 2.4-1.8H20v-1.5h-3.1c-.3-1-1.3-1.7-2.4-1.7zM11.9 7c-.3-1-1.3-1.8-2.4-1.8S7.4 6 7.1 7H4v1.5h3.1c.3 1 1.3 1.8 2.4 1.8s2.1-.7 2.4-1.8H20V7h-8.1z"})),Qe=(0,g.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(m.Path,{d:"M20.2 8v11c0 .7-.6 1.2-1.2 1.2H6v1.5h13c1.5 0 2.7-1.2 2.7-2.8V8zM18 16.4V4.6c0-.9-.7-1.6-1.6-1.6H4.6C3.7 3 3 3.7 3 4.6v11.8c0 .9.7 1.6 1.6 1.6h11.8c.9 0 1.6-.7 1.6-1.6zm-13.5 0V4.6c0-.1.1-.1.1-.1h11.8c.1 0 .1.1.1.1v11.8c0 .1-.1.1-.1.1H4.6l-.1-.1z"})),We=(0,g.createElement)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,g.createElement)(m.Path,{d:"M19 6.2h-5.9l-.6-1.1c-.3-.7-1-1.1-1.8-1.1H5c-1.1 0-2 .9-2 2v11.8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V8.2c0-1.1-.9-2-2-2zm.5 11.6c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h5.8c.2 0 .4.1.4.3l1 2H19c.3 0 .5.2.5.5v9.5zM8 12.8h8v-1.5H8v1.5zm0 3h8v-1.5H8v1.5z"})),Ge=(0,g.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(m.Path,{d:"M20 5h-5.7c0-1.3-1-2.3-2.3-2.3S9.7 3.7 9.7 5H4v2h1.5v.3l1.7 11.1c.1 1 1 1.7 2 1.7h5.7c1 0 1.8-.7 2-1.7l1.7-11.1V7H20V5zm-3.2 2l-1.7 11.1c0 .1-.1.2-.3.2H9.1c-.1 0-.3-.1-.3-.2L7.2 7h9.6z"})),Ze=window.gbp.components;function Ye(e=100,t=1){return Oe({queryKey:["conditions",{perPage:e,page:t}],queryFn:()=>async function({perPage:e=100,page:t=1}){const r=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/conditions/?page=${t}&per_page=${e}`});if(r.success)return r.response;throw new Error("Failed to fetch conditions")}({perPage:e,page:t}),select:e=>({conditions:e?.conditions||[],total:e?.total||0,pages:e?.pages||1})})}function Je(){const e=Oe({queryKey:["condition-metadata","types"],queryFn:async()=>{const e=await Me()({path:"/generateblocks-pro/advanced-conditions/v1/get_condition_types"});if(e.success)return e.response;throw new Error("Failed to fetch condition types")},staleTime:6e5}),t=(0,g.useCallback)((async e=>{if(!e)return[];const t=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/get_condition_rules?type=${e}`});if(t.success)return t.response;throw new Error("Failed to fetch condition rules")}),[]),r=(0,g.useCallback)((async(e,t)=>{if(!e||!t)return[];const r=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/get_condition_operators?type=${e}&rule=${t}`});if(r.success)return r.response;throw new Error("Failed to fetch condition operators")}),[]);return{conditionTypes:e.data||{},loading:e.isLoading,error:e.error,getRulesForType:t,getOperatorsForType:r}}function Xe({onSelectKey:e,overlays:t,refreshKey:r,isIframeMode:n=!1,onOverlaySelect:a=null}){const o=function(){const e=ze();return Te({mutationFn:async e=>{const t=await Me()({path:`/wp/v2/gblocks_overlay/${e}`,method:"DELETE",data:{force:!0}});if(!t||!t.deleted)throw console.error("Delete failed - invalid response:",t),new Error("Failed to delete overlay panel");return t},onSuccess:(t,r)=>{e.removeQueries({queryKey:["overlay",r]}),e.invalidateQueries({queryKey:["overlays"]})},onError:e=>{console.error("Delete overlay panel mutation error:",e)}})}(),s=function(){const e=ze();return Te({mutationFn:async({id:e,status:t})=>Me()({path:`/wp/v2/gblocks_overlay/${e}`,method:"POST",data:{status:t}}),onSuccess:t=>{e.invalidateQueries({queryKey:["overlay",t.id]}),e.invalidateQueries({queryKey:["overlays"]})}})}(),l=function(){const e=ze();return Te({mutationFn:async e=>{const t=await Me()({path:`/wp/v2/gblocks_overlay/${e}?context=edit`});return await Me()({path:"/wp/v2/gblocks_overlay",method:"POST",data:{title:t.title.raw+" (Copy)",content:t.content.raw,status:"draft",meta:t.meta,gblocks_overlay_cat:t.gblocks_overlay_cat}})},onSuccess:()=>{e.invalidateQueries({queryKey:["overlays"]})},onError:e=>{console.error("Duplicate overlay panel mutation error:",e)}})}(),[c,u]=(0,g.useState)(null),[d,m]=(0,g.useState)([]),[f,y]=(0,g.useState)({}),{data:v,isLoading:_}=Ye(100,1),w=ze();(0,g.useEffect)((()=>{Me()({path:"/wp/v2/overlay-categories?per_page=100"}).then((e=>{m(e)})).catch((e=>{console.error("Error loading categories:",e)}))}),[r]),(0,g.useEffect)((()=>{if(v?.conditions){const e={};v.conditions.forEach((t=>{let r="";"object"==typeof t.title&&t.title?.rendered?r=t.title.rendered:"string"==typeof t.title&&(r=t.title),e[t.id]=r})),y(e)}}),[v]);const E=(0,g.useMemo)((()=>[{id:"name",header:(0,h.__)("Name","generateblocks-pro"),accessorKey:"title.rendered",cell:e=>{const{admin_edit_url:t,id:r,title:o,status:s}=e.row.original;let l="";"object"==typeof o&&null!==o?"object"==typeof o.rendered&&void 0!==o.rendered?.rendered?l=o.rendered.rendered:void 0!==o.rendered&&(l=o.rendered):"string"==typeof o&&(l=o),l&&""!==l.trim()||(l=(0,h.__)("(Untitled)","generateblocks-pro"));const c="draft"===s;return n&&a?(0,i.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},(0,i.createElement)(p.Button,{variant:"link",onClick:()=>a(r,l),style:{textDecoration:"none",padding:0,minHeight:"auto"}},(0,O.decodeEntities)(l)),c&&(0,i.createElement)("span",{style:{color:"#999",fontSize:"0.9em"}},"(",(0,h.__)("draft","generateblocks-pro"),")")):(0,i.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},(0,i.createElement)("a",{href:t},(0,O.decodeEntities)(l)),c&&(0,i.createElement)("span",{style:{color:"#999",fontSize:"0.9em"}},"(",(0,h.__)("draft","generateblocks-pro"),")"))}},{id:"type",header:(0,h.__)("Overlay Panel Type","generateblocks-pro"),accessorKey:"overlay_type",cell:e=>{const t=e.getValue()||"standard",r={standard:(0,h.__)("Standard","generateblocks-pro"),anchored:(0,h.__)("Anchored","generateblocks-pro"),"mega-menu":(0,h.__)("Mega Menu","generateblocks-pro")};return(0,i.createElement)("span",{className:"gb-modal-type"},r[t]||t)}},{id:"category",header:(0,h.__)("Category","generateblocks-pro"),accessorKey:"gblocks_overlay_cat",cell:e=>{const t=e.getValue()||[],r=t.length>0?t[0]:null;if(!r)return(0,i.createElement)("span",{className:"gb-condition-category gb-condition-category--uncategorized"},(0,h.__)("Uncategorized","generateblocks-pro"));const n=d.find((e=>e.id===r)),a=n?n.name:"";return a?(0,i.createElement)("span",{className:"gb-condition-category"},a):(0,i.createElement)("span",{className:"gb-condition-category gb-condition-category--uncategorized"},(0,h.__)("Uncategorized","generateblocks-pro"))}},{id:"condition",header:(0,h.__)("Display Condition","generateblocks-pro"),accessorKey:"display_condition",cell:e=>{const t=e.getValue(),r=e.row.original.display_condition_invert;if(!t)return(0,i.createElement)("span",{className:"gb-modal-condition gb-modal-condition--everywhere"},(0,h.__)("Display Everywhere","generateblocks-pro"));if(_)return(0,i.createElement)("span",{className:"gb-modal-condition gb-modal-condition--loading"},(0,i.createElement)(p.Spinner,null));const a=f[t]||(0,h.__)("Unknown Condition","generateblocks-pro"),o=`${window.location.origin}/wp-admin/admin.php?page=generateblocks-conditions&edit=${t}`;if(n){const e=r?`${(0,h.__)("NOT","generateblocks-pro")}: ${a}`:a;return(0,i.createElement)("span",{className:"gb-modal-condition"},e)}return r?(0,i.createElement)("span",{className:"gb-modal-condition"},(0,h.__)("NOT","generateblocks-pro"),": ",(0,i.createElement)("a",{href:o},a)):(0,i.createElement)("span",{className:"gb-modal-condition"},(0,i.createElement)("a",{href:o},a))}},{id:"actions",header:null,cell:e=>{const{id:t,admin_edit_url:r,status:o}=e.row.original;return(0,i.createElement)("div",{className:"gb-cloud-public-keys__actions"},(0,i.createElement)(p.DropdownMenu,{icon:je,label:(0,h.__)("More options","generateblocks-pro"),popoverProps:{placement:"left"}},(({onClose:c})=>(0,i.createElement)(i.Fragment,null,(0,i.createElement)(p.MenuGroup,null,(0,i.createElement)(p.MenuItem,{onClick:()=>{if(n&&a){const{title:r}=e.row.original;let n="";"object"==typeof r&&null!==r?"object"==typeof r.rendered&&void 0!==r.rendered?.rendered?n=r.rendered.rendered:void 0!==r.rendered&&(n=r.rendered):"string"==typeof r&&(n=r),n&&""!==n.trim()||(n=(0,h.__)("(Untitled)","generateblocks-pro")),a(t,n)}else window.location.href=r;c()},icon:He},(0,h.__)("Edit Overlay Panel","generateblocks-pro")),(0,i.createElement)(p.MenuItem,{onClick:()=>{l.mutateAsync(t).then((e=>{if(w.invalidateQueries({queryKey:["overlays"]}),e?.id){const t=`${window.location.origin}/wp-admin/post.php?post=${e.id}&action=edit`;window.location.href=t}})),c()},icon:Qe},(0,h.__)("Duplicate","generateblocks-pro")),(0,i.createElement)(p.MenuItem,{onClick:()=>{const e="publish"===o?"draft":"publish";s.mutateAsync({id:t,status:e}).then((()=>{w.invalidateQueries({queryKey:["overlays"]})})),c()},icon:"publish"===o?We:b},"publish"===o?(0,h.__)("Set as Draft","generateblocks-pro"):(0,h.__)("Publish","generateblocks-pro")),(0,i.createElement)(p.MenuItem,{isDestructive:!0,onClick:()=>{u(t),c()},icon:Ge},(0,h.__)("Delete Overlay Panel","generateblocks-pro")))))))}}]),[e,n,a,d,f,_]);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"gb-dashboard-table-wrapper"},t.length?(0,i.createElement)(Ze.Table,{className:"gb-dashboard-table table-view-list",columns:E,data:t,"aria-labelledby":"modals-table-header"}):(0,i.createElement)("div",{className:"gb-modals-empty-state"},(0,i.createElement)("p",null,(0,h.__)("No overlay panels found.","generateblocks-pro")))),!!c&&(0,i.createElement)(p.Modal,{title:(0,h.__)("Confirm","generateblocks-pro"),isDismissible:!1,onRequestClose:()=>null,className:"gb-modal-name-input"},(0,i.createElement)("div",{className:"gb-modal-input-container"},(0,h.__)("This will permanently delete this overlay panel. You cannot undo this action.","generateblocks-pro")),(0,i.createElement)(p.Button,{variant:"primary",onClick:async()=>{try{await o.mutateAsync(c),w.invalidateQueries({queryKey:["overlays"]}),u(null)}catch(e){console.error("Error deleting overlay:",e),u(null)}}},(0,h.__)("OK","generateblocks-pro")),(0,i.createElement)(p.Button,{variant:"tertiary",onClick:()=>u(null)},(0,h.__)("Cancel","generateblocks-pro"))))}const et=(0,g.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(m.Path,{d:"M18 11.2h-5.2V6h-1.6v5.2H6v1.6h5.2V18h1.6v-5.2H18z"})),tt=(0,g.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(m.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"}));function rt({category:e,updateCategory:t,saving:r}){const[n,a]=(0,g.useState)(!1),[o,s]=(0,g.useState)(e.name),[l,c]=(0,g.useState)(!1),u=async()=>{c(!0),await t(e.id,o),c(!1),a(!1)},d=()=>{a(!1),s(e.name)};return n&&!e.isUncategorized?(0,i.createElement)("div",{className:"gb-edit-taxonomy-form"},(0,i.createElement)(p.TextControl,{value:o,onChange:s,disabled:l||r,onKeyDown:e=>{"Enter"===e.key?u():"Escape"===e.key&&d()},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,i.createElement)("div",{className:"gb-edit-actions"},(0,i.createElement)(p.Button,{variant:"primary",size:"small",onClick:u,disabled:!o.trim()||l||r,isBusy:l||r,__next40pxDefaultSize:!0},(0,h.__)("Save","generateblocks-pro")),(0,i.createElement)(p.Button,{variant:"secondary",size:"small",onClick:d,disabled:l||r,__next40pxDefaultSize:!0},(0,h.__)("Cancel","generateblocks-pro")))):(0,i.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},(0,i.createElement)("strong",{className:e.isUncategorized?"gb-uncategorized-label":""},e.name),!e.isUncategorized&&(0,i.createElement)(p.Button,{icon:tt,size:"small",onClick:()=>{a(!0),s(e.name)},label:(0,h.__)("Edit category name","generateblocks-pro"),style:{visibility:"hidden"},className:"gb-taxonomy-edit-button"}))}function nt({taxonomyConfig:e={slug:"",restBase:"",labels:{singular:"Category",plural:"Categories",uncategorized:"Uncategorized",itemsCount:"items"}},itemsEndpoint:t,itemsTaxonomyField:r,manageEndpoint:n,onNavigateBack:a,onTaxonomyChange:o}){const[s,l]=(0,g.useState)([]),[c,u]=(0,g.useState)(!1),[d,m]=(0,g.useState)(!1),[b,f]=(0,g.useState)(null),[y,v]=(0,g.useState)(""),{labels:_={},restBase:w}=e;(0,g.useEffect)((()=>{E()}),[]);const E=async()=>{u(!0),f(null);try{const e=[Me()({path:`/wp/v2/${w}`})];t&&e.push(Me()({path:`${t}?per_page=100`}));const n=await Promise.all(e),a=n[0],o=n[1];if(a){let e=[...a];if(o?.success&&r){const t=(o.response?.[Object.keys(o.response)[0]]||[]).filter((e=>!e[r]||0===e[r].length)).length;e=[{id:"uncategorized",name:_.uncategorized||(0,h.__)("Uncategorized","generateblocks-pro"),slug:"",count:t,isUncategorized:!0},...a]}l(e)}}catch(e){f((0,h.__)("Failed to load categories.","generateblocks-pro"))}finally{u(!1)}},k=async()=>{if(y.trim()){m(!0),f(null);try{const e=y.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-");(await Me()({path:n,method:"POST",data:{name:y.trim(),slug:e}})).success&&(await E(),v(""),o&&o())}catch(e){f((0,h.__)("Failed to create category.","generateblocks-pro"))}finally{m(!1)}}},C=async(e,t)=>{if(t.trim()){m(!0),f(null);try{(await Me()({path:`${n}/${e}`,method:"POST",data:{name:t.trim()}})).success&&(await E(),o&&o())}catch(e){f((0,h.__)("Failed to update category.","generateblocks-pro"))}finally{m(!1)}}},x=async e=>{const t=_.singular?.toLowerCase()||"category",r=(0,h.sprintf)(/* translators: %1$s: singular taxonomy label, %2$s: singular taxonomy label */ /* translators: %1$s: singular taxonomy label, %2$s: singular taxonomy label */
(0,h.__)("Are you sure you want to delete this %1$s? Items using this %2$s will become uncategorized.","generateblocks-pro"),t,t);if(confirm(r)){m(!0),f(null);try{(await Me()({path:`${n}/${e}`,method:"DELETE"})).success&&(await E(),o&&o())}catch(e){f((0,h.__)("Failed to delete category.","generateblocks-pro"))}finally{m(!1)}}},S=(0,g.useMemo)((()=>[{id:"name",header:(0,h.sprintf)(/* translators: %s: singular taxonomy label */ /* translators: %s: singular taxonomy label */
(0,h.__)("%s Name","generateblocks-pro"),_.singular||"Category"),accessorKey:"name",cell:e=>{const t=e.row.original;return(0,i.createElement)(rt,{category:t,updateCategory:C,saving:d})}},{id:"items",header:_.itemsCount?_.itemsCount.charAt(0).toUpperCase()+_.itemsCount.slice(1):(0,h.__)("Items","generateblocks-pro"),cell:e=>`${e.row.original.count||0} ${_.itemsCount||"items"}`},{id:"actions",header:(0,h.__)("Actions","generateblocks-pro"),cell:e=>{const t=e.row.original;return t.isUncategorized?(0,i.createElement)("span",{className:"gb-uncategorized-actions"},(0,h.__)("Built-in","generateblocks-pro")):(0,i.createElement)(p.DropdownMenu,{icon:je,label:(0,h.sprintf)(/* translators: %s: singular taxonomy label */ /* translators: %s: singular taxonomy label */
(0,h.__)("%s actions","generateblocks-pro"),_.singular||"Category"),className:"gb-taxonomy-actions",popoverProps:{placement:"left"}},(({onClose:e})=>(0,i.createElement)(p.MenuGroup,null,(0,i.createElement)(p.MenuItem,{icon:Ge,onClick:()=>{x(t.id),e()},isDestructive:!0},(0,h.sprintf)(/* translators: %s: singular taxonomy label */ /* translators: %s: singular taxonomy label */
(0,h.__)("Delete %s","generateblocks-pro"),_.singular||"Category")))))}}]),[_,C,x,d]);return(0,i.createElement)("div",{className:"gb-taxonomy-manager"},(0,i.createElement)("div",{className:"gb-taxonomy-manager-header"},(0,i.createElement)("div",{className:"gb-taxonomy-title-section"},(0,i.createElement)("h2",null,(0,h.sprintf)(/* translators: %s: plural taxonomy label */ /* translators: %s: plural taxonomy label */
(0,h.__)("Manage %s","generateblocks-pro"),_.plural||"Categories"))),(0,i.createElement)("div",{className:"gb-taxonomy-header-actions"},(0,i.createElement)(p.Button,{variant:"secondary",onClick:()=>{a()},disabled:d},(0,h.__)("Back","generateblocks-pro")))),(0,i.createElement)("div",{className:"gb-taxonomy-content"},!!b&&(0,i.createElement)(p.Notice,{status:"error",isDismissible:!1,className:"gb-taxonomy-error-notice"},b),(0,i.createElement)("div",{className:"gb-create-taxonomy-section"},(0,i.createElement)("h3",null,(0,h.sprintf)(/* translators: %s: singular taxonomy label */ /* translators: %s: singular taxonomy label */
(0,h.__)("Create New %s","generateblocks-pro"),_.singular||"Category")),(0,i.createElement)("div",{className:"gb-create-taxonomy-form"},(0,i.createElement)(p.TextControl,{label:(0,h.sprintf)(/* translators: %s: singular taxonomy label */ /* translators: %s: singular taxonomy label */
(0,h.__)("%s Name","generateblocks-pro"),_.singular||"Category"),value:y,onChange:v,placeholder:(0,h.sprintf)(/* translators: %s: singular taxonomy label */ /* translators: %s: singular taxonomy label */
(0,h.__)("Enter %s name","generateblocks-pro"),_.singular?.toLowerCase()||"category"),disabled:d,onKeyDown:e=>{"Enter"===e.key&&k()},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,i.createElement)(p.Button,{variant:"primary",icon:et,onClick:k,disabled:!y.trim()||d,isBusy:d,__next40pxDefaultSize:!0},(0,h.sprintf)(/* translators: %s: singular taxonomy label */ /* translators: %s: singular taxonomy label */
(0,h.__)("Create %s","generateblocks-pro"),_.singular||"Category")))),(0,i.createElement)("div",{className:"gb-taxonomy-list-section"},(0,i.createElement)("h3",null,(0,h.sprintf)(/* translators: %s: plural taxonomy label */ /* translators: %s: plural taxonomy label */
(0,h.__)("Existing %s","generateblocks-pro"),_.plural||"Categories")),c?(0,i.createElement)("div",{className:"gb-taxonomy-loading"},(0,i.createElement)(p.Spinner,null),(0,i.createElement)("span",null,(0,h.sprintf)(/* translators: %s: plural taxonomy label */ /* translators: %s: plural taxonomy label */
(0,h.__)("Loading %s","generateblocks-pro"),_.plural?.toLowerCase()||"categories"))):(0,i.createElement)("div",{className:"gb-dashboard-table-wrapper"},0===s.length?(0,i.createElement)("p",{style:{marginTop:"0"}},(0,h.sprintf)(/* translators: %s: plural taxonomy label */ /* translators: %s: plural taxonomy label */
(0,h.__)("No %s created yet.","generateblocks-pro"),_.plural?.toLowerCase()||"categories")):(0,i.createElement)(Ze.Table,{className:"gb-dashboard-table table-view-list",columns:S,data:s,"aria-labelledby":"taxonomy-table-header"})))))}const at={taxonomyConfig:{slug:"gblocks_overlay_cat",restBase:"overlay-categories",labels:{singular:(0,h.__)("Category","generateblocks-pro"),plural:(0,h.__)("Categories","generateblocks-pro"),uncategorized:(0,h.__)("Uncategorized","generateblocks-pro"),itemsCount:"overlay panels"}},itemsEndpoint:"/generateblocks-pro/overlays/v1/overlays",itemsTaxonomyField:"gblocks_overlay_cat",manageEndpoint:"/generateblocks-pro/overlays/v1/manage_category"};function ot({onNavigateBack:e,onCategoriesChange:t}){return(0,i.createElement)("div",{className:"gb-categories-manager"},(0,i.createElement)(nt,{...at,onNavigateBack:e,onTaxonomyChange:t}))}function st({isIframeMode:e=!1,onOverlaySelect:t=null,onCreateOverlay:r=null}){const[n,a]=(0,g.useState)("list"),[o,s]=(0,g.useState)(0),[l,c]=(0,g.useState)((()=>{const e=new URLSearchParams(window.location.search);return parseInt(e.get("overlayPage")||"1",10)})),{data:u,isLoading:d,isError:m}=Ke({status:"any",perPage:20,page:l}),b=u?.overlays||[],f=u?.totalPages||1,y=(0,g.useMemo)((()=>b&&b.length>0?b.map((e=>{const t=e.title?.rendered||e.title||"Untitled";return{...e,title:{...e.title,rendered:t}}})):[]),[b]);(0,g.useEffect)((()=>{const e=new URL(window.location);e.searchParams.set("overlayPage",l),window.history.replaceState({},"",e)}),[l]),(0,g.useEffect)((()=>{if(e)return;const t=new URLSearchParams(window.location.search).get("categories");a(t?"categories":"list")}),[e]);const v=t=>{if(e)return;const r=new URL(window.location);"categories"===t?r.searchParams.set("categories","true"):r.searchParams.delete("categories"),window.history.pushState({},"",r)},_=e=>{c(e)};if(d)return(0,i.createElement)("div",{className:"gb-cloud"},(0,i.createElement)(p.Spinner,null));if(m)return(0,i.createElement)("div",{className:"gb-cloud"},(0,i.createElement)("p",null,(0,h.__)("Error loading overlay panels. Please try again.","generateblocks-pro")));const w={list:(0,i.createElement)("div",{className:"gb-dashboard-admin"},(0,i.createElement)("div",{className:"gb-dashboard-admin__header"},(0,i.createElement)("div",{className:"gb-dashboard-admin__header-buttons"},e&&r?(0,i.createElement)("div",{style:{display:"flex"}},(0,i.createElement)(p.Button,{variant:"primary",onClick:()=>{r("new")},style:{borderTopRightRadius:0,borderBottomRightRadius:0}},(0,h.__)("Add New","generateblocks-pro")),(0,i.createElement)(p.DropdownMenu,{icon:F,label:(0,h.__)("Select overlay panel type","generateblocks-pro"),popoverProps:{placement:"bottom-end"},toggleProps:{variant:"primary",style:{borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"1px solid rgba(255,255,255,0.1)"},iconSize:18}},(({onClose:e})=>(0,i.createElement)(p.MenuGroup,null,(0,i.createElement)(p.MenuItem,{onClick:()=>{e(),r("new","standard")}},(0,h.__)("Standard","generateblocks-pro")),(0,i.createElement)(p.MenuItem,{onClick:()=>{e(),r("new","anchored")}},(0,h.__)("Anchored","generateblocks-pro")),(0,i.createElement)(p.MenuItem,{onClick:()=>{e(),r("new","mega-menu")}},(0,h.__)("Mega Menu","generateblocks-pro")))))):(0,i.createElement)("div",{style:{display:"flex"}},(0,i.createElement)(p.Button,{variant:"primary",href:gbOverlaysDashboard.newOverlayUrl,style:{borderTopRightRadius:0,borderBottomRightRadius:0}},(0,h.__)("Add New","generateblocks-pro")),(0,i.createElement)(p.DropdownMenu,{icon:F,label:(0,h.__)("Select overlay panel type","generateblocks-pro"),popoverProps:{placement:"bottom-end"},toggleProps:{variant:"primary",style:{borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"1px solid rgba(255,255,255,0.1)"},iconSize:18}},(({onClose:e})=>(0,i.createElement)(p.MenuGroup,null,(0,i.createElement)(p.MenuItem,{onClick:()=>{e(),window.location.href=gbOverlaysDashboard.newOverlayUrl+"&overlay_type=standard"}},(0,h.__)("Standard","generateblocks-pro")),(0,i.createElement)(p.MenuItem,{onClick:()=>{e(),window.location.href=gbOverlaysDashboard.newOverlayUrl+"&overlay_type=anchored"}},(0,h.__)("Anchored","generateblocks-pro")),(0,i.createElement)(p.MenuItem,{onClick:()=>{e(),window.location.href=gbOverlaysDashboard.newOverlayUrl+"&overlay_type=mega-menu"}},(0,h.__)("Mega Menu","generateblocks-pro"))))))),(0,i.createElement)("div",{className:"gb-dashboard-admin__header-buttons-right"},(0,i.createElement)(p.Button,{variant:"secondary",onClick:()=>{a("categories"),v("categories")}},(0,h.__)("Manage Categories","generateblocks-pro")))),(0,i.createElement)("div",{className:"gb-dashboard-admin__inner"},(0,i.createElement)(Xe,{overlays:y,refreshKey:o,isIframeMode:e,onOverlaySelect:t}),f>1&&(0,i.createElement)("div",{className:"gb-dashboard__pagination"},(0,i.createElement)(p.Button,{disabled:1===l,onClick:()=>_(l-1),variant:"secondary"},(0,h.__)("Previous","generateblocks-pro")),(0,i.createElement)("span",null,(0,h.sprintf)(
// translators: %1$s: current page, %2$s: total pages
// translators: %1$s: current page, %2$s: total pages
(0,h.__)("Page %1$s of %2$s","generateblocks-pro"),l,f)),(0,i.createElement)(p.Button,{disabled:l===f,onClick:()=>_(l+1),variant:"secondary"},(0,h.__)("Next","generateblocks-pro"))))),categories:(0,i.createElement)("div",{className:"gb-dashboard-admin"},(0,i.createElement)(ot,{onNavigateBack:()=>{a("list"),v("list")},onCategoriesChange:()=>{s((e=>e+1))}}))};return(0,i.createElement)(A,{currentView:n,views:w,viewOrder:["list","categories"],className:"gb-modals-dashboard",minHeight:400})}const it=function(e){return(0,i.createElement)(P,{client:ze()},(0,i.createElement)(st,{...e}))};function lt({overlayId:e,overlayTitle:t,overlayType:r,onClose:n,embedded:a=!1,onUnsavedChanges:o=null}){const[s,l]=(0,g.useState)(!0),[c,u]=(0,g.useState)(!1),d=(0,g.useRef)(null);(0,g.useEffect)((()=>{a&&o&&o(c)}),[c,a,o]);const m=a?"&gb_embedded_overlay=1":"",b=r?`&overlay_type=${r}`:"",f="new"===e?`${window.location.origin}/wp-admin/post-new.php?post_type=gblocks_overlay&gb_overlay_context=1${m}${b}`:`${window.location.origin}/wp-admin/post.php?post=${e}&action=edit&gb_overlay_context=1${m}`,y=()=>{l(!1);const e=e=>{e.origin===window.location.origin&&("gb_unsaved_changes"===e.data.type?u(e.data.hasChanges):"gb_close_overlay"===e.data.type?n():"gb_overlay_saved"===e.data.type?function(){const e=ze();e.invalidateQueries({queryKey:["overlays"]}),e.invalidateQueries({queryKey:["overlay"]})}():e.data.type)};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},v=()=>{try{if(d.current?.contentWindow){const e=d.current.contentWindow.document.querySelector("#gb-overlay-close-btn");if(e)return void e.click()}}catch(e){}c&&!window.confirm((0,h.__)("You have unsaved changes. Are you sure you want to close?","generateblocks-pro"))||n()};return a?(0,i.createElement)("div",{className:"gb-modal-container gb-modal-embedded"},s&&(0,i.createElement)("div",{className:"gb-modal-loading"},(0,i.createElement)("div",{className:"gb-loading-content"},(0,i.createElement)("div",{className:"gb-loading-title"},(0,h.__)("Loading editor","generateblocks-pro")),(0,i.createElement)("div",{className:"gb-loading-subtitle"},(0,h.__)("Please wait while the overlay panel editor loads","generateblocks-pro")))),(0,i.createElement)("div",{className:"gb-modal-iframe-container "+(s?"gb-modal-iframe-hidden":"gb-modal-iframe-visible")},(0,i.createElement)("iframe",{ref:d,src:f,onLoad:y,title:(0,h.__)("Overlay Panel Editor","generateblocks-pro")}))):(0,i.createElement)(p.Modal,{title:"",onRequestClose:v,isDismissible:!1,shouldCloseOnClickOutside:!1,isFullScreen:!0,className:"gb-enterprise-modal-editor"},(0,i.createElement)("div",{className:"gb-modal-container"},(0,i.createElement)("div",{className:"gb-modal-header"},(0,i.createElement)("div",{className:"gb-modal-header-content"},(0,i.createElement)("div",{className:"gb-modal-header-left"},(0,i.createElement)("h3",{className:"gb-modal-title"},(0,h.__)("Edit Overlay Panel:","generateblocks-pro")," ",t),(0,i.createElement)("p",{className:"gb-modal-subtitle"},(0,h.__)("Changes are saved automatically in the editor below","generateblocks-pro"))),(0,i.createElement)("div",{className:"gb-modal-actions"},c&&(0,i.createElement)("div",{className:"gb-unsaved-indicator"},(0,h.__)("Unsaved changes","generateblocks-pro")),(0,i.createElement)(p.Button,{icon:M,size:"compact",variant:"tertiary",onClick:()=>{const t=r?`&overlay_type=${r}`:"",a="new"===e?`${window.location.origin}/wp-admin/post-new.php?post_type=gblocks_overlay${t}`:`${window.location.origin}/wp-admin/post.php?post=${e}&action=edit`;window.open(a,"_blank"),n()},label:(0,h.__)("Open in new tab","generateblocks-pro")}),(0,i.createElement)(p.Button,{icon:D,size:"compact",variant:"primary",onClick:v},(0,h.__)("Done","generateblocks-pro"))))),s&&(0,i.createElement)("div",{className:"gb-modal-loading"},(0,i.createElement)("div",{className:"gb-loading-content"},(0,i.createElement)("div",{className:"gb-loading-title"},(0,h.__)("Loading editor","generateblocks-pro")),(0,i.createElement)("div",{className:"gb-loading-subtitle"},(0,h.__)("Please wait while the overlay panel editor loads","generateblocks-pro")))),(0,i.createElement)("div",{className:"gb-modal-iframe-container "+(s?"gb-modal-iframe-hidden":"gb-modal-iframe-visible")},(0,i.createElement)("iframe",{ref:d,src:f,onLoad:y,title:(0,h.__)("Overlay Panel Editor","generateblocks-pro")}))))}function ct({trigger:e,overlayId:t=null,onOverlaySelect:r=null,modalProps:n={}}){if((()=>{try{return"1"===new URLSearchParams(window.location.search).get("gb_overlay_context")||window!==window.top}catch(e){return!0}})())return e?(0,i.createElement)("div",{title:(0,h.__)("The Overlay Panel editor is already open.","generateblocks-pro")},(0,i.createElement)("div",{style:{opacity:.5,pointerEvents:"none",cursor:"not-allowed"}},e)):null;const a={backButton:(0,h.__)("Back to Overlay Panels","generateblocks-pro"),createNew:(0,h.__)("Create New Overlay Panel","generateblocks-pro"),edit:(0,h.__)("Edit Overlay Panel","generateblocks-pro"),dashboard:(0,h.__)("Overlay Panels","generateblocks-pro")},o=(0,i.createElement)(it,null),s=(0,i.createElement)(lt,{showBackButton:!0});return(0,i.createElement)(B,{trigger:e,itemId:t,itemType:"overlay",dashboardView:o,editorView:s,modalProps:n,labels:a,className:"gb-modal-dashboard-fullscreen",getNewTabUrl:(e,t)=>{if("new"===e){const e=t?.overlayType?`&overlay_type=${t.overlayType}`:"";return`${window.location.origin}/wp-admin/post-new.php?post_type=gblocks_overlay${e}`}return`${window.location.origin}/wp-admin/post.php?post=${e}&action=edit`},onItemSelect:r})}function ut({label:e,help:t,value:r="",onChange:n,options:a=[],emptyLabel:o=(0,h.__)("None","generateblocks-pro"),className:s="",disabled:l=!1,editButton:c=null,emptyMessage:u="",uncategorizedLabel:d=(0,h.__)("Uncategorized","generateblocks-pro")}){const[m]=(0,g.useState)((()=>`gb-select-control-${Math.random().toString(36).substr(2,9)}`)),b=a&&"object"==typeof a&&!Array.isArray(a),f=b?Object.keys(a).length>0:a.length>0;return(0,i.createElement)(p.BaseControl,{id:m,label:e,help:t,htmlFor:m,className:`gb-select-group-control ${s}`,__nextHasNoMarginBottom:!0},(0,i.createElement)("div",{className:"gb-select-group-control__container"},(0,i.createElement)(p.SelectControl,{id:m,className:"gb-select-group-control__select",value:r,onChange:e=>n(e),disabled:l,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0},(0,i.createElement)("option",{value:""},o),b?Object.entries(a).map((([e,t])=>{const r="uncategorized"===e?t:t.items||[],n="uncategorized"===e?d:t.label;return"uncategorized"===e&&1===Object.keys(a).length?r.map((e=>(0,i.createElement)("option",{key:e.value,value:e.value},e.label))):(0,i.createElement)("optgroup",{key:e,label:n},r.map((e=>(0,i.createElement)("option",{key:e.value,value:e.value},e.label))))})):a.map((e=>(0,i.createElement)("option",{key:e.value,value:e.value},e.label)))),c&&("object"==typeof c&&c.show?(0,i.createElement)(p.Button,{variant:"tertiary",icon:c.icon,onClick:c.onClick,label:c.label||(0,h.__)("Edit","generateblocks-pro"),__next40pxDefaultSize:!0}):c)),!f&&u&&(0,i.createElement)("p",{className:"gb-select-group-control__empty"},u))}function dt({attributes:e,setAttributes:t,label:r=(0,h.__)("Overlay Panel Trigger","generateblocks-pro"),help:n=(0,h.__)("Select an overlay panel to trigger or close overlay panels.","generateblocks-pro")}){const{data:a,isLoading:o}=Ke({status:"any"}),{data:s=[],isLoading:l}=Oe({queryKey:["overlay-categories"],queryFn:async()=>Me()({path:"/wp/v2/overlay-categories?per_page=100"}),staleTime:3e5,cacheTime:6e5}),c=o||l,[u,d]=(0,g.useState)({}),m=(0,g.useCallback)((()=>{const t=e.htmlAttributes||{};return void 0!==t["data-gb-overlay-close"]?"close":t["data-gb-overlay"]||""}),[e.htmlAttributes]);(0,g.useEffect)((()=>{if(!c&&a?.overlays){const r=m();if(r&&r.startsWith("gb-overlay-")){const n=r.replace("gb-overlay-","");a.overlays.filter((e=>e.trigger_info?.is_interactive)).some((e=>e.id.toString()===n))||setTimeout((()=>{const r={...e.htmlAttributes||{}};delete r["data-gb-overlay"],t({htmlAttributes:r})}),0)}}}),[m,a?.overlays,c,e.htmlAttributes,t]),(0,g.useEffect)((()=>{if(!c&&a?.overlays&&s){const e=a.overlays.filter((e=>e.trigger_info?.is_interactive)),t={},r=e.filter((e=>!e.gblocks_overlay_cat||0===e.gblocks_overlay_cat.length));r.length>0&&(t.uncategorized=r.map((e=>{let t=(0,h.__)("Untitled","generateblocks-pro");return"string"==typeof e.title?t=e.title:e.title?.rendered&&(t=e.title.rendered),"draft"===e.status&&(t=(0,h.__)("[Draft]","generateblocks-pro")+" "+t),{value:`gb-overlay-${e.id}`,label:(0,O.decodeEntities)(t)}}))),s.forEach((r=>{const n=e.filter((e=>e.gblocks_overlay_cat?.includes(r.id)));n.length>0&&(t[r.slug]={label:r.name,items:n.map((e=>{let t=(0,h.__)("Untitled","generateblocks-pro");return"string"==typeof e.title?t=e.title:e.title?.rendered&&(t=e.title.rendered),"draft"===e.status&&(t=(0,h.__)("[Draft]","generateblocks-pro")+" "+t),{value:`gb-overlay-${e.id}`,label:(0,O.decodeEntities)(t)}}))})})),t._close={label:(0,h.__)("Actions","generateblocks-pro"),items:[{value:"close",label:(0,h.__)("Close Opened Overlay Panel","generateblocks-pro")}]},d(t)}}),[a?.overlays,s,c]);const b=(0,g.useCallback)((r=>{const n={...e.htmlAttributes||{}};delete n["data-gb-overlay"],delete n["data-gb-overlay-close"],"close"===r?n["data-gb-overlay-close"]="":""!==r&&(n["data-gb-overlay"]=r),t({htmlAttributes:n})}),[e.htmlAttributes,t]),f=Object.keys(u).some((e=>"uncategorized"===e?u[e].length>0:u[e].items.length>0)),y=(()=>{const e=m();return e&&e.startsWith("gb-overlay-")?e.replace("gb-overlay-",""):null})(),v=y&&"close"!==y,_=!v&&"close"!==m();let w=null;v?w=(0,i.createElement)(ct,{trigger:(0,i.createElement)(p.Button,{variant:"tertiary",icon:tt}),overlayId:y}):_&&(w=(0,i.createElement)(ct,{trigger:(0,i.createElement)(p.Button,{variant:"tertiary",icon:et}),overlayId:"new"}));const E=c?[]:u;return(0,i.createElement)(ut,{label:r,help:n,value:m(),onChange:b,options:E,emptyLabel:c?(0,h.__)("Loading overlay panels","generateblocks-pro"):(0,h.__)("None","generateblocks-pro"),editButton:w,emptyMessage:f||c?"":(0,h.__)("No overlay panels found. Create your first overlay panel to get started.","generateblocks-pro"),disabled:c})}function ht(e){return(0,i.createElement)(P,{client:ze()},(0,i.createElement)(dt,{...e}))}const pt=["generateblocks/button-container","generateblocks/button","generateblocks/container","generateblocks/headline","generateblocks/image","generateblocks/grid","generateblocks/query-loop"],gt=["generateblocks/query-no-results","generateblocks-pro/classic-menu","generateblocks-pro/classic-menu-item","generateblocks-pro/classic-sub-menu"],mt=(0,u.createHigherOrderComponent)((e=>t=>{const{isSelected:r,attributes:n,setAttributes:a}=t,{htmlAttributes:o}=n,s=t.name.startsWith("generateblocks")&&!gt.includes(t.name)&&!pt.includes(t.name);return r&&s?(0,i.createElement)(i.Fragment,null,(0,i.createElement)(e,{...t}),(0,i.createElement)(d.InspectorAdvancedControls,null,(0,i.createElement)(ht,{attributes:n,setAttributes:a}),(0,i.createElement)(I,{items:o,onAdd:e=>a({htmlAttributes:e}),onRemove:e=>a({htmlAttributes:e}),onChange:e=>a({htmlAttributes:e})}))):(0,i.createElement)(e,{...t})}),"withHtmlAttributesControl");(0,c.addFilter)("editor.BlockEdit","generateblocks-pro/html-attributes/add-control",mt),(0,c.addFilter)("generateblocks.blockSettings.afterImageUrlControls","generateblocks-pro/add-image-link-attributes-control",(function(e,t){const{attributes:r,setAttributes:n}=t,{linkHtmlAttributes:a,tagName:o}=r;return a?.href&&"img"===o?(0,i.createElement)(i.Fragment,null,e,(0,i.createElement)(ht,{attributes:r,setAttributes:n}),(0,i.createElement)(I,{label:(0,h.__)("Link Attributes","generateblocks"),items:a,onAdd:e=>n({linkHtmlAttributes:e}),onRemove:e=>n({linkHtmlAttributes:e}),onChange:e=>n({linkHtmlAttributes:e})})):e}));const bt=window.gbp.blockStyles,ft=(0,g.createElement)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,g.createElement)(m.Path,{d:"M12 4c-4.4 0-8 3.6-8 8v.1c0 4.1 3.2 7.5 7.2 7.9h.8c4.4 0 8-3.6 8-8s-3.6-8-8-8zm0 15V5c3.9 0 7 3.1 7 7s-3.1 7-7 7z"}));function yt({styles:t={},onPaste:r,clientId:n,onClear:a}){const{updateBlockAttributes:o}=(0,e.useDispatch)("core/block-editor"),{getMultiSelectedBlockClientIds:s,hasMultiSelection:l}=(0,e.useSelect)("core/block-editor"),c="generateblocksLocalStyles",u=JSON.parse(sessionStorage.getItem(c)),d=(0,g.useMemo)((()=>Object.keys(t).length),[t]);return d||u?(0,i.createElement)(p.ToolbarGroup,{isCollapsed:!0,icon:ft,label:(0,h.__)("Styles","generateblocks-pro"),controls:[{title:(0,h.__)("Copy Styles","generateblocks-pro"),onClick:()=>{sessionStorage.setItem(c,JSON.stringify(t))},isDisabled:l()||!d},{title:(0,h.__)("Paste Styles","generateblocks-pro"),onClick:()=>{const e=JSON.parse(sessionStorage.getItem(c));e&&r(e)},isDisabled:!u},{title:(0,h.__)("Clear Styles","generateblocks-pro"),onClick:()=>{if(window.confirm(l()?(0,h.__)("This will remove all styling from these blocks.","generateblocks-pro"):(0,h.__)("This will remove all styling from this block.","generateblocks-pro"))){const e=l()?s():[n],t={};e.forEach((e=>{t[e]={styles:{}}})),o(e,t,!0),a&&a()}},isDisabled:!d}]}):null}const vt=["generateblocks/query-no-results"],_t=(0,u.createHigherOrderComponent)((e=>r=>{const{name:n,attributes:a,clientId:o}=r,{styles:s}=a,l=(0,bt.useSetStyles)(r,{cleanStylesObject:t.cleanStylesObject});return!n.startsWith("generateblocks")||vt.includes(r.name)||pt.includes(r.name)?(0,i.createElement)(e,{...r}):(0,i.createElement)(i.Fragment,null,(0,i.createElement)(e,{...r}),(0,i.createElement)(d.BlockControls,null,(0,i.createElement)(yt,{styles:s,clientId:o,onPaste:l})))}),"withCopyStylesToolbar");(0,c.addFilter)("editor.BlockEdit","generateblocks-pro/copy-paste-styles",_t);const wt=window.wp.plugins;(0,e.createReduxStore)("gbp-current-style",{reducer:t.currentStyleReducer,actions:t.currentStyleActions,selectors:t.currentStyleSelectors}),(0,e.createReduxStore)("gbp-styles",{reducer:t.styleReducer,actions:t.styleActions,selectors:t.styleSelectors}),(0,e.createReduxStore)("gbp-styles-at-rule",{reducer:t.atRuleReducer,actions:t.atRuleActions,selectors:t.atRuleSelectors}),(0,e.createReduxStore)("gbp-styles-nested-rule",{reducer:t.nestedRuleReducer,actions:t.nestedRuleActions,selectors:t.nestedRuleSelectors}),window.wp.notices;const Et=window.wp.url;function kt(){return(0,e.useSelect)((()=>{const t=(0,Et.getPath)(window.location.href)?.includes("site-editor.php"),r=(0,e.select)(t?"core/edit-site":"core/editor");return{getSettings:t?r.getSettings:r.getEditorSettings}}),[])}function Ct(){const t=(0,Et.getPath)(window.location.href)?.includes("site-editor.php"),r=(0,e.useDispatch)(t?"core/edit-site":"core/editor");return{updateSettings:t?r.updateSettings:r.updateEditorSettings}}function xt(){const{updateSettings:e}=Ct(),{getSettings:t}=kt();return async(r,n="")=>{if(!n){const e=await Me()({path:(0,Et.addQueryArgs)("/generateblocks-pro/v1/global-classes/get_css",{selector:r}),method:"GET"});!0===e.success&&(n=e.response.data.toString())}const a=t(),o=a?.styles?.find((e=>"gb_class:"+r===e.source));e(o?{...a,styles:a?.styles.map((e=>"gb_class:"+r!==e.source?e:{...e,css:n}))}:{...a,styles:[...a?.styles,{css:n,source:"gb_class:"+r}]})}}const St=window.wp.coreData;window.lodash,"undefined"!=typeof gbGlobalStylePermissions&&gbGlobalStylePermissions,window.wp.editPost,(0,wt.registerPlugin)("generateblocks-pro-update-style-selectors",{render:function(){const{getSettings:e}=kt(),{updateSettings:t}=Ct(),r=e(),{styles:n}=r;return(0,g.useEffect)((()=>{if(!Array.isArray(n))return;const e=n.filter((e=>e.source?.startsWith("gb_class:")||"generateblocks-pro/class-menu-style"===e.source)).map((e=>{const t=(0,d.transformStyles)([{css:e.css}],".editor-styles-wrapper")?.[0];return t?{css:t,source:e.source}:null})).filter(Boolean);e.length>0&&t({...r,styles:r.styles.map((t=>{const r=e.find((e=>e.source===t.source));return r?{...t,css:r.css}:t}))})}),[]),null}}),(0,c.addFilter)("generateblocks.editor.SelectMetaKeys.options","generateblocks-pro/dynamic-tags/post-meta",(function(e,{post:t,term:r,user:n,type:a}){var o,s,i;const l="1"===generateBlocksPro?.isACFActive,c=!t&&!r&&!n&&"option"!==a,u=function(e=!0){const[t,r]=(0,g.useState)([]);return(0,g.useEffect)((()=>{e?(async()=>{try{const e=await Me()({path:"/generateblocks-pro/v1/get-acf-option-fields",method:"GET"});r(e)}catch(e){console.error("Failed to fetch ACF option fields:",e),r([])}})():r([])}),[e]),t}(l&&"option"===a&&!c);if(c||!l)return e;let d={};switch(a){case"post":d=null!==(o=t?.acf)&&void 0!==o?o:{};break;case"term":d=null!==(s=r?.acf)&&void 0!==s?s:{};break;case"author":case"user":d=null!==(i=n?.acf)&&void 0!==i?i:{};break;case"option":d=u;break;default:return e}const p=Object.keys(d);if(0===p.length)return e;const m=function(e){const t=[],r=e.sort(((e,t)=>e.localeCompare(t))),n=[];r.forEach((e=>{r.forEach((t=>{const r=new RegExp(`^${e}_\\d_`,"gi");t!==e&&t.startsWith(e)&&t.match(r)&&n.push(t)}))}));const a=[];return r.filter((e=>!t.includes(e)&&!n.includes(e))).forEach((e=>{a.push({label:e,value:e})})),a}(p);return[...e,{id:"acf",label:(0,h.__)("ACF Fields","generateblocks-pro"),items:m}]})),(0,c.addFilter)("generateblocks.editor.SelectMetaKeys.keys","generateblocks-pro/dynamic-tags/acf",(function(e,t){const{acf:r={}}=t,n=Object.keys(r);return e.filter((e=>!n.includes(e.value)))})),(0,c.addFilter)("generateblocks.dynamicTags.sourceOptions","generateblocks-pro/dynamicTags/set-adjacent-post-options",(function(e,{dynamicTagType:t}){return"post"!==t&&"author"!==t||(e.push({value:"next-post",label:(0,h.__)("Next Post","generateblocks-pro")}),e.push({value:"previous-post",label:(0,h.__)("Previous Post","generateblocks-pro")})),e})),(0,c.addFilter)("generateblocks.dynamicTags.sourcesInOptions","generateblocks-pro/dynamicTags/set-adjacent-sources-in-options",(function(e){return e.push("next-post"),e.push("previous-post"),e}));const It=window.wp.editor;function Ot({value:e,setParameter:t}){return(0,i.createElement)(p.TextControl,{label:(0,h.__)("Per Page","generateblocks-pro"),value:e,onChange:e=>t("posts_per_page",e),type:"number",min:-1})}function Nt({value:e,setParameter:t}){return(0,i.createElement)(p.TextControl,{label:(0,h.__)("Offset","generateblocks-pro"),value:e,onChange:e=>t("offset",e),type:"number",min:0,help:(0,h.__)("Offset is ignored if per_page is set to -1.","generateblocks")})}(0,c.addFilter)("generateblocks.editor.query.queryTypes","generateblocks-pro/query/addTypes",(function(e){return[...e,{label:(0,h.__)("Post Meta","generateblocks-pro"),value:"post_meta",help:(0,h.__)("Loop over post meta array value.","generateblocks-pro")},{label:(0,h.__)("Option","generateblocks-pro"),value:"option",help:(0,h.__)("Loop over option array value.","generateblocks-pro")}]})),(0,c.addFilter)("generateblocks.editor.query.inspectorControls","generateblocks-pro/query/inspector-controls",(function(t,r){var n;const{queryType:a,queryState:o,setParameter:s,removeParameter:l,queryClient:u}=r,d=(0,c.applyFilters)("generateblocks.editor.preview.context",null!==(n=r?.context)&&void 0!==n?n:{},{queryType:a,queryState:o,otherControls:t}),p=(0,e.useSelect)((e=>{const{postId:t}=d;if(t)return parseInt(t,10);const{getCurrentPostId:r}=e(It.store);return r?r():null}),[d]),{meta_key:m="",meta_key_id:b="current",posts_per_page:f=10,offset:y=0}=o,v=(0,g.useMemo)((()=>{const e=[];return"post_meta"===a&&e.push("post"),{load:e,options:{},postId:"current"!==b&&b?parseInt(b,10):p}}),[a,b,p]),{record:_}=(0,Ze.usePostRecord)(v);return(0,g.useEffect)((()=>{b&&"post_meta"!==a&&l("meta_key_id"),m&&!["option","post_meta"].includes(a)&&l("meta_key")}),[a,b,m]),(0,i.createElement)(i.Fragment,null,t,"post_meta"===a&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Ze.SelectPost,{value:b.toString(),onChange:function(e){var t;return s("meta_key_id",null!==(t=e?.value)&&void 0!==t?t:"")},onClear:function(){s("meta_key_id","current")},help:(0,h.__)("Type to search for posts.","generateblocks-pro"),currentPostId:p,placeholder:(0,h.__)("Current Post","generateblocks-pro"),queryClient:u}),(0,i.createElement)(Ze.SelectMeta,{onSelect:e=>{e?.value?s("meta_key",e.value):l("meta_key")},onClear:()=>l("meta_key"),onEnter:e=>s("meta_key",e),onAdd:({inputValue:e})=>s("meta_key",e),help:(0,h.__)("Meta value must be an array","generateblocks-pro"),value:m,post:_,type:"post"}),(0,i.createElement)(Ot,{value:f,setParameter:s}),(0,i.createElement)(Nt,{value:y,setParameter:s})),"option"===a&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)(Ze.SelectMeta,{onSelect:e=>{e?.value?s("meta_key",e.value):l("meta_key")},onClear:()=>l("meta_key"),onEnter:e=>s("meta_key",e),onAdd:({inputValue:e})=>s("meta_key",e),help:(0,h.__)("Meta value must be an array","generateblocks-pro"),value:m,type:"option"}),(0,i.createElement)(Ot,{value:f,setParameter:s}),(0,i.createElement)(Nt,{value:y,setParameter:s})))})),(0,c.addFilter)("generateblocks.editor.looper.query","generateblocks-pro/looper/custom-query",(function(t,{query:r,queryType:n,context:a}){const o=(0,e.useSelect)((e=>{const{postId:t}=a;if(t)return parseInt(t,10);const{getCurrentPostId:r}=e("core/editor");return r?r():null}),[a]),{meta_key:s,meta_key_id:i="current"}=r,l="current"!==i&&i?parseInt(i,10):o,c=(0,Ze.usePostMeta)({shouldRequest:"post_meta"===n,id:l,key:s}),u=(0,Ze.useOption)({shouldRequest:"option"===n,key:s});return"post_meta"===n&&c.data?c:"option"===n&&u.data?u:t}),10,2),(0,c.addAction)("generateblocks.patterns.patternsList","generateblocks.patterns.setGlobalStyleCSS",(({activeLibrary:e,setGlobalStyleCSS:t,setGlobalStyleData:r,isLocal:n,cacheIsClearing:a})=>{(0,g.useEffect)((()=>{!async function(){if(n)t(""),r([]);else{var a,o;const{data:n}=await async function(e){try{const t=await Me()({path:(0,Et.addQueryArgs)("/generateblocks-pro/v1/pattern-library/get-global-style-data",{url:e?.domain,id:e?.id,publicKey:e?.publicKey}),method:"GET",headers:{"X-GB-Public-Key":e.publicKey}});if(t)return t.response}catch(e){return[]}}(e);t(null!==(a=n?.css)&&void 0!==a?a:""),r(null!==(o=n?.styles)&&void 0!==o?o:[])}}()}),[e?.id,a])})),(0,c.addFilter)("generateblocks.patterns.insertPatternButton","generateblocks.patterns.insertGlobalStyleButton",((r,{onClick:n,label:a,patterns:o,globalStyleData:s,className:l,disabled:c})=>{const u=xt(),d=function(){const{editEntityRecord:r}=(0,e.useDispatch)(St.store),n=xt();return async(e,a,o)=>{const s=await(0,t.getCss)(e,o),i=["postType","gblocks_styles",a];await r(...i,{title:e,gb_style_selector:e,gb_style_data:o,gb_style_css:s});const l=await(0,t.getCss)(e,o,"editor");n(e,l)}}(),[h,m]=(0,g.useState)(!1),{getEntityRecordEdits:b,getEntityRecord:f}=(0,e.useSelect)(St.store);return(0,i.createElement)(p.Button,{variant:"primary",className:l,icon:et,isBusy:h,disabled:c,onClick:async e=>{m(!0);const t=o.map((e=>e.globalStyleSelectors)).flat();if(!t.length)return void n(e);const r=[];if(t.forEach((e=>{const t=s.find((t=>t.className===e));t&&!r.includes(t)&&r.push(t)})),r.length)try{const t=await Me()({path:"/generateblocks-pro/v1/pattern-library/import-styles",method:"POST",data:{styles:r}}),a=t?.response?.data?.imported,o=t?.response?.data?.existing;if(o?.length){const e=o.find((e=>".gbp-section__inner"===e.selector));e&&await async function(e,t=[]){const r=s.find((t=>t.className===e.selector)),n=JSON.parse(r.styles),a=await b("postType","gblocks_styles",e.id),o={...e.styles},i={...a?.gb_style_data||o};let l=!1;for(const e of t)!i[e]&&n[e]&&(i[e]=n[e],l=!0);l&&await async function(e,t,r=10){return new Promise((n=>{let a=0;const o=()=>{const s=f(e,"gblocks_styles",t);s?n(s):a<r&&(a++,setTimeout(o,100))};o()}))}("postType",e.id)&&await d(e.selector,e.id,i)}(e,["maxWidth"])}a.length&&a.forEach((e=>{const t=s.find((t=>t.className===e))?.css;u(e,t)})),n(e),m(!1)}catch(t){n(e),m(!1)}else n(e)}},a)})),(0,c.addFilter)("generateblocks.patternLibrary.addLibraryContent","generateblocks.patternLibrary.addRemoteLibrary",((e,{setShowAddLibrary:t,setLibraries:r})=>{const[n,a]=(0,g.useState)(""),[o,s]=(0,g.useState)(""),[l,c]=(0,g.useState)(""),[u,d]=(0,g.useState)(!1);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(p.TextControl,{label:(0,h.__)("Domain","generateblocks-pro"),value:o,onChange:s,type:"url",placeholder:"https://yourdomain.com",onBlur:()=>{""===o||o.startsWith("http")?o&&a(""):s("https://"+o.replace(/^\/\//,""))}}),(0,i.createElement)(p.TextControl,{label:(0,h.__)("Public key","generateblocks-pro"),value:l,onChange:c,onBlur:()=>{l&&a("")}}),(0,i.createElement)(p.Button,{disabled:!!n,variant:"primary",isBusy:u,onClick:async()=>{if(d(!0),a(""),""===o)return a((0,h.__)("Please enter a domain.","generateblocks-pro")),void d(!1);if(""===l)return a((0,h.__)("Public key is required.","generateblocks-pro")),void d(!1);const e={id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),domain:o,publicKey:l,isEnabled:!0,isDefault:!1,isLocal:!1};try{const n=await Me()({path:"/generateblocks-pro/v1/pattern-library/add-library",method:"POST",data:{domain:o,publicKey:l,data:e}});if(!n?.success)throw new Error(n?.response);await r(),t(!1),d(!1)}catch(e){a(e?.message||(0,h.__)("Error adding library.","generateblocks-pro")),d(!1)}}},(0,h.__)("Add","generateblocks-pro")),n&&(0,i.createElement)(p.Notice,{status:"error",isDismissible:!1,className:"gb-add-library__error"},n))})),(0,c.addFilter)("generateblocks.editor.allowCustomAtRule","generateblocks-pro/editor/allowCustomAtRule",(()=>!0)),(0,c.addFilter)("generateblocks.editor.allowCustomAdvancedSelector","generateblocks-pro/editor/allowCustomAdvancedSelector",(()=>!0));const Rt=(0,c.applyFilters)("generateblocks-pro.deviceVisibilityOptions",[{label:(0,h.__)("Hide on Desktop","generateblocks-pro"),ruleId:"largeWidth"},{label:(0,h.__)("Hide on Tablet","generateblocks-pro"),ruleId:"mediumWidth"},{label:(0,h.__)("Hide on Tablet & Mobile","generateblocks-pro"),ruleId:"mediumSmallWidth"},{label:(0,h.__)("Hide on Mobile","generateblocks-pro"),ruleId:"smallWidth"}]),Tt=["none","none!important","none !important"];(0,c.addFilter)("generateblocks.blockSettings.openPanel","generateblocks-pro/device-visibility",(function(e,r){const{panelId:n,getStyleValue:a,onStyleChange:o}=r;return"settings"!==n||void 0===a?e:Rt&&Rt.length?(0,i.createElement)(i.Fragment,null,e,(0,i.createElement)(p.BaseControl,{label:(0,h.__)("Device Visibility","generateblocks-pro"),id:"gb-device-visibility"},(0,i.createElement)(Ze.Stack,{gap:"5px"},Rt.map((e=>{const r=(0,t.getAtRuleValue)(e.ruleId),n=Tt.includes(a("display",r));return(0,i.createElement)(p.ToggleControl,{key:e.ruleId,label:e.label,checked:n,onChange:e=>{o("display",e?"none !important":"",r)}})}))))):e})),(0,c.addFilter)("generateblocks.editor.blockCss","generateblocks-pro/navigation-editor-css",((t,{clientId:r,name:n})=>{const{getBlock:a}=(0,e.useSelect)((e=>e("core/block-editor")),[]);if("generateblocks-pro/navigation"===n){var o;const e=a(r),{htmlAttributes:s={},uniqueId:i}=e.attributes,l=null!==(o=s?.["data-gb-mobile-breakpoint"])&&void 0!==o?o:"";if(l){const e=(0,bt.getSelector)(n,i);let r=`@media (width > ${l}) {.editor-styles-wrapper ${e} .gb-menu-toggle {display: none;}}`;r+=`@media (max-width: ${l}) {.editor-styles-wrapper ${e} .gb-menu-container:not(.gb-menu-container--toggled) {display: none;}`,t+=r}else t+=`.editor-styles-wrapper ${(0,bt.getSelector)(n,i)} .gb-menu-toggle {display: none;}`}return t})),(0,c.addFilter)("generateblocks.editor.sidebar","generateblocks/sidebar/overlay-panels",(function(e,{activePanel:t}){return t?e:(0,i.createElement)(i.Fragment,null,e,(0,i.createElement)(p.PanelBody,null,(0,i.createElement)("h2",{className:"gblocks-editor-sidebar__panel-title"},(0,h.__)("Overlay Panels","generateblocks")),(0,i.createElement)(ct,{trigger:(0,i.createElement)(p.Button,{variant:"secondary"},(0,h.__)("Manage Overlay Panels","generateblocks"))})))}));const Pt=(0,g.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(m.Path,{d:"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z"})),Mt=(0,g.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(m.Path,{d:"M18 11.3l-1-1.1-4 4V3h-1.5v11.3L7 10.2l-1 1.1 6.2 5.8 5.8-5.8zm.5 3.7v3.5h-13V15H4v5h16v-5h-1.5z"}));function Dt({conditions:e,onConditionsImport:t}){const[r,n]=(0,g.useState)(!1),[a,o]=(0,g.useState)(""),[s,l]=(0,g.useState)(!1),[c,u]=(0,g.useState)(!1),d=()=>{if(!e.groups||0===e.groups.length)return"";const t={logic:e.logic,groups:e.groups.map((e=>({logic:e.logic,conditions:e.conditions.filter((e=>e.type&&e.rule&&e.operator)).map((e=>({type:e.type,rule:e.rule,operator:e.operator,value:e.value||""})))}))).filter((e=>0<e.conditions.length))};return JSON.stringify(t,null,2)},m=e.groups&&0<e.groups.length;return(0,i.createElement)("div",{className:"gb-conditions-preview"},s?(0,i.createElement)("div",{className:"gb-import-section"},(0,i.createElement)(p.TextareaControl,{label:(0,h.__)("Import Conditions (JSON format)","generateblocks-pro"),value:a,onChange:o,rows:8,placeholder:(0,h.__)("Paste exported conditions here","generateblocks-pro")}),(0,i.createElement)(p.Button,{variant:"primary",onClick:()=>{if(a.trim())try{const e=JSON.parse(a);if(!e.groups||!Array.isArray(e.groups))throw new Error("Invalid format: missing groups array");e.groups.forEach(((e,t)=>{if(!e.logic||!["AND","OR"].includes(e.logic))throw new Error(`Invalid logic operator in group ${t+1}`);if(!e.conditions||!Array.isArray(e.conditions))throw new Error(`Invalid conditions in group ${t+1}`);e.conditions.forEach(((e,r)=>{if(!e.type||!e.rule||!e.operator)throw new Error(`Incomplete condition ${r+1} in group ${t+1}`)}))}));const r={logic:e.logic||"OR",groups:e.groups};t(r),o(""),l(!1),alert((0,h.__)("Conditions imported successfully!","generateblocks-pro"))}catch(e){alert((0,h.__)("Import failed: ","generateblocks-pro")+e.message)}else alert((0,h.__)("Please enter conditions to import.","generateblocks-pro"))},disabled:!a.trim()},(0,h.__)("Import Conditions","generateblocks-pro"))):(0,i.createElement)(i.Fragment,null,r&&m&&(0,i.createElement)("div",{className:"gb-preview-text"},(0,i.createElement)("pre",{className:"gb-export-format"},d()||(0,h.__)("No conditions to export","generateblocks-pro")))),(0,i.createElement)("div",{className:"gb-preview-footer"},m&&(0,i.createElement)(p.ToggleControl,{label:(0,h.__)("Show JSON Format","generateblocks-pro"),checked:r,onChange:n,help:(0,h.__)("View the raw JSON format for advanced users","generateblocks-pro")}),(0,i.createElement)("div",{className:"gb-preview-actions"},m&&r&&(0,i.createElement)(p.Button,{variant:"secondary",size:"compact",icon:Qe,onClick:async()=>{const e=d();try{await navigator.clipboard.writeText(e),u(!0),setTimeout((()=>u(!1)),2e3)}catch(t){const r=document.createElement("textarea");r.value=e,document.body.appendChild(r),r.focus(),r.select(),document.execCommand("copy"),document.body.removeChild(r),u(!0),setTimeout((()=>u(!1)),2e3)}},className:"gb-copy-button"},c?(0,h.__)("Copied!","generateblocks-pro"):(0,h.__)("Copy JSON","generateblocks-pro")),(0,i.createElement)(p.Button,{variant:"secondary",size:"compact",icon:s?Pt:Mt,onClick:()=>l(!s)},s?(0,h.__)("Cancel Import","generateblocks-pro"):(0,h.__)("Import","generateblocks-pro")))))}function At({isOpen:e,onClose:t,onCreateCategory:r}){const[n,a]=(0,g.useState)(""),[o,s]=(0,g.useState)(!1),l=async()=>{if(n.trim()){s(!0);try{const e=n.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-");await r({name:n.trim(),slug:e}),a(""),t()}catch(e){}finally{s(!1)}}},c=()=>{a(""),t()};return e?(0,i.createElement)(p.Modal,{title:(0,h.__)("Create New Category","generateblocks-pro"),onRequestClose:c,className:"gb-create-category-modal"},(0,i.createElement)("div",{className:"gb-modal-content"},(0,i.createElement)(p.TextControl,{label:(0,h.__)("Category Name","generateblocks-pro"),value:n,onChange:a,placeholder:(0,h.__)("Enter category name","generateblocks-pro"),disabled:o,onKeyDown:e=>{"Enter"===e.key&&l()}}),(0,i.createElement)("div",{className:"gb-modal-actions"},(0,i.createElement)(p.Button,{variant:"secondary",onClick:c,disabled:o},(0,h.__)("Cancel","generateblocks-pro")),(0,i.createElement)(p.Button,{variant:"primary",onClick:l,disabled:!n.trim()||o,isBusy:o},(0,h.__)("Create Category","generateblocks-pro"))))):null}const Bt=(0,g.createElement)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,g.createElement)(m.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm.5 16c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5V7h15v12zM9 10H7v2h2v-2zm0 4H7v2h2v-2zm4-4h-2v2h2v-2zm4 0h-2v2h2v-2zm-4 4h-2v2h2v-2zm4 0h-2v2h2v-2z"}));function Ft({currentDate:e,onChange:t,placeholder:r=(0,h.__)("Select date and time","generateblocks-pro")}){const[n,a]=(0,g.useState)(!1),[o,s]=(0,g.useState)(e),l=()=>{s(e),a(!1)};return(0,i.createElement)("div",{className:"gb-datetime-popover-wrapper"},(0,i.createElement)(p.Button,{variant:"secondary",icon:Bt,onClick:()=>{s(e),a(!0)},className:"gb-datetime-trigger",size:"compact"},(c=e)?c.toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):r),n&&(0,i.createElement)(p.Popover,{position:"bottom left",onClose:l,className:"gb-datetime-popover"},(0,i.createElement)("div",{className:"gb-datetime-popover-content"},(0,i.createElement)(p.DateTimePicker,{currentDate:o,onChange:s,is12Hour:!0}),(0,i.createElement)("div",{className:"gb-datetime-popover-actions"},e&&(0,i.createElement)(p.Button,{variant:"link",onClick:()=>{s(null),t(null),a(!1)},isDestructive:!0},(0,h.__)("Clear","generateblocks-pro")),(0,i.createElement)("div",{className:"gb-datetime-popover-main-actions"},(0,i.createElement)(p.Button,{variant:"tertiary",onClick:l},(0,h.__)("Cancel","generateblocks-pro")),(0,i.createElement)(p.Button,{variant:"primary",onClick:()=>{t(o),a(!1)}},(0,h.__)("Apply","generateblocks-pro")))))));var c}function $t(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}function qt(){return qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qt.apply(null,arguments)}var Lt=r(5556),Vt=r.n(Lt);r(44363);const zt=e=>"object"==typeof e&&null!=e&&1===e.nodeType,Ut=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,Kt=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const r=getComputedStyle(e,null);return Ut(r.overflowY,t)||Ut(r.overflowX,t)||(e=>{const t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}})(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)})(e)}return!1},jt=(e,t,r,n,a,o,s,i)=>o<e&&s>t||o>e&&s<t?0:o<=e&&i<=r||s>=t&&i>=r?o-e-n:s>t&&i<r||o<e&&i>r?s-t+a:0,Ht=e=>{const t=e.parentElement;return null==t?e.getRootNode().host||null:t};var Qt=function(){return Qt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Qt.apply(this,arguments)};Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var Wt=0;function Gt(){}function Zt(e,t,r){return e===t||t instanceof r.Node&&e.contains&&e.contains(t)}function Yt(e,t){var r;function n(){r&&clearTimeout(r)}function a(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];n(),r=setTimeout((function(){r=null,e.apply(void 0,o)}),t)}return a.cancel=n,a}function Jt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return t.some((function(t){return t&&t.apply(void 0,[e].concat(n)),e.preventDownshiftDefault||e.hasOwnProperty("nativeEvent")&&e.nativeEvent.preventDownshiftDefault}))}}function Xt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){t.forEach((function(t){"function"==typeof t?t(e):t&&(t.current=e)}))}}function er(e,t){return e&&t?Object.keys(e).reduce((function(r,n){return r[n]=tr(t,n)?t[n]:e[n],r}),{}):e}function tr(e,t){return void 0!==e[t]}function rr(e,t,r,n,a){void 0===a&&(a=!1);var o=r.length;if(0===o)return-1;var s=o-1;("number"!=typeof e||e<0||e>s)&&(e=t>0?-1:s+1);var i=e+t;i<0?i=a?s:0:i>s&&(i=a?0:s);var l=nr(i,t<0,r,n,a);return-1===l?e>=o?-1:e:l}function nr(e,t,r,n,a){void 0===a&&(a=!1);var o=r.length;if(t){for(var s=e;s>=0;s--)if(!n(r[s],s))return s}else for(var i=e;i<o;i++)if(!n(r[i],i))return i;return a?nr(t?o-1:0,t,r,n):-1}function ar(e,t,r,n){return void 0===n&&(n=!0),r&&t.some((function(t){return t&&(Zt(t,e,r)||n&&Zt(t,r.document.activeElement,r))}))}var or=Yt((function(e){sr(e).textContent=""}),500);function sr(e){var t=e.getElementById("a11y-status-message");return t||((t=e.createElement("div")).setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}var ir={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};var lr=Yt((function(e,t){!function(e,t){e&&t&&(sr(t).textContent=e,or(t))}(e,t)}),200),cr="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect,ur="useId"in l()?function(e){var t=e.id,r=e.labelId,n=e.menuId,a=e.getItemId,o=e.toggleButtonId,s=e.inputId,c="downshift-"+l().useId();return t||(t=c),(0,i.useRef)({labelId:r||t+"-label",menuId:n||t+"-menu",getItemId:a||function(e){return t+"-item-"+e},toggleButtonId:o||t+"-toggle-button",inputId:s||t+"-input"}).current}:function(e){var t=e.id,r=void 0===t?"downshift-"+String(Wt++):t,n=e.labelId,a=e.menuId,o=e.getItemId,s=e.toggleButtonId,l=e.inputId;return(0,i.useRef)({labelId:n||r+"-label",menuId:a||r+"-menu",getItemId:o||function(e){return r+"-item-"+e},toggleButtonId:s||r+"-toggle-button",inputId:l||r+"-input"}).current};function dr(e){return""+e.slice(0,1).toUpperCase()+e.slice(1)}function hr(e){var t=(0,i.useRef)(e);return t.current=e,t}function pr(e,t,r,n){var a=(0,i.useRef)(),o=(0,i.useRef)(),s=(0,i.useCallback)((function(t,r){o.current=r,t=er(t,r.props);var n=e(t,r);return r.props.stateReducer(t,qt({},r,{changes:n}))}),[e]),l=(0,i.useReducer)(s,t,r),c=l[0],u=l[1],d=hr(t),h=(0,i.useCallback)((function(e){return u(qt({props:d.current},e))}),[d]),p=o.current;return(0,i.useEffect)((function(){var e=er(a.current,null==p?void 0:p.props);p&&a.current&&!n(e,c)&&function(e,t,r){var n=e.props,a=e.type,o={};Object.keys(t).forEach((function(n){!function(e,t,r,n){var a=t.props,o=t.type,s="on"+dr(e)+"Change";a[s]&&void 0!==n[e]&&n[e]!==r[e]&&a[s](qt({type:o},n))}(n,e,t,r),r[n]!==t[n]&&(o[n]=r[n])})),n.onStateChange&&Object.keys(o).length&&n.onStateChange(qt({type:a},o))}(p,e,c),a.current=c}),[c,p,n]),[c,h]}var gr={itemToString:function(e){return e?String(e):""},itemToKey:function(e){return e},stateReducer:function(e,t){return t.changes},scrollIntoView:function(e,t){if(e){var r=((e,t)=>{var r,n,a,o;if("undefined"==typeof document)return[];const{scrollMode:s,block:i,inline:l,boundary:c,skipOverflowHiddenElements:u}=t,d="function"==typeof c?c:e=>e!==c;if(!zt(e))throw new TypeError("Invalid target");const h=document.scrollingElement||document.documentElement,p=[];let g=e;for(;zt(g)&&d(g);){if(g=Ht(g),g===h){p.push(g);break}null!=g&&g===document.body&&Kt(g)&&!Kt(document.documentElement)||null!=g&&Kt(g,u)&&p.push(g)}const m=null!=(n=null==(r=window.visualViewport)?void 0:r.width)?n:innerWidth,b=null!=(o=null==(a=window.visualViewport)?void 0:a.height)?o:innerHeight,{scrollX:f,scrollY:y}=window,{height:v,width:_,top:w,right:E,bottom:k,left:C}=e.getBoundingClientRect(),{top:x,right:S,bottom:I,left:O}=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);let N="start"===i||"nearest"===i?w-x:"end"===i?k+I:w+v/2-x+I,R="center"===l?C+_/2-O+S:"end"===l?E+S:C-O;const T=[];for(let e=0;e<p.length;e++){const t=p[e],{height:r,width:n,top:a,right:o,bottom:c,left:u}=t.getBoundingClientRect();if("if-needed"===s&&w>=0&&C>=0&&k<=b&&E<=m&&(t===h&&!Kt(t)||w>=a&&k<=c&&C>=u&&E<=o))return T;const d=getComputedStyle(t),g=parseInt(d.borderLeftWidth,10),x=parseInt(d.borderTopWidth,10),S=parseInt(d.borderRightWidth,10),I=parseInt(d.borderBottomWidth,10);let O=0,P=0;const M="offsetWidth"in t?t.offsetWidth-t.clientWidth-g-S:0,D="offsetHeight"in t?t.offsetHeight-t.clientHeight-x-I:0,A="offsetWidth"in t?0===t.offsetWidth?0:n/t.offsetWidth:0,B="offsetHeight"in t?0===t.offsetHeight?0:r/t.offsetHeight:0;if(h===t)O="start"===i?N:"end"===i?N-b:"nearest"===i?jt(y,y+b,b,x,I,y+N,y+N+v,v):N-b/2,P="start"===l?R:"center"===l?R-m/2:"end"===l?R-m:jt(f,f+m,m,g,S,f+R,f+R+_,_),O=Math.max(0,O+y),P=Math.max(0,P+f);else{O="start"===i?N-a-x:"end"===i?N-c+I+D:"nearest"===i?jt(a,c,r,x,I+D,N,N+v,v):N-(a+r/2)+D/2,P="start"===l?R-u-g:"center"===l?R-(u+n/2)+M/2:"end"===l?R-o+S+M:jt(u,o,n,g,S+M,R,R+_,_);const{scrollLeft:e,scrollTop:s}=t;O=0===B?0:Math.max(0,Math.min(s+O/B,t.scrollHeight-r/B+D)),P=0===A?0:Math.max(0,Math.min(e+P/A,t.scrollWidth-n/A+M)),N+=s-O,R+=e-P}T.push({el:t,top:O,left:P})}return T})(e,{boundary:t,block:"nearest",scrollMode:"if-needed"});r.forEach((function(e){var t=e.el,r=e.top,n=e.left;t.scrollTop=r,t.scrollLeft=n}))}},environment:"undefined"==typeof window?void 0:window};function mr(e,t,r){void 0===r&&(r=ir);var n=e["default"+dr(t)];return void 0!==n?n:r[t]}function br(e,t,r){void 0===r&&(r=ir);var n=e[t];if(void 0!==n)return n;var a=e["initial"+dr(t)];return void 0!==a?a:mr(e,t,r)}function fr(e,t,r){var n=e.items,a=e.initialHighlightedIndex,o=e.defaultHighlightedIndex,s=e.isItemDisabled,i=e.itemToKey,l=t.selectedItem,c=t.highlightedIndex;return 0===n.length?-1:void 0===a||c!==a||s(n[a],a)?void 0===o||s(n[o],o)?l?n.findIndex((function(e){return i(l)===i(e)})):r<0&&!s(n[n.length-1],n.length-1)?n.length-1:r>0&&!s(n[0],0)?0:-1:o:a}var yr=Gt;function vr(e,t,r){var n;return void 0===r&&(r=!0),qt({isOpen:!1,highlightedIndex:-1},(null==(n=e.items)?void 0:n.length)&&t>=0&&qt({selectedItem:e.items[t],isOpen:mr(e,"isOpen"),highlightedIndex:mr(e,"highlightedIndex")},r&&{inputValue:e.itemToString(e.items[t])}))}function _r(e,t){return e.isOpen===t.isOpen&&e.inputValue===t.inputValue&&e.highlightedIndex===t.highlightedIndex&&e.selectedItem===t.selectedItem}function wr(){var e=l().useRef(!0);return l().useEffect((function(){return e.current=!1,function(){e.current=!0}}),[]),e.current}function Er(e){var t=mr(e,"highlightedIndex");return t>-1&&e.isItemDisabled(e.items[t],t)?-1:t}var kr=qt({},{environment:Vt().shape({addEventListener:Vt().func.isRequired,removeEventListener:Vt().func.isRequired,document:Vt().shape({createElement:Vt().func.isRequired,getElementById:Vt().func.isRequired,activeElement:Vt().any.isRequired,body:Vt().any.isRequired}).isRequired,Node:Vt().func.isRequired}),itemToString:Vt().func,itemToKey:Vt().func,stateReducer:Vt().func},{getA11yStatusMessage:Vt().func,highlightedIndex:Vt().number,defaultHighlightedIndex:Vt().number,initialHighlightedIndex:Vt().number,isOpen:Vt().bool,defaultIsOpen:Vt().bool,initialIsOpen:Vt().bool,selectedItem:Vt().any,initialSelectedItem:Vt().any,defaultSelectedItem:Vt().any,id:Vt().string,labelId:Vt().string,menuId:Vt().string,getItemId:Vt().func,toggleButtonId:Vt().string,onSelectedItemChange:Vt().func,onHighlightedIndexChange:Vt().func,onStateChange:Vt().func,onIsOpenChange:Vt().func,scrollIntoView:Vt().func});Qt(Qt({},kr),{items:Vt().array.isRequired,isItemDisabled:Vt().func}),Qt(Qt({},gr),{isItemDisabled:function(){return!1}});var Cr=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:22,FunctionCloseMenu:17,FunctionOpenMenu:16,FunctionReset:21,FunctionSelectItem:19,FunctionSetHighlightedIndex:18,FunctionSetInputValue:20,FunctionToggleMenu:15,InputBlur:9,InputChange:8,InputClick:10,InputKeyDownArrowDown:0,InputKeyDownArrowUp:1,InputKeyDownEnd:4,InputKeyDownEnter:7,InputKeyDownEscape:2,InputKeyDownHome:3,InputKeyDownPageDown:6,InputKeyDownPageUp:5,ItemClick:13,ItemMouseMove:12,MenuMouseLeave:11,ToggleButtonClick:14});function xr(e){var t=function(e){var t=br(e,"selectedItem"),r=br(e,"isOpen"),n=function(e){var t=br(e,"highlightedIndex");return t>-1&&e.isItemDisabled(e.items[t],t)?-1:t}(e),a=br(e,"inputValue");return{highlightedIndex:n<0&&t&&r?e.items.findIndex((function(r){return e.itemToKey(r)===e.itemToKey(t)})):n,isOpen:r,selectedItem:t,inputValue:a}}(e),r=t.selectedItem,n=t.inputValue;return""===n&&r&&void 0===e.defaultInputValue&&void 0===e.initialInputValue&&void 0===e.inputValue&&(n=e.itemToString(r)),qt({},t,{inputValue:n})}qt({},kr,{items:Vt().array.isRequired,isItemDisabled:Vt().func,inputValue:Vt().string,defaultInputValue:Vt().string,initialInputValue:Vt().string,inputId:Vt().string,onInputValueChange:Vt().func});var Sr=Gt,Ir=qt({},gr,{isItemDisabled:function(){return!1}});function Or(e,t){var r,n,a=t.type,o=t.props,s=t.altKey;switch(a){case 13:n={isOpen:mr(o,"isOpen"),highlightedIndex:Er(o),selectedItem:o.items[t.index],inputValue:o.itemToString(o.items[t.index])};break;case 0:n=e.isOpen?{highlightedIndex:rr(e.highlightedIndex,1,o.items,o.isItemDisabled,!0)}:{highlightedIndex:s&&null==e.selectedItem?-1:fr(o,e,1),isOpen:o.items.length>=0};break;case 1:n=e.isOpen?s?vr(o,e.highlightedIndex):{highlightedIndex:rr(e.highlightedIndex,-1,o.items,o.isItemDisabled,!0)}:{highlightedIndex:fr(o,e,-1),isOpen:o.items.length>=0};break;case 7:n=vr(o,e.highlightedIndex);break;case 2:n=qt({isOpen:!1,highlightedIndex:-1},!e.isOpen&&{selectedItem:null,inputValue:""});break;case 5:n={highlightedIndex:rr(e.highlightedIndex,-10,o.items,o.isItemDisabled,!0)};break;case 6:n={highlightedIndex:rr(e.highlightedIndex,10,o.items,o.isItemDisabled,!0)};break;case 3:n={highlightedIndex:nr(0,!1,o.items,o.isItemDisabled)};break;case 4:n={highlightedIndex:nr(o.items.length-1,!0,o.items,o.isItemDisabled)};break;case 9:n=qt({isOpen:!1,highlightedIndex:-1},e.highlightedIndex>=0&&(null==(r=o.items)?void 0:r.length)&&t.selectItem&&{selectedItem:o.items[e.highlightedIndex],inputValue:o.itemToString(o.items[e.highlightedIndex])});break;case 8:n={isOpen:!0,highlightedIndex:Er(o),inputValue:t.inputValue};break;case 10:n={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:fr(o,e,0)};break;case 19:n={selectedItem:t.selectedItem,inputValue:o.itemToString(t.selectedItem)};break;case 22:n={inputValue:t.inputValue};break;default:return function(e,t,r){var n,a=t.type,o=t.props;switch(a){case r.ItemMouseMove:n={highlightedIndex:t.disabled?-1:t.index};break;case r.MenuMouseLeave:n={highlightedIndex:-1};break;case r.ToggleButtonClick:case r.FunctionToggleMenu:n={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:fr(o,e,0)};break;case r.FunctionOpenMenu:n={isOpen:!0,highlightedIndex:fr(o,e,0)};break;case r.FunctionCloseMenu:n={isOpen:!1};break;case r.FunctionSetHighlightedIndex:n={highlightedIndex:o.isItemDisabled(o.items[t.highlightedIndex],t.highlightedIndex)?-1:t.highlightedIndex};break;case r.FunctionSetInputValue:n={inputValue:t.inputValue};break;case r.FunctionReset:n={highlightedIndex:Er(o),isOpen:mr(o,"isOpen"),selectedItem:mr(o,"selectedItem"),inputValue:mr(o,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return qt({},e,n)}(e,t,Cr)}return qt({},e,n)}var Nr=["onMouseLeave","refKey","ref"],Rr=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],Tr=["onClick","onPress","refKey","ref"],Pr=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];function Mr(e){void 0===e&&(e={}),Sr(e,Mr);var t=qt({},Ir,e),r=t.items,n=t.scrollIntoView,a=t.environment,o=t.getA11yStatusMessage,s=function(e,t,r,n){var a=(0,i.useRef)(),o=pr(e,t,r,n),s=o[0],l=o[1],c=wr();return(0,i.useEffect)((function(){tr(t,"selectedItem")&&(c||t.itemToKey(t.selectedItem)!==t.itemToKey(a.current)&&l({type:22,inputValue:t.itemToString(t.selectedItem)}),a.current=s.selectedItem===a.current?t.selectedItem:s.selectedItem)}),[s.selectedItem,t.selectedItem]),[er(s,t),l]}(Or,t,xr,_r),l=s[0],c=s[1],u=l.isOpen,d=l.highlightedIndex,h=l.selectedItem,p=l.inputValue,g=(0,i.useRef)(null),m=(0,i.useRef)({}),b=(0,i.useRef)(null),f=(0,i.useRef)(null),y=wr(),v=ur(t),_=(0,i.useRef)(),w=hr({state:l,props:t}),E=(0,i.useCallback)((function(e){return m.current[v.getItemId(e)]}),[v]);!function(e,t,r,n){void 0===n&&(n={});var a=n.document,o=wr();(0,i.useEffect)((function(){if(e&&!o&&a){var r=e(t);lr(r,a)}}),r),(0,i.useEffect)((function(){return function(){var e,t;lr.cancel(),(t=null==(e=a)?void 0:e.getElementById("a11y-status-message"))&&t.remove()}}),[a])}(o,l,[u,d,h,p],a);var k=function(e){var t=e.highlightedIndex,r=e.isOpen,n=e.itemRefs,a=e.getItemNodeFromIndex,o=e.menuElement,s=e.scrollIntoView,l=(0,i.useRef)(!0);return cr((function(){t<0||!r||!Object.keys(n.current).length||(!1===l.current?l.current=!0:s(a(t),o))}),[t]),l}({menuElement:g.current,highlightedIndex:d,isOpen:u,itemRefs:m,scrollIntoView:n,getItemNodeFromIndex:E});yr({props:t,state:l}),(0,i.useEffect)((function(){br(t,"isOpen")&&b.current&&b.current.focus()}),[]),(0,i.useEffect)((function(){y||(_.current=r.length)}));var C=function(e,t,r){var n=(0,i.useRef)({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1});return(0,i.useEffect)((function(){if(!e)return Gt;var a=r.map((function(e){return e.current}));function o(){n.current.isTouchEnd=!1,n.current.isMouseDown=!0}function s(r){n.current.isMouseDown=!1,ar(r.target,a,e)||t()}function i(){n.current.isTouchEnd=!1,n.current.isTouchMove=!1}function l(){n.current.isTouchMove=!0}function c(r){n.current.isTouchEnd=!0,n.current.isTouchMove||ar(r.target,a,e,!1)||t()}return e.addEventListener("mousedown",o),e.addEventListener("mouseup",s),e.addEventListener("touchstart",i),e.addEventListener("touchmove",l),e.addEventListener("touchend",c),function(){e.removeEventListener("mousedown",o),e.removeEventListener("mouseup",s),e.removeEventListener("touchstart",i),e.removeEventListener("touchmove",l),e.removeEventListener("touchend",c)}}),[r,e,t]),n.current}(a,(0,i.useCallback)((function(){w.current.state.isOpen&&c({type:9,selectItem:!1})}),[c,w]),(0,i.useMemo)((function(){return[g,f,b]}),[g.current,f.current,b.current])),x=Gt;(0,i.useEffect)((function(){u||(m.current={})}),[u]),(0,i.useEffect)((function(){var e;u&&null!=a&&a.document&&null!=b&&null!=(e=b.current)&&e.focus&&a.document.activeElement!==b.current&&b.current.focus()}),[u,a]);var S=(0,i.useMemo)((function(){return{ArrowDown:function(e){e.preventDefault(),c({type:0,altKey:e.altKey})},ArrowUp:function(e){e.preventDefault(),c({type:1,altKey:e.altKey})},Home:function(e){w.current.state.isOpen&&(e.preventDefault(),c({type:3}))},End:function(e){w.current.state.isOpen&&(e.preventDefault(),c({type:4}))},Escape:function(e){var t=w.current.state;(t.isOpen||t.inputValue||t.selectedItem||t.highlightedIndex>-1)&&(e.preventDefault(),c({type:2}))},Enter:function(e){w.current.state.isOpen&&229!==e.which&&(e.preventDefault(),c({type:7}))},PageUp:function(e){w.current.state.isOpen&&(e.preventDefault(),c({type:5}))},PageDown:function(e){w.current.state.isOpen&&(e.preventDefault(),c({type:6}))}}}),[c,w]),I=(0,i.useCallback)((function(e){return qt({id:v.labelId,htmlFor:v.inputId},e)}),[v]),O=(0,i.useCallback)((function(e,t){var r,n=void 0===e?{}:e,a=n.onMouseLeave,o=n.refKey,s=void 0===o?"ref":o,i=n.ref,l=$t(n,Nr),u=(void 0===t?{}:t).suppressRefError;return x("getMenuProps",void 0!==u&&u,s,g),qt(((r={})[s]=Xt(i,(function(e){g.current=e})),r.id=v.menuId,r.role="listbox",r["aria-labelledby"]=l&&l["aria-label"]?void 0:""+v.labelId,r.onMouseLeave=Jt(a,(function(){c({type:11})})),r),l)}),[c,x,v]),N=(0,i.useCallback)((function(e){var t,r,n=void 0===e?{}:e,a=n.item,o=n.index,s=n.refKey,i=void 0===s?"ref":s,l=n.ref,u=n.onMouseMove,d=n.onMouseDown,h=n.onClick;n.onPress;var p=n.disabled,g=$t(n,Rr);void 0!==p&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');var b=w.current,f=b.props,y=b.state,_=function(e,t,r,n){var a,o;if(void 0===e){if(void 0===t)throw new Error(n);a=r[t],o=t}else o=void 0===t?r.indexOf(e):t,a=e;return[a,o]}(a,o,f.items,"Pass either item or index to getItemProps!"),E=_[0],x=_[1],S=f.isItemDisabled(E,x),I=h;return qt(((t={})[i]=Xt(l,(function(e){e&&(m.current[v.getItemId(x)]=e)})),t["aria-disabled"]=S,t["aria-selected"]=x===y.highlightedIndex,t.id=v.getItemId(x),t.role="option",t),!S&&((r={}).onClick=Jt(I,(function(){c({type:13,index:x})})),r),{onMouseMove:Jt(u,(function(){C.isTouchEnd||x===y.highlightedIndex||(k.current=!1,c({type:12,index:x,disabled:S}))})),onMouseDown:Jt(d,(function(e){return e.preventDefault()}))},g)}),[c,v,w,C,k]),R=(0,i.useCallback)((function(e){var t,r=void 0===e?{}:e,n=r.onClick;r.onPress;var a=r.refKey,o=void 0===a?"ref":a,s=r.ref,i=$t(r,Tr),l=w.current.state;return qt(((t={})[o]=Xt(s,(function(e){f.current=e})),t["aria-controls"]=v.menuId,t["aria-expanded"]=l.isOpen,t.id=v.toggleButtonId,t.tabIndex=-1,t),!i.disabled&&qt({},{onClick:Jt(n,(function(){c({type:14})}))}),i)}),[c,w,v]),T=(0,i.useCallback)((function(e,t){var r,n=void 0===e?{}:e,o=n.onKeyDown,s=n.onChange,i=n.onInput,l=n.onBlur;n.onChangeText;var u=n.onClick,d=n.refKey,h=void 0===d?"ref":d,p=n.ref,g=$t(n,Pr),m=(void 0===t?{}:t).suppressRefError;x("getInputProps",void 0!==m&&m,h,b);var f,y=w.current.state,_={};return g.disabled||((f={}).onChange=Jt(s,i,(function(e){c({type:8,inputValue:e.target.value})})),f.onKeyDown=Jt(o,(function(e){var t=function(e){var t=e.key,r=e.keyCode;return r>=37&&r<=40&&0!==t.indexOf("Arrow")?"Arrow"+t:t}(e);t&&S[t]&&S[t](e)})),f.onBlur=Jt(l,(function(e){if(null!=a&&a.document&&y.isOpen&&!C.isMouseDown){var t=null===e.relatedTarget&&a.document.activeElement!==a.document.body;c({type:9,selectItem:!t})}})),f.onClick=Jt(u,(function(){c({type:10})})),_=f),qt(((r={})[h]=Xt(p,(function(e){b.current=e})),r["aria-activedescendant"]=y.isOpen&&y.highlightedIndex>-1?v.getItemId(y.highlightedIndex):"",r["aria-autocomplete"]="list",r["aria-controls"]=v.menuId,r["aria-expanded"]=y.isOpen,r["aria-labelledby"]=g&&g["aria-label"]?void 0:v.labelId,r.autoComplete="off",r.id=v.inputId,r.role="combobox",r.value=y.inputValue,r),_,g)}),[c,v,a,S,w,C,x]),P=(0,i.useCallback)((function(){c({type:15})}),[c]),M=(0,i.useCallback)((function(){c({type:17})}),[c]),D=(0,i.useCallback)((function(){c({type:16})}),[c]),A=(0,i.useCallback)((function(e){c({type:18,highlightedIndex:e})}),[c]),B=(0,i.useCallback)((function(e){c({type:19,selectedItem:e})}),[c]);return{getItemProps:N,getLabelProps:I,getMenuProps:O,getInputProps:T,getToggleButtonProps:R,toggleMenu:P,openMenu:D,closeMenu:M,setHighlightedIndex:A,setInputValue:(0,i.useCallback)((function(e){c({type:20,inputValue:e})}),[c]),selectItem:B,reset:(0,i.useCallback)((function(){c({type:21})}),[c]),highlightedIndex:d,isOpen:u,selectedItem:h,inputValue:p}}Mr.stateChangeTypes=Cr,Vt().array,Vt().array,Vt().array,Vt().func,Vt().number,Vt().number,Vt().number,Vt().func,Vt().func,Vt().string,Vt().string;const Dr=(0,g.createElement)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,g.createElement)(m.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"}));function Ar({rule:e,ruleMetadata:t,searchContent:r,searchResults:n,recentItems:a,isSearching:o,value:s,onSelect:l,placeholder:c,isMultiValue:u=!1,readOnly:d=!1,className:m="",currentSelectedValues:b=[]}){const[y,v]=(0,g.useState)([]),[_,w]=(0,g.useState)(!1),[E,k]=(0,g.useState)(!1),C=(0,g.useRef)(s),x=(0,g.useRef)(e);(0,g.useEffect)((()=>{s!==C.current&&(C.current=s,k(!1))}),[s]);const S=(0,g.useCallback)((e=>{const t=e.id.toString();return b.map((e=>e.toString())).includes(t)}),[b]),I=(0,g.useCallback)((e=>{if(!e)return"";const t=e.title||e.name||"";return""!==e.id&&e.id&&"searching"!==e.type?`${t} (ID: ${e.id})`:t}),[]),O=(0,g.useCallback)((()=>{if(u)return null;if("object_selector"!==t.value_type&&"hierarchical_object_selector"!==t.value_type)return null;if("author_id"===e)return null;let r=(0,h.__)("All Items","generateblocks-pro");if(e.startsWith("post:")){const t=e.replace("post:","");switch(t){case"post":r=(0,h.__)("All Posts","generateblocks-pro");break;case"page":r=(0,h.__)("All Pages","generateblocks-pro");break;default:const e=t.charAt(0).toUpperCase()+t.slice(1);r=`${(0,h.__)("All","generateblocks-pro")} ${e}`}}else e.startsWith("taxonomy:")||e.startsWith("post_terms:")?r=(0,h.__)("All Terms","generateblocks-pro"):"child_of"===e?r=(0,h.__)("Any Parent","generateblocks-pro"):"parent_of"===e&&(r=(0,h.__)("Any Child","generateblocks-pro"));return{id:"",title:r,name:r}}),[e,t.value_type,u]),N=(0,g.useCallback)((e=>{const t=O();return t&&e===(t.title||t.name)}),[O]),R=(0,g.useCallback)((()=>u?0<b.length:s&&s.trim()&&!N(s)),[u,b,s,N]),T=(0,g.useCallback)((e=>{d||(N(e)&&!E||!E?w(!1):(w(!0),r(e)))}),[r,d,N,E]),{isOpen:P,getMenuProps:M,getInputProps:D,highlightedIndex:A,getItemProps:B,selectItem:$,setHighlightedIndex:q,closeMenu:L,openMenu:V,setInputValue:z}=Mr({items:y,itemToString:e=>e?I(e):"",defaultInputValue:u?"":s,onInputValueChange:({inputValue:e,type:t})=>{t===Mr.stateChangeTypes.InputChange&&k(!0),T(e||"")},onSelectedItemChange:({selectedItem:e})=>{e&&"searching"!==e.type&&(k(!1),l(e))},onIsOpenChange:({isOpen:e})=>{e&&(w(!1),k(!1))},stateReducer:(e,t)=>{const{type:r,changes:n}=t;switch(r){case Mr.stateChangeTypes.InputKeyDownEnter:case Mr.stateChangeTypes.ItemClick:return n.selectedItem&&"searching"===n.selectedItem.type?e:{...n,inputValue:u?"":I(n.selectedItem),isOpen:u};case Mr.stateChangeTypes.InputBlur:return{...n,isOpen:!!d&&e.isOpen};case Mr.stateChangeTypes.MenuKeyDownEscape:return{...n,isOpen:!1};case Mr.stateChangeTypes.InputClick:case Mr.stateChangeTypes.InputFocus:return k(!1),w(!1),n;default:return n}}});(0,g.useEffect)((()=>{!E&&z&&z((u?"":s)||"")}),[s,E,u,z]);const U=(0,g.useCallback)((e=>{if(e.preventDefault(),e.stopPropagation(),d||u)return;const t=O();t?$(t):l({id:"",title:"",name:""})}),[d,u,O,$,l]);(0,g.useEffect)((()=>{if(e!==x.current&&(x.current=e,!u&&(!s||N(s)))){const e=O();e&&$&&setTimeout((()=>{$(e)}),0)}}),[e,u,s,O,$,N]),(0,g.useEffect)((()=>{const e=O(),t=[];o&&_&&E&&t.push({id:"searching",title:(0,h.__)("Searching","generateblocks-pro"),name:(0,h.__)("Searching","generateblocks-pro"),type:"searching"}),e&&t.push(e),_&&E&&0<n.length?t.push(...n):0<a.length&&t.push(...a),v(t)}),[n,a,_,E,O,o]);const K=(0,g.useCallback)((e=>{if(!d||" "!==e.key||(e.preventDefault(),P)){if(P)switch(e.key){case"Tab":if(e.preventDefault(),e.shiftKey){const e=0>=A?y.length-1:A-1;q(e)}else{const e=y.length-1<=A?0:A+1;q(e)}break;case"Enter":e.preventDefault(),0<=A&&y[A]&&"searching"!==y[A].type&&$(y[A]);break;case"Escape":e.preventDefault(),L();break;case" ":d&&P&&(e.preventDefault(),0<=A&&y[A]&&"searching"!==y[A].type&&$(y[A]));break;case"ArrowDown":case"ArrowUp":break;default:d&&1===e.key.length&&e.preventDefault()}}else V()}),[P,A,y,q,$,L,V,d]);return(0,i.createElement)("div",{className:`gb-object-selector ${m}`},(0,i.createElement)("div",{className:"gb-combobox-container"},(0,i.createElement)("div",{className:"gb-input-wrapper"},(0,i.createElement)("input",{...D({placeholder:c,className:"components-text-control__input gb-object-search",onKeyDown:K,"aria-expanded":P,"aria-haspopup":"listbox",tabIndex:0}),style:{cursor:d?"pointer":"text",userSelect:d?"none":"text"}}),(0,i.createElement)("div",{className:"gb-input-icons"},R()&&!d&&(0,i.createElement)(p.Button,{icon:f,onClick:U,className:"gb-clear-button",size:"compact",label:(0,h.__)("Clear selection","generateblocks-pro"),iconSize:"16"}),0<y.length&&(0,i.createElement)("span",{className:"gb-dropdown-indicator "+(P?"gb-dropdown-indicator--open":""),"aria-hidden":"true"},P?Dr:F))),(0,i.createElement)("ul",{...M({className:"gb-search-results",role:"listbox","aria-label":(0,h.__)("Search results","generateblocks-pro"),style:{display:P&&0<y.length?"block":"none"}})},P&&0<y.length&&(0,i.createElement)(i.Fragment,null,!d&&!_&&0<a.length&&!o&&(0,i.createElement)("li",{className:"gb-search-results-header",role:"presentation"},(0,h.__)("Recent Items","generateblocks-pro")),y.map(((e,t)=>{const r=S(e),n=A===t,a="searching"===e.type;return(0,i.createElement)("li",{key:`${e.id}-${t}`,...B({item:e,index:t,role:"option","aria-selected":r}),className:`gb-search-result-item ${n?"gb-search-result-item--highlighted":""} ${r?"gb-search-result-item--selected":""} ${a?"gb-search-result-item--searching":""}`,style:{cursor:a?"default":"pointer"}},a?(0,i.createElement)("div",{className:"gb-search-result-item__searching"},(0,i.createElement)(p.Spinner,{size:"16"}),(0,i.createElement)("span",{className:"gb-search-result-item__text"},e.title||e.name)):(0,i.createElement)(i.Fragment,null,(0,i.createElement)("span",{className:"gb-search-result-item__text"},I(e)),r&&(0,i.createElement)("span",{className:"gb-search-result-item__check","aria-hidden":"true"},"")))}))))))}const Br=({condition:e,groupIndex:t,conditionIndex:r,onUpdate:n,onRemove:a,conditionTypes:o,logicOperator:s="AND",selectedObjectTitles:l,setSelectedObjectTitles:c})=>{const{getRulesForType:u,getOperatorsForType:d}=Je(),[m,b]=(0,g.useState)({}),[f,y]=(0,g.useState)({}),[v,_]=(0,g.useState)({}),[w,E]=(0,g.useState)(!1),[k,C]=(0,g.useState)([]),[x,S]=(0,g.useState)([]),[I,O]=(0,g.useState)(""),[N,R]=(0,g.useState)(!1),[T,P]=(0,g.useState)(!1),M=()=>e.type&&e.operator&&e.rule;(0,g.useEffect)((()=>{e.type&&e.operator&&e.rule&&!T&&P(!0)}),[e.type,e.operator,e.rule,T]),(0,g.useEffect)((()=>{e.type&&(async()=>{try{E(!0);const a=await u(e.type);let o;if(b(a),o=e.rule?await d(e.type,e.rule):await d(e.type),y(o),e.operator&&e.rule){const a=await d(e.type,e.rule);if(a&&!a[e.operator]){const o=Object.keys(a)[0];if(o){const a={...e,operator:o};n(t,r,a)}}}}catch(e){console.error("Error loading condition data:",e)}finally{E(!1)}})()}),[e.type,e.rule,u,d]),(0,g.useEffect)((()=>{if(e.type&&e.rule&&e.operator&&0!==Object.keys(f).length&&!f[e.operator]){const a=Object.keys(f)[0];if(a){const o={...e,operator:a};n(t,r,o)}else{const a={...e,operator:""};n(t,r,a)}}}),[e.operator,f]),(0,g.useEffect)((()=>{e.type&&e.rule?(async()=>{try{const t=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/get_rule_metadata?type=${e.type}&rule=${encodeURIComponent(e.rule)}`});t.success&&_(t.response)}catch(e){console.error("Error loading rule metadata:",e),_({needs_value:!0,value_type:"text",supports_multi:!1})}})():_({})}),[e.type,e.rule]),(0,g.useEffect)((()=>{B()?S(A()):J()&&e.rule?(async()=>{try{let t;if("hierarchical_object_selector"===v.value_type)t=await Me()({path:"/generateblocks-pro/advanced-conditions/v1/search_hierarchical_posts"});else if("author_id"===e.rule)t=await Me()({path:"/generateblocks-pro/advanced-conditions/v1/search_users"});else if(e.rule.startsWith("post:")){const r=e.rule.replace("post:","");t=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/search_posts?post_type=${r}`})}else if(e.rule.startsWith("taxonomy:")){const r=e.rule.replace("taxonomy:","");t=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/search_terms?taxonomy=${r}`})}else if(e.rule.startsWith("post_terms:")){const r=e.rule.replace("post_terms:","");t=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/search_terms?taxonomy=${r}`})}t?.success&&S(t.response)}catch(e){console.error("Error loading recent items:",e)}})():S([])}),[e.rule,v.value_type]);const A=()=>[{id:"1",name:(0,h.__)("Monday","generateblocks-pro")},{id:"2",name:(0,h.__)("Tuesday","generateblocks-pro")},{id:"3",name:(0,h.__)("Wednesday","generateblocks-pro")},{id:"4",name:(0,h.__)("Thursday","generateblocks-pro")},{id:"5",name:(0,h.__)("Friday","generateblocks-pro")},{id:"6",name:(0,h.__)("Saturday","generateblocks-pro")},{id:"7",name:(0,h.__)("Sunday","generateblocks-pro")}],B=()=>"day_selector"===v.value_type,F=()=>"datetime"===v.value_type,$=()=>F()&&"between"===e.operator,q=()=>!!e.operator&&(Q()&&W()||J()&&L()||$()),L=()=>["includes_any","includes_all","excludes_any","excludes_all"].includes(e.operator),V=()=>(e=>{if(!e)return[];if(Array.isArray(e))return e;try{const t=JSON.parse(e);if(Array.isArray(t))return t}catch(e){}return[e]})(e.value),z=e=>{if(!e)return null;const t=new Date(e);return isNaN(t.getTime())?null:t},U=e=>e?("string"==typeof e&&(e=new Date(e)),isNaN(e.getTime())?"":`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}T${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`):"",K=()=>{if(!$()||!e.value)return null;const t=e.value.split(",").map((e=>e.trim()));return z(t[0])},j=()=>{if(!$()||!e.value)return null;const t=e.value.split(",").map((e=>e.trim()));return z(t[1])},H=(e,t)=>{const r=[e?U(e):"",t?U(t):""].filter((e=>e)).join(", ");te("value",r)},Q=()=>"custom_field"===v.value_type,W=()=>!!Q()&&["equals","contains","not_contains","starts_with","ends_with","greater_than","less_than"].includes(e.operator),G=()=>Q()&&e.value?e.value.includes("|")?e.value.split("|")[0]:e.value:"",Z=()=>Q()&&e.value&&e.value.includes("|")&&e.value.split("|")[1]||"",Y=(e,t="")=>{let r=e;t&&W()&&(r=`${e}|${t}`),te("value",r)},J=()=>"object_selector"===v.value_type||"hierarchical_object_selector"===v.value_type||"day_selector"===v.value_type,X=()=>{switch(v.value_type){case"custom_field":return"query_arg"===e.type?(0,h.__)("Parameter name","generateblocks-pro"):"post_meta"===e.type?(0,h.__)("Meta key","generateblocks-pro"):(0,h.__)("Field name","generateblocks-pro");case"datetime":return(0,h.__)("Select date and time","generateblocks-pro");case"day_selector":return L()?(0,h.__)("Select days","generateblocks-pro"):(0,h.__)("Select day","generateblocks-pro");case"hierarchical_object_selector":return"child_of"===e.rule?L()?(0,h.__)("Select parent posts (or leave empty for any parent)","generateblocks-pro"):(0,h.__)("Any Parent (or search for specific)","generateblocks-pro"):"parent_of"===e.rule?L()?(0,h.__)("Select child posts (or leave empty for any child)","generateblocks-pro"):(0,h.__)("Any Child (or search for specific)","generateblocks-pro"):L()?(0,h.__)("Select multiple","generateblocks-pro"):(0,h.__)("Search or select","generateblocks-pro");case"object_selector":if("author_id"===e.rule)return L()?(0,h.__)("Select multiple authors","generateblocks-pro"):(0,h.__)("Select author","generateblocks-pro");if("location"===e.type&&e.rule.startsWith("post:")){const t=e.rule.replace("post:","");switch(t){case"post":return L()?(0,h.__)("Select multiple posts","generateblocks-pro"):(0,h.__)("All Posts (or search for specific)","generateblocks-pro");case"page":return L()?(0,h.__)("Select multiple pages","generateblocks-pro"):(0,h.__)("All Pages (or search for specific)","generateblocks-pro");default:const e=t.charAt(0).toUpperCase()+t.slice(1);return L()?`${(0,h.__)("Select multiple","generateblocks-pro")} ${e}...`:`${(0,h.__)("All","generateblocks-pro")} ${e} (${(0,h.__)("or search for specific","generateblocks-pro")})`}}return L()?(0,h.__)("Select multiple","generateblocks-pro"):(0,h.__)("Search or select","generateblocks-pro");default:return"referrer"===e.type?(0,h.__)("Referrer URL or domain","generateblocks-pro"):(0,h.__)("Value","generateblocks-pro")}},ee=(0,g.useCallback)((async t=>{if(B())return C([]),void R(!1);if(!e.rule||!t)return C([]),void R(!1);try{let r;R(!0);const n=/^\d+$/.test(t.trim()),a=new URLSearchParams;if("hierarchical_object_selector"===v.value_type)n?a.set("id",t.trim()):a.set("search",t),r=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/search_hierarchical_posts?${a.toString()}`});else if("author_id"===e.rule)n?a.set("id",t.trim()):a.set("search",t),r=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/search_users?${a.toString()}`});else if(e.rule.startsWith("post:")){const o=e.rule.replace("post:","");a.set("post_type",o),n?a.set("id",t.trim()):a.set("search",t),r=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/search_posts?${a.toString()}`})}else if(e.rule.startsWith("taxonomy:")){const o=e.rule.replace("taxonomy:","");a.set("taxonomy",o),n?a.set("id",t.trim()):a.set("search",t),r=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/search_terms?${a.toString()}`})}else if(e.rule.startsWith("post_terms:")){const o=e.rule.replace("post_terms:","");a.set("taxonomy",o),n?a.set("id",t.trim()):a.set("search",t),r=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/search_terms?${a.toString()}`})}r?.success&&C(r.response)}catch(e){console.error("Error searching content:",e)}finally{R(!1)}}),[e.rule,v.value_type]),te=(a,o)=>{P(!0);const s={...e,[a]:o};if("type"===a){if(s.rule="",s.operator="",s.value="",o){const e={location:{operator:"is",rule:"general:front_page"},user_role:{operator:"is",rule:"general:logged_in"},date_time:{operator:"after",rule:"current_date"},device:{operator:"is",rule:"mobile"},query_arg:{operator:"exists",rule:"custom"},referrer:{operator:"contains",rule:"custom"},post_meta:{operator:"exists",rule:"custom"},user_meta:{operator:"exists",rule:"custom"},cookie:{operator:"exists",rule:"custom"},language:{operator:"is",rule:"locale"},options:{operator:"equals",rule:"custom"},author:{operator:"is",rule:"author_id"}}[o]||{operator:null,rule:null};e.operator&&(s.operator=e.operator),e.rule&&(s.rule=e.rule)}}else"operator"===a?L()!==["includes_any","includes_all","excludes_any","excludes_all"].includes(o)&&(s.value=""):"rule"===a&&(s.value="",c((e=>{const n={...e};return delete n[`${t}-${r}`],Object.keys(n).forEach((e=>{e.startsWith(`${t}-${r}-`)&&delete n[e]})),n})));n(t,r,s)};return(0,i.createElement)("div",{className:(()=>{let e="gb-condition-row";return T&&M()?e+=" gb-condition-complete":T&&!M()&&(e+=" gb-condition-incomplete"),e})()},(0,i.createElement)("div",{className:"gb-condition-row-main"},0===r?(0,i.createElement)("div",{className:"gb-logic-label"},(0,i.createElement)("span",{className:`gb-logic-operator gb-logic-${s.toLowerCase()}`},"IF")):(0,i.createElement)("div",{className:"gb-logic-label"},(0,i.createElement)("span",{className:`gb-logic-operator gb-logic-${s.toLowerCase()}`},s)),(0,i.createElement)("div",{className:"gb-condition-fields"},(0,i.createElement)(p.SelectControl,{value:e.type,onChange:e=>te("type",e),options:[{label:(0,h.__)("Select type","generateblocks-pro"),value:""},...Object.entries(o).sort((([,e],[,t])=>e.label.localeCompare(t.label))).map((([e,t])=>({label:t.label,value:e})))],className:"gb-condition-type",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),w&&(0,i.createElement)(p.Spinner,null),e.type&&!w&&(0,i.createElement)(p.SelectControl,{value:e.operator,onChange:e=>te("operator",e),options:[{label:(0,h.__)("Select operator","generateblocks-pro"),value:""},...Object.entries(f).map((([e,t])=>({label:t,value:e})))],className:"gb-condition-operator",disabled:w,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),e.type&&!w&&(0,i.createElement)(p.SelectControl,{value:e.rule,onChange:e=>te("rule",e),options:[{label:(0,h.__)("Select rule","generateblocks-pro"),value:""},...Object.entries(m).map((([e,t])=>({label:t,value:e})))],className:"gb-condition-rule",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),e.rule&&e.operator&&!q()&&(0,i.createElement)(i.Fragment,null,Q()&&!W()&&(0,i.createElement)(p.TextControl,{value:G(),onChange:e=>Y(e),placeholder:X(),className:"gb-condition-value",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),!(!e.operator||["exists","not_exists"].includes(e.operator))&&(void 0===v.needs_value||v.needs_value)&&!Q()&&!J()&&!F()&&(0,i.createElement)(p.TextControl,{value:e.value||"",onChange:e=>te("value",e),placeholder:X(),className:"gb-condition-value",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),F()&&!$()&&(0,i.createElement)(Ft,{currentDate:F()&&e.value&&!$()?z(e.value):null,onChange:e=>{const t=U(e);te("value",t)},placeholder:X()}),J()&&!L()&&(0,i.createElement)(Ar,{rule:e.rule,ruleMetadata:v,searchContent:ee,searchResults:k,recentItems:x,isSearching:N,value:(()=>{let n=l[`${t}-${r}`];if(!n&&e.value&&e.value.trim()){const a=`${t}-${r}-${e.value.trim()}`;n=l[a]}if(n)return e.value&&e.value.trim()&&!n.startsWith("ID: ")?`${n} (ID: ${e.value.trim()})`:n;if(!e.value||""===e.value){if("author_id"===e.rule)return"";if(e.rule.startsWith("post:")){const t=e.rule.replace("post:","");switch(t){case"post":return(0,h.__)("All Posts","generateblocks-pro");case"page":return(0,h.__)("All Pages","generateblocks-pro");default:const e=t.charAt(0).toUpperCase()+t.slice(1);return`${(0,h.__)("All","generateblocks-pro")} ${e}`}}else{if(e.rule.startsWith("taxonomy:")||e.rule.startsWith("post_terms:"))return(0,h.__)("All Terms","generateblocks-pro");if("child_of"===e.rule)return(0,h.__)("Any Parent","generateblocks-pro");if("parent_of"===e.rule)return(0,h.__)("Any Child","generateblocks-pro")}return(0,h.__)("All Items","generateblocks-pro")}return e.value&&e.value.trim()?`ID: ${e.value.trim()}`:""})(),onSelect:e=>{te("value",e.id.toString()),c((n=>({...n,[`${t}-${r}`]:e.title||e.name}))),C([])},placeholder:X(),isMultiValue:!1,readOnly:B(),className:"gb-inline-selector",currentSelectedValues:[e.value||""]}))),(0,i.createElement)(p.Button,{isDestructive:!0,variant:"tertiary",icon:Ge,onClick:()=>a(t,r),className:"gb-remove-condition",label:(0,h.__)("Remove condition","generateblocks-pro"),size:"compact",iconSize:"16"})),e.rule&&e.operator&&q()&&(0,i.createElement)("div",{className:"gb-condition-expansion"},Q()&&W()&&(0,i.createElement)("div",{className:"gb-custom-field-expansion"},(0,i.createElement)("div",{className:"gb-custom-field-inputs"},(0,i.createElement)(p.TextControl,{value:G(),onChange:e=>Y(e,Z()),label:X(),className:"gb-condition-custom-field"}),(0,i.createElement)(p.TextControl,{value:Z(),onChange:e=>Y(G(),e),label:(0,h.__)("Value to compare","generateblocks-pro"),className:"gb-condition-comparison-value"}))),$()&&(0,i.createElement)("div",{className:"gb-date-range-expansion"},(0,i.createElement)("div",{className:"gb-date-range-inputs"},(0,i.createElement)("div",{className:"gb-datetime-picker-field"},(0,i.createElement)("div",{className:"components-base-control__label"},(0,h.__)("Start Date & Time","generateblocks-pro")),(0,i.createElement)(Ft,{currentDate:K(),onChange:e=>H(e,j()),placeholder:(0,h.__)("Select start date","generateblocks-pro")})),(0,i.createElement)("div",{className:"gb-datetime-picker-field"},(0,i.createElement)("div",{className:"components-base-control__label"},(0,h.__)("End Date & Time","generateblocks-pro")),(0,i.createElement)(Ft,{currentDate:j(),onChange:e=>H(K(),e),placeholder:(0,h.__)("Select end date","generateblocks-pro")})))),J()&&L()&&(0,i.createElement)("div",{className:"gb-multi-select-expansion"},(0,i.createElement)("div",{className:"gb-multi-object-selector"},(0,i.createElement)("div",{className:"gb-selected-items"},0===V().length?(0,i.createElement)("div",{className:"gb-empty-selection"},(0,i.createElement)("span",null,(0,h.__)("No items selected","generateblocks-pro"))):V().map((e=>{const n=l[`${t}-${r}-${e}`]||`ID: ${e}`;return(0,i.createElement)("div",{key:e,className:"gb-selected-item"},(0,i.createElement)("span",null,n),(0,i.createElement)(p.Button,{icon:D,onClick:()=>(e=>{const n=V().filter((t=>t!==e));te("value",n.length>0?JSON.stringify(n):""),c((n=>{const a={...n};return delete a[`${t}-${r}-${e}`],a}))})(e),className:"gb-remove-selected-item",size:"compact",iconSize:"12",label:(0,h.__)("Remove item","generateblocks-pro")}))}))),(0,i.createElement)(Ar,{rule:e.rule,ruleMetadata:v,searchContent:ee,searchResults:k,recentItems:x,isSearching:N,value:I,onSelect:e=>{const n=V(),a=e.id.toString();if(!n.includes(a)){const o=[...n,a];te("value",JSON.stringify(o)),c((n=>({...n,[`${t}-${r}-${a}`]:e.title||e.name})))}O(""),C([])},placeholder:B()?(0,h.__)("Click to select days","generateblocks-pro"):(0,h.__)("Search to add items","generateblocks-pro"),isMultiValue:!0,readOnly:B(),className:"",currentSelectedValues:V()})))))};function Fr(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e))return e.map(Fr);if("object"==typeof e){const t={};for(const r in e)e.hasOwnProperty(r)&&(t[r]=Fr(e[r]));return t}return e}function $r(e,t){if(e===t)return!0;if(null===e||null===t||"object"!=typeof e||"object"!=typeof t)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const a of r){if(!n.includes(a))return!1;if(!$r(e[a],t[a]))return!1}return!0}function qr({onNavigateBack:e,onSave:t=null,initialConditions:r=null,initialTitle:n="",conditionId:a=null,isNew:o=!1,onUnsavedChanges:s=null}){const{conditionTypes:l,loading:c}=Je(),u=Te({mutationFn:async({title:e,conditions:t,category:r,status:n})=>{let a;a=r?Array.isArray(r)?r:[r]:[];const o=await Me()({path:"/generateblocks-pro/advanced-conditions/v1/conditions/",method:"POST",data:{title:e,conditions:t||{logic:"OR",groups:[]},category:a.length>0?a:"",status:n||"publish"}});if(o.success)return o.response;throw new Error("Failed to create condition")},onSuccess:()=>{Ue()}}),d=Te({mutationFn:async({id:e,title:t,conditions:r,category:n,status:a})=>{let o;o=n?Array.isArray(n)?n:[n]:[];const s=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/conditions/${e}`,method:"PUT",data:{title:t,category:o.length>0?o:"",conditions:r,status:a}});if(s.success)return s.response;throw new Error("Failed to update condition")},onSuccess:()=>{Ue()}}),m=(0,g.useRef)(null),b=!!a&&!o,f=(0,g.useMemo)((()=>({conditions:r?.groups?.length>0?Fr(r):{logic:"OR",groups:[{logic:"AND",conditions:[{type:"",rule:"",operator:"",value:""}]}]},conditionTitle:n||"",selectedObjectTitles:{},isSaving:!1})),[r,n]),[y,v]=(0,g.useState)(f.conditions),[_,w]=(0,g.useState)(f.conditionTitle),[E,k]=(0,g.useState)(""),[C,x]=(0,g.useState)("publish"),[S,I]=(0,g.useState)([]),[O,N]=(0,g.useState)(!1),[R,T]=(0,g.useState)(f.selectedObjectTitles),[P,M]=(0,g.useState)(f.isSaving),[D,A]=(0,g.useState)(null),[B,F]=(0,g.useState)(null);(0,g.useEffect)((()=>{v(r?.groups?.length>0?Fr(r):{logic:"OR",groups:[{logic:"AND",conditions:[{type:"",rule:"",operator:"",value:""}]}]}),w(n||""),T({})}),[r,n]),(0,g.useEffect)((()=>{b&&a&&(async()=>{try{const e=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/conditions/${a}`});if(e?.success){if(e.response?.gblocks_condition_cat?.length>0){const t=e.response.gblocks_condition_cat[0],r=await Me()({path:`/wp/v2/condition-categories/${t}`});r&&r.slug&&k(r.slug)}e.response?.status&&(x(e.response.status),F((t=>({...t,conditionStatus:e.response.status}))))}}catch(e){}})()}),[b,a]),(0,g.useEffect)((()=>{(async()=>{try{const e=await Me()({path:"/wp/v2/condition-categories"});e&&I(e)}catch(e){}})()}),[]),(0,g.useEffect)((()=>{v(f.conditions),w(f.conditionTitle),T(f.selectedObjectTitles),M(f.isSaving),A(null),F({conditions:Fr(f.conditions),conditionTitle:f.conditionTitle,conditionStatus:"publish"})}),[f]);const $=(0,g.useMemo)((()=>!!B&&!$r({conditions:y,conditionTitle:_,conditionStatus:C},B)),[y,_,C,B]);(0,g.useEffect)((()=>{s&&s($);const e=new CustomEvent("gb-conditions-unsaved-changes",{detail:{hasUnsavedChanges:$}});window.dispatchEvent(e)}),[$,s]),(0,g.useEffect)((()=>{if(!$)return;const e=e=>(e.preventDefault(),e.returnValue=(0,h.__)("You have unsaved changes. Are you sure you want to leave?","generateblocks-pro"),e.returnValue);return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[$]),(0,g.useEffect)((()=>{y.groups&&(m.current&&m.current.abort(),(async()=>{m.current=new AbortController;try{await q(m.current.signal)}catch(e){"AbortError"!==e.name&&console.debug("Title loading failed:",e)}})())}),[y.groups]),(0,g.useEffect)((()=>()=>{m.current&&m.current.abort()}),[]);const q=async e=>{const t={};for(let r=0;r<y.groups.length;r++){const n=y.groups[r];for(let a=0;a<n.conditions.length;a++){const o=n.conditions[a];if(e?.aborted)throw new Error("AbortError");if(!o.rule||!o.value)continue;const s=L(o.value);if(0!==s.length)if("date_time"!==o.type||"day_of_week"!==o.rule){if(o.rule.startsWith("post:")||o.rule.startsWith("taxonomy:")||o.rule.startsWith("post_terms:")||"child_of"===o.rule||"parent_of"===o.rule||"author_id"===o.rule)for(const n of s){if(!n)continue;if(e?.aborted)throw new Error("AbortError");const s=["includes_any","includes_all","excludes_any","excludes_all"].includes(o.operator)?`${r}-${a}-${n}`:`${r}-${a}`;if(t[s])continue;let i=null;if("author_id"===o.rule)i=await j(n,e);else if("child_of"===o.rule||"parent_of"===o.rule)i=await K(n,e);else if(o.rule.startsWith("post:")){const t=o.rule.replace("post:","");i=await z(n,t,e)}else if(o.rule.startsWith("taxonomy:")||o.rule.startsWith("post_terms:")){let t;t=o.rule.startsWith("taxonomy:")?o.rule.replace("taxonomy:",""):o.rule.replace("post_terms:",""),i=await U(n,t,e)}t[s]=i||`ID: ${n}`}}else for(const e of s)t[["includes_any","includes_all","excludes_any","excludes_all"].includes(o.operator)?`${r}-${a}-${e}`:`${r}-${a}`]=V(e)}}T(t)},L=e=>{if(!e)return[];try{const t=JSON.parse(e);if(Array.isArray(t))return t}catch(e){}return[e]},V=e=>({1:(0,h.__)("Monday","generateblocks-pro"),2:(0,h.__)("Tuesday","generateblocks-pro"),3:(0,h.__)("Wednesday","generateblocks-pro"),4:(0,h.__)("Thursday","generateblocks-pro"),5:(0,h.__)("Friday","generateblocks-pro"),6:(0,h.__)("Saturday","generateblocks-pro"),7:(0,h.__)("Sunday","generateblocks-pro")}[e]||e),z=async(e,t,r=null)=>{try{const n=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/search_posts?post_type=${t}`,signal:r});if(n?.success&&n.response){const t=n.response.find((t=>t.id.toString()===e.toString()));if(t)return t.title}const a=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/search_posts?post_type=${t}&id=${encodeURIComponent(e)}`,signal:r});if(a?.success&&a.response){const t=a.response.find((t=>t.id.toString()===e.toString()));if(t)return t.title}}catch(r){if("AbortError"===r.name)throw r;console.debug("Could not fetch post title for ID:",e,"Type:",t,r)}return null},U=async(e,t,r=null)=>{try{const n=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/search_terms?taxonomy=${t}`,signal:r});if(n?.success&&n.response){const t=n.response.find((t=>t.id.toString()===e.toString()));if(t)return t.name}const a=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/search_terms?taxonomy=${t}&id=${encodeURIComponent(e)}`,signal:r});if(a?.success&&a.response){const t=a.response.find((t=>t.id.toString()===e.toString()));if(t)return t.name}}catch(r){if("AbortError"===r.name)throw r;console.debug("Could not fetch term name for ID:",e,"Taxonomy:",t,r)}return null},K=async(e,t=null)=>{try{const r=await Me()({path:"/generateblocks-pro/advanced-conditions/v1/search_hierarchical_posts",signal:t});if(r?.success&&r.response){const t=r.response.find((t=>t.id.toString()===e.toString()));if(t)return t.title.replace(/^(\s*)+/,"")}const n=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/search_hierarchical_posts?id=${encodeURIComponent(e)}`,signal:t});if(n?.success&&n.response){const t=n.response.find((t=>t.id.toString()===e.toString()));if(t)return t.title.replace(/^(\s*)+/,"")}}catch(t){if("AbortError"===t.name)throw t;console.debug("Could not fetch hierarchical post title for ID:",e,t)}return null},j=async(e,t=null)=>{try{const r=await Me()({path:"/generateblocks-pro/advanced-conditions/v1/search_users",signal:t});if(r?.success&&r.response){const t=r.response.find((t=>t.id.toString()===e.toString()));if(t)return t.name||t.title}const n=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/search_users?id=${encodeURIComponent(e)}`,signal:t});if(n?.success&&n.response){const t=n.response.find((t=>t.id.toString()===e.toString()));if(t)return t.name||t.title}}catch(t){if("AbortError"===t.name)throw t;console.debug("Could not fetch user name for ID:",e,t)}return null},H=(e,t,r)=>{v((n=>{const a={...n};return a.groups[e].conditions[t]=r,a}))},Q=(e,t)=>{v((r=>({...r,groups:r.groups.map(((r,n)=>{if(n!==e)return r;const a=r.conditions.filter(((e,r)=>r!==t));return{...r,conditions:a}})).filter((e=>0<e.conditions.length))})))},W=async(e,r)=>{try{let n;if(n=b?await d.mutateAsync({id:a,title:e,conditions:r,category:E,status:C}):await u.mutateAsync({title:e,conditions:r,category:E,status:C}),!n)throw new Error("Failed to save condition");t&&t({id:n.id||a,title:e,conditions:r,isNew:!b})}catch(e){throw console.error("Error saving condition:",e),A((0,h.__)("Failed to save condition. Please try again.","generateblocks-pro")),e}},G=!o||_.trim();return(0,i.createElement)("div",{className:"gb-conditions-editor"},(0,i.createElement)("div",{className:"gb-conditions-editor-header"},(0,i.createElement)("div",{className:"gb-conditions-title-section"},(0,i.createElement)(p.TextControl,{label:(0,h.__)("Condition Name","generateblocks-pro"),value:_,onChange:w,placeholder:(0,h.__)("Enter condition name","generateblocks-pro"),className:"gb-condition-title-input",disabled:P,hideLabelFromVision:!0}),(0,i.createElement)(p.SelectControl,{label:(0,h.__)("Category","generateblocks-pro"),value:E,onChange:e=>{"new"===e?N(!0):k(e)},options:[{label:(0,h.__)("No category","generateblocks-pro"),value:""},...S.map((e=>({label:e.name,value:e.slug}))),{label:(0,h.__)("+ Add new category","generateblocks-pro"),value:"new"}],className:"gb-condition-category-select",disabled:P,hideLabelFromVision:!0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})),(0,i.createElement)("div",{className:"gb-conditions-header-actions"},(0,i.createElement)(p.SelectControl,{label:(0,h.__)("Status","generateblocks-pro"),value:C,onChange:x,options:[{label:(0,h.__)("Published","generateblocks-pro"),value:"publish"},{label:(0,h.__)("Draft","generateblocks-pro"),value:"draft"}],className:"gb-condition-status-select",disabled:P,hideLabelFromVision:!0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,i.createElement)(p.Button,{variant:"secondary",onClick:()=>{if($){const e=(0,h.__)("You have unsaved changes. Are you sure you want to go back without saving?","generateblocks-pro");if(!window.confirm(e))return}e()},disabled:P},(0,h.__)("Cancel","generateblocks-pro")),(0,i.createElement)(p.Button,{variant:"primary",onClick:async()=>{try{if(A(null),!_.trim())return void A((0,h.__)("Please enter a condition name.","generateblocks-pro"));const e=(e=>{const t=[];return e.groups&&0!==e.groups.length?(e.groups.forEach(((e,r)=>{e.conditions&&0!==e.conditions.length?e.conditions.filter((e=>e.type)).forEach((n=>{const a=e.conditions.indexOf(n)+1,o=(0,h.sprintf)(
// translators: %1$s is the condition number (1-based index), %2$s is the group number (1-based index).
// translators: %1$s is the condition number (1-based index), %2$s is the group number (1-based index).
(0,h.__)("Condition %1$s in Group %2$s","generateblocks-pro"),a,r+1);n.operator||t.push(`${o}: ${(0,h.__)("Please select an operator.","generateblocks-pro")}`),n.rule||t.push(`${o}: ${(0,h.__)("Please select a rule.","generateblocks-pro")}`)})):t.push((0,h.sprintf)(
// translators: %d is the group number (1-based index).
// translators: %d is the group number (1-based index).
(0,h.__)("Group %d has no conditions.","generateblocks-pro"),r+1))})),{isValid:0===t.length,errors:t}):{isValid:!0,errors:[]}})(y);if(!e.isValid){const t=(0,h.__)("Please complete the following:","generateblocks-pro")+"\n\n"+e.errors.join("\n");return void A(t)}if(!y.groups||0===y.groups.length)return void await W(_,{logic:"OR",groups:[]});M(!0);const t=(e=>{if(!e.groups)return e;const t=e.groups.map((e=>({...e,conditions:e.conditions.filter((e=>!!(e.type&&e.operator&&e.rule)||(e.type||e.operator||e.rule||e.value,!1)))}))).filter((e=>e.conditions.length>0));return{...e,groups:t}})(y);if(!(await Me()({path:"/generateblocks-pro/advanced-conditions/v1/validate_conditions",method:"POST",data:{conditions:t}})).success)return void A((0,h.__)("Condition validation failed. Please check your configuration and try again.","generateblocks-pro"));await W(_,t)}catch(e){console.error("Error saving condition:",e);let t=(0,h.__)("Failed to save condition. Please try again.","generateblocks-pro");e.message&&e.message.includes("validation")&&(t=(0,h.__)("Condition validation failed. Please check that all fields are properly filled out.","generateblocks-pro")),A(t)}finally{M(!1)}},disabled:!_.trim()||P,isBusy:P},P?(0,h.__)("Saving","generateblocks-pro"):(0,h.__)("Save Conditions","generateblocks-pro")))),(0,i.createElement)("div",{className:"gb-conditions-content"},$&&(0,i.createElement)(p.Notice,{status:"info",isDismissible:!1,className:"gb-conditions-unsaved-notice"},(0,h.__)("You have unsaved changes.","generateblocks-pro")),!!D&&(0,i.createElement)(p.Notice,{status:"error",isDismissible:!1,className:"gb-conditions-error-notice"},(0,i.createElement)("div",{style:{whiteSpace:"pre-line"}},D)),c?(0,i.createElement)("div",{className:"gb-loading"},(0,i.createElement)(p.Spinner,null),(0,i.createElement)("p",null,(0,h.__)("Loading condition types","generateblocks-pro"))):(0,i.createElement)(i.Fragment,null,G&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"gb-conditions-groups"},y.groups&&0<y.groups.length?y.groups.map(((e,t)=>(0,i.createElement)("div",{key:t,className:"gb-condition-group"},(0,i.createElement)("div",{className:"gb-group-header"},(0,i.createElement)("div",{className:"gb-group-logic"},(0,i.createElement)("span",{className:"gb-group-label"},(0,h.__)("Group Logic","generateblocks-pro")),(0,i.createElement)(p.SelectControl,{value:e.logic,onChange:e=>((e,t)=>{v((r=>{const n={...r};return n.groups[e].logic=t,n}))})(t,e),options:[{label:(0,h.__)("AND","generateblocks-pro"),value:"AND"},{label:(0,h.__)("OR","generateblocks-pro"),value:"OR"}],className:"gb-group-logic-select",disabled:P,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})),1<y.groups.length&&(0,i.createElement)(p.Button,{isDestructive:!0,variant:"tertiary",icon:Ge,onClick:()=>(e=>{v((t=>({...t,groups:t.groups.filter(((t,r)=>r!==e))})))})(t),className:"gb-remove-group",label:(0,h.__)("Remove group","generateblocks-pro"),size:"compact",iconSize:"16",disabled:P})),(0,i.createElement)("div",{className:"gb-group-conditions"},e.conditions.map(((r,n)=>(0,i.createElement)(Br,{key:n,condition:r,groupIndex:t,conditionIndex:n,onUpdate:H,onRemove:Q,conditionTypes:l,logicOperator:e.logic,selectedObjectTitles:R,setSelectedObjectTitles:T})))),(0,i.createElement)(p.Button,{variant:"secondary",icon:et,onClick:()=>(e=>{v((t=>({...t,groups:t.groups.map(((t,r)=>r===e?{...t,conditions:[...t.conditions,{type:"",rule:"",operator:"",value:""}]}:t))})))})(t),className:"gb-add-condition",disabled:P},(0,h.__)("Add","generateblocks-pro")," ",e.logic.toUpperCase()," ",(0,h.__)("condition","generateblocks-pro"))))):(0,i.createElement)("div",{className:"gb-no-conditions"},(0,i.createElement)("p",null,(0,h.__)("No conditions set","generateblocks-pro")),(0,i.createElement)(p.Button,{variant:"primary",icon:et,onClick:()=>{v({logic:"OR",groups:[{logic:"AND",conditions:[{type:"",rule:"",operator:"",value:""}]}]})},disabled:P},(0,h.__)("Add first condition","generateblocks-pro")))),y.groups&&0===y.groups.length&&G&&(0,i.createElement)("div",{className:"gb-conditions-help-text"},(0,i.createElement)("p",null,(0,h.__)("Create your first condition to control when this content should appear.","generateblocks-pro"))),y.groups&&0<y.groups.length&&(0,i.createElement)(p.Button,{variant:"tertiary",icon:et,onClick:()=>{v((e=>({...e,logic:e.logic||"OR",groups:[...e.groups,{logic:"AND",conditions:[{type:"",rule:"",operator:"",value:""}]}]})))},className:"gb-add-group",disabled:P},"AND"===(y.logic||"OR")?(0,h.__)("Add AND condition group","generateblocks-pro"):(0,h.__)("Add OR condition group","generateblocks-pro")),y.groups&&1<y.groups.length&&(0,i.createElement)("div",{className:"gb-top-level-logic"},(0,i.createElement)(p.SelectControl,{label:(0,h.__)("How should these condition groups be combined?","generateblocks-pro"),value:y.logic||"OR",onChange:e=>{v((t=>({...t,logic:e})))},options:[{label:(0,h.__)("OR - Show if ANY group matches","generateblocks-pro"),value:"OR"},{label:(0,h.__)("AND - Show only if ALL groups match","generateblocks-pro"),value:"AND"}],help:"OR"===(y.logic||"OR")?(0,h.__)("Content will show if any condition group is satisfied.","generateblocks-pro"):(0,h.__)("Content will show only if all condition groups are satisfied.","generateblocks-pro"),disabled:P,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})),(0,i.createElement)(Dt,{conditions:y,onConditionsImport:e=>{v(e)}})),o&&!_.trim()&&(0,i.createElement)("div",{className:"gb-conditions-help-text"},(0,i.createElement)("p",null,(0,h.__)("Enter a condition name above to start building your conditions.","generateblocks-pro"))))),(0,i.createElement)(At,{isOpen:O,onClose:()=>N(!1),onCreateCategory:async({name:e,slug:t})=>{try{await Me()({path:"/wp/v2/condition-categories",method:"POST",data:{name:e,slug:t}})&&(I([...S,{name:e,slug:t}]),k(t))}catch(e){throw e}}}))}function Lr(e){return(0,i.createElement)(P,{client:ze()},(0,i.createElement)(qr,{...e}))}const Vr=(0,g.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(m.Path,{d:"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"}));function zr({condition:e,onClose:t}){const{conditionTypes:r,getRulesForType:n,getOperatorsForType:a}=Je(),{loadObjectTitles:o}=function(){const e=ze();return{loadObjectTitles:(0,g.useCallback)((async t=>{if(!t||0===t.length)return{};const r=[],n={};if(t.forEach((t=>{const a=["object-title",t.type,t.id],o=e.getQueryData(a);o?n[`${t.type}-${t.id}`]=o:r.push(t)})),0===r.length)return n;const a=await Me()({path:"/generateblocks-pro/advanced-conditions/v1/batch_object_titles",method:"POST",data:{requests:r}});return a.success&&a.response?(Object.entries(a.response).forEach((([t,r])=>{const[n,a]=t.split("-");e.setQueryData(["object-title",n,a],r)})),{...n,...a.response}):n}),[e])}}(),[s,l]=(0,g.useState)({}),[c,u]=(0,g.useState)({}),[d,m]=(0,g.useState)({}),[b,f]=(0,g.useState)(!0);(0,g.useEffect)((()=>{(async()=>{try{f(!0);const t=e.gbConditions||{groups:[]},r=new Set,o={},s={};t.groups?.forEach((e=>{e.conditions?.forEach((e=>{e.type&&r.add(e.type)}))}));for(const e of r)try{const t=await n(e);o[e]=t;const r=await a(e);s[e]=r}catch(t){console.error(`Error loading data for type ${e}:`,t)}u(o),m(s),await y(t)}catch(e){console.error("Error loading condition data:",e)}finally{f(!1)}})()}),[e,n,a,o]);const y=async e=>{const t=[];if(e.groups?.forEach((e=>{e.conditions?.forEach((e=>{if(!e.rule||!e.value)return;const r=v(e.value);0!==r.length&&(e.rule.startsWith("post:")||e.rule.startsWith("taxonomy:")||e.rule.startsWith("post_terms:")||"child_of"===e.rule||"parent_of"===e.rule||"date_time"===e.type&&"day_of_week"===e.rule)&&r.forEach((r=>{r&&t.push({type:e.type,rule:e.rule,value:r})}))}))})),t.length>0){const e=t.map((e=>{let t;return t=e.rule.startsWith("post:")?"post":e.rule.startsWith("taxonomy:")||e.rule.startsWith("post_terms:")?"term":"author_id"===e.rule?"user":e.type,{type:t,id:e.value}})),r=await o(e);l(r)}},v=e=>{if(!e)return[];try{const t=JSON.parse(e);if(Array.isArray(t))return t}catch(e){}return[e]},_=e.gbConditions||{groups:[]},w=_.groups&&0<_.groups.length;return(0,i.createElement)(p.Modal,{title:e.title?.rendered||e.title||(0,h.__)("Untitled Condition","generateblocks-pro"),onRequestClose:t,className:"gb-modal-condition-details",size:"medium"},(0,i.createElement)("div",{className:"gb-modal-details-content"},b?(0,i.createElement)("div",{className:"gb-modal-loading"},(0,i.createElement)(p.Spinner,null),(0,i.createElement)("p",null,(0,h.__)("Loading condition details","generateblocks-pro"))):(0,i.createElement)("div",{className:"gb-modal-details-body"},w?(0,i.createElement)(i.Fragment,null,1<_.groups.length&&(0,i.createElement)("div",{className:"gb-modal-main-logic"},(0,i.createElement)("strong",null,(0,h.__)("Overall Logic:","generateblocks-pro"))," ","AND"===_.logic?(0,h.__)("ALL condition groups must match","generateblocks-pro"):(0,h.__)("ANY condition group can match","generateblocks-pro")),(0,i.createElement)("div",{className:"gb-modal-condition-groups"},_.groups.map(((e,t)=>(0,i.createElement)("div",{key:t,className:"gb-modal-condition-group"},(0,i.createElement)("div",{className:"gb-modal-group-header"},(0,i.createElement)("h4",null,1<_.groups.length?`${(0,h.__)("Group","generateblocks-pro")} ${t+1}`:(0,h.__)("Conditions","generateblocks-pro")),1<e.conditions.length&&(0,i.createElement)("span",{className:"gb-modal-group-logic-badge"},"AND"===e.logic?(0,h.__)("ALL must match","generateblocks-pro"):(0,h.__)("ANY can match","generateblocks-pro"))),(0,i.createElement)("div",{className:"gb-modal-condition-list"},e.conditions.filter((e=>e.type&&e.rule&&e.operator)).map(((e,t)=>{return(0,i.createElement)("div",{key:t,className:"gb-modal-condition-item"},(0,i.createElement)("div",{className:"gb-modal-condition-summary"},(0,i.createElement)("span",{className:"gb-modal-condition-type-badge"},(o=e.type,r[o]?.label||o)),(0,i.createElement)("span",{className:"gb-modal-condition-rule-badge"},((e,t)=>c[e]?.[t]||t)(e.type,e.rule)),(0,i.createElement)("span",{className:"gb-modal-condition-operator-badge"},((e,t)=>d[e]?.[t]||t)(e.type,e.operator))),(!(!(n=e).value||!n.value.trim())||(a=n.operator,!["exists","not_exists"].includes(a)))&&(0,i.createElement)("div",{className:"gb-modal-condition-value"},(0,i.createElement)("strong",null,(0,h.__)("Value:","generateblocks-pro"))," ",(e=>{if(!e.value)return(0,h.__)("(no value)","generateblocks-pro");if("date_time"===e.type&&"day_of_week"===e.rule){const t=v(e.value);return 0===t.length?(0,h.__)("(no days selected)","generateblocks-pro"):t.map((e=>e)).join(", ")}if(e.value.includes("|")){const t=e.value.split("|",2);return(0,i.createElement)("div",{className:"gb-modal-custom-field-value"},(0,i.createElement)("div",null,(0,i.createElement)("strong",null,(0,h.__)("Field:","generateblocks-pro"))," ",t[0]),t[1]&&(0,i.createElement)("div",null,(0,i.createElement)("strong",null,(0,h.__)("Value:","generateblocks-pro"))," ",t[1]))}if(e.value.includes(",")&&"between"===e.operator){const t=e.value.split(",").map((e=>e.trim()));return(0,i.createElement)("div",{className:"gb-modal-date-range-value"},(0,i.createElement)("div",null,(0,i.createElement)("strong",null,(0,h.__)("From:","generateblocks-pro"))," ",t[0]),(0,i.createElement)("div",null,(0,i.createElement)("strong",null,(0,h.__)("To:","generateblocks-pro"))," ",t[1]||(0,h.__)("(not set)","generateblocks-pro")))}const t=v(e.value);if(0===t.length)return e.value;const r=t.map((t=>{let r;return r=e.rule.startsWith("post:")?"post":e.rule.startsWith("taxonomy:")||e.rule.startsWith("post_terms:")?"term":"author_id"===e.rule?"user":e.type,s[`${r}-${t}`]||t}));return 1===r.length?r[0]:r.join(", ")})(e)));var n,a,o})))))))):(0,i.createElement)("div",{className:"gb-modal-no-conditions"},(0,i.createElement)("p",null,(0,h.__)("This condition has no rules configured.","generateblocks-pro"))))))}function Ur({condition:e,onClose:t}){const[r,n]=(0,g.useState)(null),[a,o]=(0,g.useState)(!0),[s,l]=(0,g.useState)(null),c=async()=>{try{o(!0),l(null);const t=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/conditions/${e.id}/usage`});t.success?n(t.response):l(t.response||(0,h.__)("Failed to load usage data","generateblocks-pro"))}catch(e){console.error("Error loading usage data:",e),l((0,h.__)("Error loading usage data. Please try again.","generateblocks-pro"))}finally{o(!1)}};(0,g.useEffect)((()=>{c()}),[e.id]);const u=r&&r.usage&&0<Object.keys(r.usage).length;return(0,i.createElement)(p.Modal,{title:e.title?.rendered||e.title||(0,h.__)("Untitled Condition","generateblocks-pro"),onRequestClose:t,className:"gb-modal-condition-usage",size:"medium"},(0,i.createElement)("div",{className:"gb-modal-usage-content"},a&&(0,i.createElement)("div",{className:"gb-modal-loading"},(0,i.createElement)(p.Spinner,null),(0,i.createElement)("p",null,(0,h.__)("Searching for usage","generateblocks-pro"))),!a&&s&&(0,i.createElement)("div",{className:"gb-modal-error"},(0,i.createElement)("p",{style:{color:"#d63638"}},s),(0,i.createElement)(p.Button,{variant:"secondary",onClick:c},(0,h.__)("Try Again","generateblocks-pro"))),!a&&!s&&(0,i.createElement)("div",{className:"gb-modal-usage-body"},!u&&(0,i.createElement)("div",{className:"gb-modal-no-usage"},(0,i.createElement)("p",{style:{fontSize:"16px",textAlign:"center",color:"#666"}},(0,h.__)("This condition is not currently being used anywhere on your site.","generateblocks-pro")),(0,i.createElement)("p",{style:{fontSize:"14px",textAlign:"center",color:"#999"}},(0,h.__)("You can safely delete it, or keep it for future use.","generateblocks-pro"))),u&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"gb-modal-usage-summary"},(0,i.createElement)("p",{style:{fontSize:"14px",color:"#666",margin:"0"}},(0,h.__)("Found usage in","generateblocks-pro")," ",(0,i.createElement)("strong",null,r.total)," ",1===r.total?(0,h.__)("location","generateblocks-pro"):(0,h.__)("locations","generateblocks-pro"))),(0,i.createElement)("div",{className:"gb-modal-usage-sections"},Object.entries(r.usage).map((([e,t])=>(0,i.createElement)("div",{key:e,className:"gb-modal-usage-section"},(0,i.createElement)("h4",{className:"gb-modal-usage-section-title"},t.label,(0,i.createElement)("span",{className:"gb-modal-usage-count"},"(",t.total,")")),(0,i.createElement)("div",{className:"gb-modal-usage-items"},t.items.map((e=>(0,i.createElement)("div",{key:`${e.type}-${e.id}`,className:"gb-modal-usage-item"},(0,i.createElement)("div",{className:"gb-modal-usage-item-main"},(0,i.createElement)("div",{className:"gb-modal-usage-item-title"},(0,i.createElement)("strong",null,e.title),(e=>{const t={publish:(0,h.__)("Published","generateblocks-pro"),draft:(0,h.__)("Draft","generateblocks-pro"),private:(0,h.__)("Private","generateblocks-pro")},r={publish:{bg:"#d1fae5",color:"#065f46",border:"#a7f3d0"},draft:{bg:"#fef3c7",color:"#92400e",border:"#fcd34d"},private:{bg:"#e0e7ff",color:"#3730a3",border:"#c7d2fe"}},n=r[e]||r.draft;return(0,i.createElement)("span",{style:{background:n.bg,color:n.color,border:`1px solid ${n.border}`,padding:"2px 6px",borderRadius:"4px",fontSize:"11px",fontWeight:"500",textTransform:"uppercase"}},t[e]||e)})(e.status)),(0,i.createElement)("div",{className:"gb-modal-usage-item-meta"},(0,i.createElement)("span",{className:"gb-modal-usage-item-type"},e.type_label),(0,i.createElement)("span",{className:"gb-modal-usage-item-usage-type"},(e=>({overlay_display_condition:(0,h.__)("Overlay Panel Display Condition","generateblocks-pro"),block_attributes:(0,h.__)("Block Attributes","generateblocks-pro")}[e]||e))(e.usage_type)))),(0,i.createElement)("div",{className:"gb-modal-usage-item-actions"},e.edit_url&&(0,i.createElement)(p.Button,{variant:"secondary",size:"compact",icon:tt,href:e.edit_url,target:"_blank",iconSize:"14"},(0,h.__)("Edit","generateblocks-pro")),e.view_url&&(0,i.createElement)(p.Button,{variant:"tertiary",size:"compact",icon:M,href:e.view_url,target:"_blank",iconSize:"14"},(0,h.__)("View","generateblocks-pro")))))))))))))))}function Kr({conditions:e,onEditCondition:t,refreshKey:r}){const n=Te({mutationFn:async e=>{const t=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/conditions/${e}`,method:"DELETE"});if(t.success)return t.response;throw new Error("Failed to delete condition")},onSuccess:()=>{Ue()}}),a=Te({mutationFn:async({id:e,status:t})=>{const r=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/conditions/${e}`,method:"PUT",data:{status:t}});if(r.success)return r.response;throw new Error("Failed to update condition status")},onSuccess:()=>{Ue()}}),o=Te({mutationFn:async e=>{const t=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/conditions/${e}`});if(!t?.success)throw new Error("Failed to fetch condition for duplication");const r=t.response;let n=r.title;"object"==typeof n&&n?.rendered&&(n=n.rendered);let a=r.gblocks_condition_cat||r.category||[];Array.isArray(a)||(a=a?[a]:[]);let o=[];if(a.length>0){const e=await Me()({path:"/wp/v2/condition-categories?include="+a.join(",")});e&&Array.isArray(e)&&(o=e.map((e=>e.slug)))}const s=r.gbConditions||r.conditions||{logic:"OR",groups:[]},i=await Me()({path:"/generateblocks-pro/advanced-conditions/v1/conditions/",method:"POST",data:{title:n+" (Copy)",conditions:s,category:o,status:r.status||"publish"}});if(i.success)return i.response;throw new Error("Failed to duplicate condition")},onSuccess:()=>{Ue(),ze().invalidateQueries({queryKey:["condition-categories"]})}}),[s,l]=(0,g.useState)(null),[c,u]=(0,g.useState)(null),[d,m]=(0,g.useState)(null),[f,y]=(0,g.useState)([]),v=ze();(0,g.useEffect)((()=>{(async()=>{try{const e=await Me()({path:"/wp/v2/condition-categories"});e&&y(e)}catch(e){}})()}),[r]);const _=(0,g.useMemo)((()=>[{id:"name",header:(0,h.__)("Name","generateblocks-pro"),accessorKey:"title.rendered",cell:e=>{const r=e.row.original,n="draft"===r.status;return(0,i.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},(0,i.createElement)(p.Button,{variant:"link",onClick:()=>t(r)},e.getValue()),n&&(0,i.createElement)("span",{style:{color:"#999",fontSize:"0.9em"}},"(",(0,h.__)("draft","generateblocks-pro"),")"))}},{id:"category",header:(0,h.__)("Category","generateblocks-pro"),cell:e=>{const t=e.row.original,r=t.gblocks_condition_cat?.[0];if(!r)return(0,i.createElement)("span",{className:"gb-condition-category gb-condition-category--uncategorized"},(0,h.__)("Uncategorized","generateblocks-pro"));const n=f.find((e=>e.id===r)),a=n?n.name:`ID: ${r}`;return(0,i.createElement)("span",{className:"gb-condition-category"},a)}},{id:"conditions_count",header:(0,h.__)("Conditions","generateblocks-pro"),cell:e=>{const t=e.row.original,r=t.gbConditions||{groups:[]},n=r.groups?.reduce(((e,t)=>e+(t.conditions?.filter((e=>e.type&&e.rule&&e.operator)).length||0)),0)||0;return 0===n?(0,i.createElement)(i.Fragment,null,(0,h.__)("No conditions","generateblocks-pro")):(0,i.createElement)(p.Button,{variant:"link",iconSize:"14",onClick:()=>u(t),className:"gb-conditions-details-button"},n," ",1===n?(0,h.__)("condition","generateblocks-pro"):(0,h.__)("conditions","generateblocks-pro"))}},{id:"actions",header:null,cell:e=>{const{status:r,id:n}=e.row.original;return(0,i.createElement)(p.DropdownMenu,{icon:je,label:(0,h.__)("More options","generateblocks-pro"),className:"gb-cloud-public-keys__dropdown",popoverProps:{placement:"left"}},(({onClose:s})=>(0,i.createElement)(i.Fragment,null,(0,i.createElement)(p.MenuGroup,null,(0,i.createElement)(p.MenuItem,{onClick:()=>{t(e.row.original),s()},icon:He},(0,h.__)("Edit Condition","generateblocks-pro")),(0,i.createElement)(p.MenuItem,{onClick:()=>{m(e.row.original),s()},icon:Vr},(0,h.__)("Check Usage","generateblocks-pro")),(0,i.createElement)(p.MenuItem,{onClick:()=>{o.mutateAsync(n).then((e=>{v.invalidateQueries({queryKey:["conditions"]}),e&&t(e)})),s()},icon:Qe},(0,h.__)("Duplicate","generateblocks-pro")),(0,i.createElement)(p.MenuItem,{onClick:()=>{const e="publish"===r?"draft":"publish";a.mutateAsync({id:n,status:e}).then((()=>{v.invalidateQueries({queryKey:["conditions"]})})),s()},icon:"publish"===r?We:b},"publish"===r?(0,h.__)("Set as Draft","generateblocks-pro"):(0,h.__)("Publish","generateblocks-pro")),(0,i.createElement)(p.MenuItem,{isDestructive:!0,onClick:()=>{l(n),s()},icon:Ge},(0,h.__)("Delete Condition","generateblocks-pro"))))))}}]),[t,f]);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"gb-dashboard-table-wrapper"},e.length?(0,i.createElement)(Ze.Table,{className:"gb-dashboard-table table-view-list",columns:_,data:e,"aria-labelledby":"conditions-table-header"}):(0,i.createElement)("p",{style:{marginTop:"0"}},(0,h.__)("No conditions found.","generateblocks-pro"))),!!s&&(0,i.createElement)(p.Modal,{title:(0,h.__)("Confirm","generateblocks-pro"),isDismissible:!1,onRequestClose:()=>null,style:{maxWidth:"300px"}},(0,i.createElement)("div",{style:{marginBottom:"1em"}},(0,h.__)("This will permanently delete this condition. You cannot undo this action.","generateblocks-pro")),(0,i.createElement)(p.Button,{variant:"primary",onClick:async()=>{await n.mutateAsync(s),v.invalidateQueries({queryKey:["conditions"]}),l(null)}},(0,h.__)("OK","generateblocks-pro")),(0,i.createElement)(p.Button,{variant:"tertiary",onClick:()=>l(null)},(0,h.__)("Cancel","generateblocks-pro"))),c&&(0,i.createElement)(zr,{condition:c,onClose:()=>u(null)}),d&&(0,i.createElement)(Ur,{condition:d,onClose:()=>m(null)}))}const jr={taxonomyConfig:{slug:"gblocks_condition_cat",restBase:"condition-categories",labels:{singular:(0,h.__)("Category","generateblocks-pro"),plural:(0,h.__)("Categories","generateblocks-pro"),uncategorized:(0,h.__)("Uncategorized","generateblocks-pro"),itemsCount:"conditions"}},itemsEndpoint:"/generateblocks-pro/advanced-conditions/v1/conditions",itemsTaxonomyField:"gblocks_condition_cat",manageEndpoint:"/generateblocks-pro/advanced-conditions/v1/manage_category"};function Hr({onNavigateBack:e,onCategoriesChange:t}){return(0,i.createElement)("div",{className:"gb-categories-manager"},(0,i.createElement)(nt,{...jr,onNavigateBack:e,onTaxonomyChange:t}))}function Qr({isModalMode:e=!1,onConditionSelect:t=null,onCreateCondition:r=null}={}){const[n,a]=(0,g.useState)((()=>{const e=new URLSearchParams(window.location.search);return parseInt(e.get("conditionPage")||"1",10)})),[o,s]=(0,g.useState)("list"),[l,c]=(0,g.useState)({conditionId:null,initialConditions:null,initialTitle:"",isNew:!1}),{data:u,isLoading:d}=Ye(20,n),m=u?.conditions||[],b=u?.pages||1,[f,y]=(0,g.useState)(0),v=ze(),_=(0,g.useMemo)((()=>m&&m.length>0?m.map((e=>{const t=e.title?.rendered||e.title||"Untitled";return{...e,title:{...e.title,rendered:t}}})):[]),[m]);(0,g.useEffect)((()=>{if(e)return;const t=new URLSearchParams(window.location.search),r=t.get("edit");if(t.get("categories"))s("categories");else if(r&&"new"!==r){const e=_.find((e=>e.id.toString()===r));e&&(c({conditionId:e.id,initialConditions:e.gbConditions||{logic:"OR",groups:[]},initialTitle:e.title?.rendered||"",isNew:!1}),s("edit"))}else"new"===r?(c({conditionId:null,initialConditions:{logic:"OR",groups:[]},initialTitle:"",isNew:!0}),s("edit")):s("list")}),[_,e]);const w=(t,r=null)=>{if(e)return;const n=new URL(window.location);"edit"===t?(r?n.searchParams.set("edit",r):n.searchParams.set("edit","new"),n.searchParams.delete("categories")):"categories"===t?(n.searchParams.set("categories","manage"),n.searchParams.delete("edit")):(n.searchParams.delete("edit"),n.searchParams.delete("categories")),window.history.pushState({},"",n)};(0,g.useEffect)((()=>{if(e)return;const t=new URL(window.location);t.searchParams.set("conditionPage",n),window.history.replaceState({},"",t)}),[n,e]);const E=e=>{a(e)},k=()=>{s("list"),w("list"),c({conditionId:null,initialConditions:null,initialTitle:"",isNew:!1})};if((0,g.useEffect)((()=>{if(e)return;const t=()=>{const e=new URLSearchParams(window.location.search),t=e.get("edit");if(e.get("categories"))s("categories");else if(t&&"new"!==t){const e=_.find((e=>e.id.toString()===t));e&&(c({conditionId:e.id,initialConditions:e.gbConditions||{logic:"OR",groups:[]},initialTitle:e.title?.rendered||"",isNew:!1}),s("edit"))}else"new"===t?(c({conditionId:null,initialConditions:{logic:"OR",groups:[]},initialTitle:"",isNew:!0}),s("edit")):s("list")};return window.addEventListener("popstate",t),()=>window.removeEventListener("popstate",t)}),[_,e]),d)return(0,i.createElement)("div",{className:"gb-dashboard-admin"},(0,i.createElement)(p.Spinner,null));const C={list:(0,i.createElement)("div",{className:"gb-dashboard-admin"},(0,i.createElement)("div",{className:"gb-dashboard-admin__header"},(0,i.createElement)("div",{className:"gb-dashboard-admin__header-buttons"},(0,i.createElement)(p.Button,{variant:"primary",onClick:()=>{e&&r?r():(c({conditionId:null,initialConditions:{logic:"OR",groups:[]},initialTitle:"",isNew:!0}),s("edit"),w("edit"))}},(0,h.__)("Add New","generateblocks-pro"))),(0,i.createElement)("div",{className:"gb-dashboard-admin__header-buttons-right"},(0,i.createElement)(p.Button,{variant:"secondary",onClick:()=>{s("categories"),w("categories")}},(0,h.__)("Manage Categories","generateblocks-pro")))),(0,i.createElement)("div",{className:"gb-dashboard-admin__inner"},(0,i.createElement)(Kr,{conditions:_,onEditCondition:r=>{e&&t?t(r):(c({conditionId:r.id,initialConditions:r.gbConditions||{logic:"OR",groups:[]},initialTitle:r.title?.rendered||"",isNew:!1}),s("edit"),w("edit",r.id))},refreshKey:f}),b>1&&(0,i.createElement)("div",{className:"gb-dashboard__pagination"},(0,i.createElement)(p.Button,{disabled:1===n,onClick:()=>E(n-1),variant:"secondary"},(0,h.__)("Previous","generateblocks-pro")),(0,i.createElement)("span",null,(0,h.sprintf)(
// translators: %1$s: current page, %2$s: total pages
// translators: %1$s: current page, %2$s: total pages
(0,h.__)("Page %1$s of %2$s","generateblocks-pro"),n,b)),(0,i.createElement)(p.Button,{disabled:n===b,onClick:()=>E(n+1),variant:"secondary"},(0,h.__)("Next","generateblocks-pro"))))),edit:(0,i.createElement)("div",{className:"gb-dashboard-admin"},(0,i.createElement)(Lr,{onNavigateBack:k,onSave:async()=>{v.invalidateQueries({queryKey:["conditions"]}),k()},conditionId:l.conditionId,initialConditions:l.initialConditions,initialTitle:l.initialTitle,isNew:l.isNew})),categories:(0,i.createElement)("div",{className:"gb-dashboard-admin"},(0,i.createElement)(Hr,{onNavigateBack:()=>{s("list"),w("list")},onCategoriesChange:()=>{y((e=>e+1))}}))},x=e?{list:C.list,categories:C.categories}:C,S=e?["list","categories"]:["list","edit","categories"];return(0,i.createElement)(A,{currentView:o,views:x,viewOrder:S,className:"gb-conditions-dashboard",minHeight:400})}function Wr(e){return(0,i.createElement)(P,{client:ze()},(0,i.createElement)(Qr,{...e}))}function Gr({trigger:e,conditionId:t=null,modalProps:r={}}){const[n,a]=(0,g.useState)(t),o=ze(),{data:s,isLoading:l}=function(e){return Oe({queryKey:["condition",e],queryFn:async()=>{const t=await Me()({path:`/generateblocks-pro/advanced-conditions/v1/conditions/${e}`});if(t?.success)return t.response;throw new Error("Failed to fetch condition")},enabled:!!e&&"new"!==e,staleTime:12e4,cacheTime:3e5})}(n),c={backButton:(0,h.__)("Back to Conditions","generateblocks-pro"),createNew:(0,h.__)("Create New Condition","generateblocks-pro"),edit:(0,h.__)("Edit Condition","generateblocks-pro"),dashboard:(0,h.__)("Conditions","generateblocks-pro")},u=(0,i.createElement)(Wr,null),d=n&&("new"===n?(0,i.createElement)(Lr,{conditionId:null,initialConditions:{logic:"OR",groups:[]},initialTitle:""}):!l&&s&&(0,i.createElement)(Lr,{conditionId:s.id,initialConditions:s?.gbConditions||{logic:"OR",groups:[]},initialTitle:s?.title?.rendered?.replace(` (${(0,h.__)("inactive","generateblocks-pro")})`,"")||""}));return(0,g.useEffect)((()=>{a(t)}),[t]),(0,i.createElement)(B,{trigger:e,itemId:n,itemType:"condition",dashboardView:u,editorView:d,modalProps:r,labels:c,className:"gb-conditions-dashboard-fullscreen",getNewTabUrl:e=>"new"===e?`${window.location.origin}/wp-admin/admin.php?page=generateblocks-conditions&edit=new`:`${window.location.origin}/wp-admin/admin.php?page=generateblocks-conditions&edit=${e}`,onItemSelect:e=>{a(e),e&&"new"!==e&&o.invalidateQueries({queryKey:["condition",e]})}})}(0,c.addFilter)("generateblocks.editor.sidebar","generateblocks/sidebar/conditions",(function(e,{activePanel:t}){return t?e:(0,i.createElement)(i.Fragment,null,e,(0,i.createElement)(p.PanelBody,null,(0,i.createElement)("h2",{className:"gblocks-editor-sidebar__panel-title"},(0,h.__)("Conditions","generateblocks")),(0,i.createElement)(P,{client:ze()},(0,i.createElement)(Gr,{trigger:(0,i.createElement)(p.Button,{variant:"secondary"},(0,h.__)("Manage Conditions","generateblocks-pro"))}))))}));const Zr={menu1:{label:(0,h._x)("Menu 1","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 14",height:"14",width:"17"},(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"16",x:"0.5"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"16",y:"6",x:"0.5"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"16",y:"12",x:"0.5"}))},menu2:{label:(0,h._x)("Menu 2","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 8",height:"8",width:"17"},(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"16",x:"0.5"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"16",y:"6",x:"0.5"}))},menu3:{label:(0,h._x)("Menu 3","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 14",height:"14",width:"17"},(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"11.6364",x:"0.5"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"16",y:"6",x:"0.5"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"11.6364",y:"12",x:"4.86353"}))},menu4:{label:(0,h._x)("Menu 4","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 14",height:"14",width:"17"},(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(1 0 0 -1 0.5 14)",rx:"1",height:"2",width:"11.6364"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(1 0 0 -1 0.5 8)",rx:"1",height:"2",width:"16"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(1 0 0 -1 4.86353 2)",rx:"1",height:"2",width:"11.6364"}))},menu5:{label:(0,h._x)("Menu 5","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 14",height:"14",width:"17"},(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"11.6364",x:"0.5"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"2.90909",x:"13.5908"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"16",y:"6",x:"0.5"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"11.6364",y:"12",x:"4.86377"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"2.90909",y:"12",x:"0.5"}))},menu6:{label:(0,h._x)("Menu 6","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 14",height:"14",width:"17"},(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 16.5 0)",rx:"1",height:"2",width:"11.6364"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 3.40918 0)",rx:"1",height:"2",width:"2.90909"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 16.5 6)",rx:"1",height:"2",width:"16"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 12.1362 12)",rx:"1",height:"2",width:"11.6364"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 16.5 12)",rx:"1",height:"2",width:"2.90909"}))},menu7:{label:(0,h._x)("Menu 7","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 14",height:"14",width:"17"},(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"13.0909",x:"0.5"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"16",y:"6",x:"0.5"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"11.6364",y:"12",x:"0.5"}))},menu8:{label:(0,h._x)("Menu 8","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 14",height:"14",width:"17"},(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 16.5 0)",rx:"1",height:"2",width:"13.0909"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 16.5 6)",rx:"1",height:"2",width:"16"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 16.5 12)",rx:"1",height:"2",width:"11.6364"}))},menu9:{label:(0,h._x)("Menu 9","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 15",height:"15",width:"16"},(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 16 6.5)",rx:"1",height:"2",width:"13"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 16 0.5)",rx:"1",height:"2",width:"16"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 16 12.5)",rx:"1",height:"2",width:"10"}))},menu10:{label:(0,h._x)("Menu 10","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 15",height:"15",width:"16"},(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"13",y:"6.5"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"16",y:"0.5"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"10",y:"12.5"}))},menu11:{label:(0,h._x)("Menu 11","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 15",height:"15",width:"16"},(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"10.1818",y:"0.5",x:"2.90918"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"16",y:"6.5"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"1",height:"2",width:"10.1818",y:"12.5",x:"2.90918"}))},menu12:{label:(0,h._x)("Menu 12","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 3 15",height:"15",width:"3"},(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 3 0)",rx:"1.5",height:"3",width:"3"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 3 6)",rx:"1.5",height:"3",width:"3"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 3 12)",rx:"1.5",height:"3",width:"3"}))},menu13:{label:(0,h._x)("Menu 13","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 15 3",height:"3",width:"15"},(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(1.19249e-08 -1 -1 -1.19249e-08 15 3)",rx:"1.5",height:"3",width:"3"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(1.19249e-08 -1 -1 -1.19249e-08 9 3)",rx:"1.5",height:"3",width:"3"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(1.19249e-08 -1 -1 -1.19249e-08 3 3)",rx:"1.5",height:"3",width:"3"}))},menu14:{label:(0,h._x)("Menu 14","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 15 15",height:"15",width:"15"},(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 3 0)",rx:"1.5",height:"3",width:"3"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 3 6)",rx:"1.5",height:"3",width:"3"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 3 12)",rx:"1.5",height:"3",width:"3"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 9 0)",rx:"1.5",height:"3",width:"3"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 9 6)",rx:"1.5",height:"3",width:"3"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 9 12)",rx:"1.5",height:"3",width:"3"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 15 0)",rx:"1.5",height:"3",width:"3"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 15 6)",rx:"1.5",height:"3",width:"3"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 15 12)",rx:"1.5",height:"3",width:"3"}))},close:{label:(0,h._x)("Close","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 13 13",height:"13",width:"13"},(0,i.createElement)("rect",{fill:"currentColor",transform:"rotate(-45 0 11.4497)",rx:"1",height:"2",width:"16",y:"11.4497"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 13 11.4497)",rx:"1",height:"2",width:"16"}))}},Yr={menu1:{label:(0,h._x)("Menu 1","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 13",height:"13",width:"16"},(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"16"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"16",y:"6"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"16",y:"12"}))},menu2:{label:(0,h._x)("Menu 2","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 7",height:"7",width:"16"},(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"16"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"16",y:"6"}))},menu3:{label:(0,h._x)("Menu 3","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 13",height:"13",width:"16"},(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"11"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"16",y:"6"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"11",y:"12",x:"5"}))},menu4:{label:(0,h._x)("Menu 4","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 14",height:"14",width:"16"},(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(1 0 0 -1 0 14)",rx:"0.5",height:"1",width:"11"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(1 0 0 -1 0 8)",rx:"0.5",height:"1",width:"16"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(1 0 0 -1 5 2)",rx:"0.5",height:"1",width:"11"}))},menu5:{label:(0,h._x)("Menu 5","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 13",height:"13",width:"16"},(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"12"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"2",x:"14"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"16",y:"6"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"11",y:"12",x:"5"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"3",y:"12"}))},menu6:{label:(0,h._x)("Menu 6","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 13",height:"13",width:"16"},(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 16 0)",rx:"0.5",height:"1",width:"12"}),(0,i.createElement)("path",{fill:"currentColor",d:"M2 0.5C2 0.223858 1.77614 0 1.5 0H0.5C0.223858 0 0 0.223858 0 0.5V0.5C0 0.776142 0.223858 1 0.5 1H1.5C1.77614 1 2 0.776142 2 0.5V0.5Z"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 16 6)",rx:"0.5",height:"1",width:"16"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 12 12)",rx:"0.5",height:"1",width:"12"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 16 12)",rx:"0.5",height:"1",width:"2"}))},menu7:{label:(0,h._x)("Menu 7","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 13",height:"13",width:"16"},(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"13"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"16",y:"6"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"12",y:"12"}))},menu8:{label:(0,h._x)("Menu 8","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 13",height:"13",width:"16"},(0,i.createElement)("path",{fill:"currentColor",d:"M16 0.5C16 0.223858 15.7761 0 15.5 0H2.5C2.22386 0 2 0.223858 2 0.5V0.5C2 0.776142 2.22386 1 2.5 1H15.5C15.7761 1 16 0.776142 16 0.5V0.5Z"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 16 6)",rx:"0.5",height:"1",width:"16"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 16 12)",rx:"0.5",height:"1",width:"12"}))},menu9:{label:(0,h._x)("Menu 9","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 13",height:"13",width:"16"},(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 16 6)",rx:"0.5",height:"1",width:"13"}),(0,i.createElement)("path",{fill:"currentColor",d:"M16 0.5C16 0.223858 15.7761 0 15.5 0H0.5C0.223858 0 0 0.223858 0 0.5V0.5C0 0.776142 0.223858 1 0.5 1H15.5C15.7761 1 16 0.776142 16 0.5V0.5Z"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 16 12)",rx:"0.5",height:"1",width:"10"}))},menu10:{label:(0,h._x)("Menu 10","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 13",height:"13",width:"17"},(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"13",y:"6",x:"1"}),(0,i.createElement)("path",{fill:"currentColor",d:"M0.866025 0.5C0.866025 0.223858 1.08988 0 1.36603 0H16.366C16.6422 0 16.866 0.223858 16.866 0.5V0.5C16.866 0.776142 16.6422 1 16.366 1H1.36603C1.08988 1 0.866025 0.776142 0.866025 0.5V0.5Z"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"10",y:"12",x:"1"}))},menu11:{label:(0,h._x)("Menu 11","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 13",height:"13",width:"16"},(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"10",x:"3"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"16",y:"6"}),(0,i.createElement)("rect",{fill:"currentColor",rx:"0.5",height:"1",width:"10",y:"12",x:"3"}))},menu12:{label:(0,h._x)("Menu 12","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 2 14",height:"14",width:"2"},(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 2 0)",rx:"1",height:"2",width:"2"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 2 6)",rx:"1",height:"2",width:"2"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 2 12)",rx:"1",height:"2",width:"2"}))},menu13:{label:(0,h._x)("Menu 13","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 2",height:"2",width:"14"},(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(1.19249e-08 -1 -1 -1.19249e-08 14 2)",rx:"1",height:"2",width:"2"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(1.19249e-08 -1 -1 -1.19249e-08 8 2)",rx:"1",height:"2",width:"2"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(1.19249e-08 -1 -1 -1.19249e-08 2 2)",rx:"1",height:"2",width:"2"}))},menu14:{label:(0,h._x)("Menu 14","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",height:"14",width:"14"},(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 2 0)",rx:"1",height:"2",width:"2"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 2 6)",rx:"1",height:"2",width:"2"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 2 12)",rx:"1",height:"2",width:"2"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 8 0)",rx:"1",height:"2",width:"2"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 8 6)",rx:"1",height:"2",width:"2"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 8 12)",rx:"1",height:"2",width:"2"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 14 0)",rx:"1",height:"2",width:"2"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 14 6)",rx:"1",height:"2",width:"2"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-1 0 0 1 14 12)",rx:"1",height:"2",width:"2"}))},close:{label:(0,h._x)("Close","label","generateblocks-pro"),icon:(0,i.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 12 12",height:"12",width:"12"},(0,i.createElement)("rect",{fill:"currentColor",transform:"rotate(-45 0 11.3137)",rx:"0.5",height:"1",width:"16",y:"11.3137"}),(0,i.createElement)("rect",{fill:"currentColor",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 12 11.3137)",rx:"0.5",height:"1",width:"16"}))}};(0,c.addFilter)("generateblocks.editor.iconSVGSets","generateblocks-pro/icons/add-icons",(e=>({...e,mediumToggles:{group:(0,h.__)("Menu Toggles (Medium)","generateblocks-pro"),svgs:Zr},lightToggles:{group:(0,h.__)("Menu Toggles (Light)","generateblocks-pro"),svgs:Yr}})))})()})();